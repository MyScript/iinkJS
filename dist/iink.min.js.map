{"version":3,"file":"iink.min.js","sources":["../src/configuration/Constants.js","../src/configuration/LoggerConfig.js","../node_modules/loglevel/lib/loglevel.js","../node_modules/lodash.merge/index.js","../src/configuration/DefaultConfiguration.js","../node_modules/json-css/lib/jsoncss.min.js","../src/configuration/DefaultPenStyle.js","../src/configuration/DefaultTheme.js","../src/grabber/PointerEventGrabber.js","../src/renderer/canvas/symbols/StrokeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/ShapeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/TextSymbolCanvasRenderer.js","../src/model/StrokeComponent.js","../src/model/Symbol.js","../src/model/InkModel.js","../src/renderer/canvas/CanvasRenderer.js","../src/renderer/QuadraticUtils.js","../src/renderer/canvas/stroker/QuadraticCanvasStroker.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../src/renderer/svg/symbols/StrokeSymbolSVGRenderer.js","../src/renderer/svg/SVGRenderer.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/select.js","../src/renderer/svg/stroker/QuadraticSVGStroker.js","../node_modules/crypto-js/core.js","../node_modules/crypto-js/enc-hex.js","../node_modules/crypto-js/x64-core.js","../node_modules/crypto-js/sha512.js","../node_modules/crypto-js/hmac.js","../node_modules/crypto-js/hmac-sha512.js","../src/recognizer/CryptoHelper.js","../src/recognizer/rest/networkInterface.js","../src/model/RecognizerContext.js","../node_modules/perfect-scrollbar/dist/perfect-scrollbar.esm.js","../node_modules/select/src/select.js","../node_modules/clipboard/lib/clipboard-action.js","../node_modules/tiny-emitter/index.js","../node_modules/good-listener/src/is.js","../node_modules/delegate/src/closest.js","../node_modules/delegate/src/delegate.js","../node_modules/good-listener/src/listen.js","../node_modules/clipboard/lib/clipboard.js","../src/smartguide/SmartGuide.js","../node_modules/regenerator-runtime/runtime.js","../src/model/UndoRedoContext.js","../src/model/UndoRedoManager.js","../src/renderer/canvas/ImageRenderer.js","../src/eastereggs/InkImporter.js","../src/util/PromiseHelper.js","../src/Editor.js","../src/configuration/DefaultBehaviors.js","../src/recognizer/RecognizerService.js","../src/recognizer/DefaultRecognizer.js","../src/recognizer/rest/iinkRestRecognizer.js","../node_modules/uuid-js/lib/uuid.js","../src/recognizer/websocket/networkWSInterface.js","../src/recognizer/websocket/WsBuilder.js","../src/recognizer/websocket/WsRecognizerUtil.js","../src/recognizer/websocket/IInkWsRecognizer.js","../src/event/Event.js","../src/EditorFacade.js","../src/iink.js"],"sourcesContent":["/**\n * @typedef {Object} Constants\n */\n\nconst Constants = {\n  EventType: {\n    IDLE: 'idle',\n    CHANGED: 'changed',\n    IMPORTED: 'imported',\n    EXPORTED: 'exported',\n    CONVERTED: 'converted',\n    RENDERED: 'rendered', // Internal use only\n    LOADED: 'loaded',\n    UNDO: 'undo',\n    REDO: 'redo',\n    CLEAR: 'clear',\n    IMPORT: 'import',\n    SUPPORTED_IMPORT_MIMETYPES: 'supportedImportMimeTypes',\n    EXPORT: 'export',\n    CONVERT: 'convert',\n    ERROR: 'error'\n  },\n  RecognitionType: {\n    TEXT: 'TEXT',\n    MATH: 'MATH',\n    DIAGRAM: 'DIAGRAM',\n    RAWCONTENT: 'Raw Content'\n  },\n  Protocol: {\n    WEBSOCKET: 'WEBSOCKET',\n    REST: 'REST'\n  },\n  ModelState: {\n    INITIALIZING: 'INITIALIZING',\n    INITIALIZED: 'INITIALIZED',\n    EXPORTING: 'EXPORTING',\n    EXPORTED: 'EXPORTED',\n    PENDING: 'PENDING',\n    MODIFIED: 'MODIFIED',\n    ERROR: 'ERROR'\n  },\n  Trigger: {\n    QUIET_PERIOD: 'QUIET_PERIOD',\n    POINTER_UP: 'POINTER_UP',\n    DEMAND: 'DEMAND'\n  },\n  Logger: {\n    EDITOR: 'editor',\n    MODEL: 'model',\n    GRABBER: 'grabber',\n    RENDERER: 'renderer',\n    RECOGNIZER: 'recognizer',\n    EVENT: 'event',\n    UTIL: 'util',\n    SMARTGUIDE: 'smartguide'\n  },\n  LogLevel: {\n    TRACE: 'TRACE',\n    DEBUG: 'DEBUG',\n    INFO: 'INFO',\n    WARN: 'WARN',\n    ERROR: 'ERROR'\n  },\n  Languages: {\n    zh_CN: 'Noto Sans CJK tc',\n    zh_HK: 'Noto Sans CJK tc',\n    zh_TW: 'Noto Sans CJK tc',\n    ko_KR: 'Noto Sans CJK kr',\n    ja_JP: 'Noto Sans CJK jp',\n    hy_AM: 'Noto Sans Armenian',\n    default: 'Open Sans'\n  },\n  Error: {\n    NOT_REACHABLE: 'MyScript recognition server is not reachable. Please reload once you are connected.',\n    WRONG_CREDENTIALS: 'Application credentials are invalid. Please check or regenerate your application key and hmackey.',\n    TOO_OLD: 'Session is too old. Max Session Duration Reached.'\n  },\n  Exports: {\n    JIIX: 'application/vnd.myscript.jiix'\n  }\n};\nexport default Constants;\n","import * as loglevel from 'loglevel';\nimport Constants from './Constants';\n\n/**\n * Main log instance\n * @type {Object}\n */\nconst log = loglevel.noConflict();\nexport default log;\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const editorLogger = log.getLogger(Constants.Logger.EDITOR);\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const smartGuideLogger = log.getLogger(Constants.Logger.SMARTGUIDE);\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log model events\n * @type {Object}\n */\nexport const modelLogger = log.getLogger(Constants.Logger.MODEL);\nmodelLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const grabberLogger = log.getLogger(Constants.Logger.GRABBER);\ngrabberLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const rendererLogger = log.getLogger(Constants.Logger.RENDERER);\nrendererLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log recognizer events\n * @type {Object}\n */\nexport const recognizerLogger = log.getLogger(Constants.Logger.RECOGNIZER);\nrecognizerLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log callback events\n * @type {Object}\n */\nexport const eventLogger = log.getLogger(Constants.Logger.EVENT);\neventLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log util events\n * @type {Object}\n */\nexport const utilLogger = log.getLogger(Constants.Logger.UTIL);\nutilLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n\n/**\n * Log tests events\n * @type {Object}\n */\nexport const testLogger = log.getLogger('test');\ntestLogger.setDefaultLevel(Constants.LogLevel.ERROR);\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = merge;\n","import merge from 'lodash.merge';\nimport { editorLogger as logger } from './LoggerConfig';\n\n\n/**\n * Default configuration\n * See https://developer.myscript.com/docs/interactive-ink/latest/reference/web/configuration/ for a full documentation of parameters.\n */\nconst defaultConfiguration = {\n  recognitionParams: {\n    type: 'TEXT',\n    protocol: 'WEBSOCKET',\n    server: {\n      scheme: 'https',\n      host: 'cloud.myscript.com',\n      applicationKey: undefined,\n      hmacKey: undefined,\n      useWindowLocation: false,\n      websocket: {\n        pingEnabled: true,\n        pingDelay: 30000,\n        maxPingLostCount: 10,\n        autoReconnect: true,\n        maxRetryCount: 2,\n        fileChunkSize: 300000\n      }\n    },\n    iink: {\n      alwaysConnected: true,\n      lang: 'en_US',\n      export: {\n        'image-resolution': 300,\n        jiix: {\n          'bounding-box': false,\n          strokes: false,\n          text: {\n            chars: false,\n            words: true\n          }\n        }\n      },\n      renderer: {\n        debug: {\n          'draw-text-boxes': false,\n          'draw-image-boxes': false\n        }\n      },\n      math: {\n        mimeTypes: ['application/x-latex', 'application/mathml+xml'],\n        solver: {\n          enable: true,\n          'fractional-part-digits': 3,\n          'decimal-separator': '.',\n          'rounding-mode': 'half up',\n          'angle-unit': 'deg'\n        },\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        }\n      },\n      text: {\n        guides: {\n          enable: true\n        },\n        smartGuide: true,\n        smartGuideFadeOut: {\n          enable: false,\n          duration: 10000\n        },\n        mimeTypes: ['text/plain', 'application/vnd.myscript.jiix'],\n        margin: {\n          top: 20,\n          left: 10,\n          right: 10\n        }\n      },\n      diagram: {\n        mimeTypes: ['application/vnd.myscript.jiix'],\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        }\n      },\n      'raw-content': {\n        recognition: {\n          text: false,\n          shape: false\n        }\n      }\n    }\n  },\n  // @see generated documentation on top\n  listenerOptions: {\n    capture: false,\n    passive: true\n  },\n  undoRedoMaxStackSize: 20,\n  xyFloatPrecision: 0,\n  timestampFloatPrecision: 0,\n  triggerDelay: 2000,\n  processDelay: 0,\n  resizeTriggerDelay: 200,\n  // Configure when the action is triggered.\n  // POINTER_UP : Action is triggered on every PenUP. This is the recommended mode for CDK V3 WebSocket recognitions.\n  // QUIET_PERIOD : Action is triggered after a quiet period in milli-seconds on every pointer up. I value is set to 2000 for example the recognition will be fired  when user stop writing 2 seconds. This is the recommended mode for all REST recognitions.\n  triggers: {\n    exportContent: 'POINTER_UP',\n    addStrokes: 'POINTER_UP'\n  },\n  restConversionState: '',\n  renderingParams: {\n    stroker: 'quadratic',\n    minHeight: 100,\n    minWidth: 100\n  }\n};\n\n/**\n * Generate parameters\n * @param {Configuration} configuration Configuration to be used\n * @return {Configuration} Overridden configuration\n */\nexport function overrideDefaultConfiguration(configuration) {\n  const confRef = configuration;\n  let currentConfiguration;\n  if (confRef && confRef.recognitionParams.server && confRef.recognitionParams.server.useWindowLocation) {\n    confRef.recognitionParams.server.scheme = window.location.protocol.slice(0, -1);\n    confRef.recognitionParams.server.host = window.location.host;\n    currentConfiguration = merge({}, defaultConfiguration, confRef === undefined ? {} : confRef);\n  } else {\n    currentConfiguration = merge({}, defaultConfiguration, configuration === undefined ? {} : configuration);\n  }\n  logger.debug('Override default configuration', currentConfiguration);\n  return currentConfiguration;\n}\n\nexport default defaultConfiguration;\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.JsonCSS=e():t.JsonCSS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=1)}([function(t,e,n){\"use strict\";function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=function t(e){var n=this;o(this,t),this.toJSON=function(t){if(\"string\"!=typeof t)return console.error(\"Need a CSS string but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid CSS..!\";var e={},o=void 0,i=void 0,u=void 0;try{t.split(\"{\").forEach(function(t){if(i=t.trim())if(-1===i.indexOf(\"}\"))e[i]={},o=i;else{i.substring(0,i.indexOf(\"}\")).split(\";\").forEach(function(t){(u=t.split(\":\"))&&2===u.length&&(e[o][u[0].trim().replace(/^\\\"|\\\"$/g,\"\")]=n._trimSemiColon(u[1].trim().replace(/^\\\"|\\\"$/g,\"\")))});try{o=i.split(\"}\")[1].trim(),o&&(e[o]={})}catch(t){}}})}catch(t){return\"Not a valid CSS..!\"}return e},this.toCSS=function(t){if(\"object\"!==(void 0===t?\"undefined\":r(t)))return console.error(\"Need a JSON object but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid JSON..!\";var e=\"\";try{for(var n in t)if(t.hasOwnProperty(n)){e+=n+\" {\\n\";for(var o in t[n])t[n].hasOwnProperty(o)&&(e+=o+\": \"+t[n][o]+\";\\n\");e+=\"}\\n\"}}catch(t){return\"Not a valid JSON..!\"}return e},this._trimSemiColon=function(t){return\";\"===t.slice(-1)?t.slice(0,n.length-1):t}};e.default=i},function(t,e,n){\"use strict\";t.exports=n(0).default}])});","import JsonCSS from 'json-css';\nimport merge from 'lodash.merge';\nimport { editorLogger as logger } from './LoggerConfig';\n\n/**\n * @typedef {Object} PenStyle\n * @property {String} color=#000000 Color (supported formats rgb() rgba() hsl() hsla() #rgb #rgba #rrggbb #rrggbbaa)\n * @property {String} -myscript-pen-width=1 Width of strokes and primitives in mm (no other unit is supported yet)\n * @property {String} -myscript-pen-fill-style=none\n * @property {String} -myscript-pen-fill-color=#FFFFFF00 Color filled inside the area delimited by strokes and primitives\n */\n\n/**\n * Default style\n * @type {PenStyle}\n */\nconst defaultPenStyle = undefined;\nconst parser = new JsonCSS();\n\n/**\n * Generate style\n * @param {PenStyle} style Custom style to be applied\n * @return {PenStyle} Overridden style\n */\nexport function overrideDefaultPenStyle(style) {\n  const currentStyle = merge({}, defaultPenStyle, style === undefined ? {} : style);\n  logger.debug('Override default pen style', currentStyle);\n  return currentStyle;\n}\n\nexport function toCSS(penStyle) { // FIXME Ugly hack to parse JSON to CSS inline\n  const css = parser.toCSS({ css: penStyle });\n  return css.substring(6, css.length - 3);\n}\n\nexport function toJSON(penStyle) { // FIXME Ugly hack to parse CSS inline to JSON\n  return parser.toJSON(`css {${penStyle}}`).css;\n}\n\nexport default defaultPenStyle;\n","import JsonCSS from 'json-css';\nimport merge from 'lodash.merge';\nimport { editorLogger as logger } from './LoggerConfig';\n\n/**\n * @typedef {PenStyle} InkTheme\n */\n/**\n * @typedef {Object} MathTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n */\n/**\n * @typedef {Object} GeneratedTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n * @property {String} color=#A8A8A8FF Color to be used\n */\n/**\n * @typedef {Object} TextTheme\n * @property {String} font-family=OpenSans Font-family to be used\n * @property {Number} font-size=10 Font-size to be used\n */\n/**\n * @typedef {Object} Theme\n * @property {InkTheme} ink General settings\n * @property {MathTheme} .math Math theme\n * @property {GeneratedTheme} .math-solver Theme to be used for generated items\n * @property {TextTheme} .text Text theme\n */\n\n/**\n * Default theme\n * @type {Theme}\n */\nconst defaultTheme = {\n  ink: {\n    color: '#000000',\n    '-myscript-pen-width': 1,\n    '-myscript-pen-fill-style': 'none',\n    '-myscript-pen-fill-color': '#FFFFFF00'\n  },\n  '.math': {\n    'font-family': 'STIXGeneral'\n  },\n  '.math-solved': {\n    'font-family': 'STIXGeneral',\n    color: '#A8A8A8FF'\n  },\n  '.text': {\n    'font-family': 'Open Sans',\n    'font-size': 10\n  }\n};\nconst parser = new JsonCSS();\n\n/**\n * Generate theme\n * @param {Theme} theme Custom theme to be applied\n * @return {Theme} Overridden theme\n */\nexport function overrideDefaultTheme(theme) {\n  const currentTheme = merge({}, defaultTheme, theme === undefined ? {} : theme);\n  logger.debug('Override default theme', currentTheme);\n  return currentTheme;\n}\n\nexport function toCSS(theme) {\n  return parser.toCSS(theme);\n}\n\nexport function toJSON(theme) {\n  return parser.toJSON(theme);\n}\n\nexport default defaultTheme;\n","import { grabberLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Grab pointerDown, pointerMove and pointerUp events\n * @typedef {Object} Grabber\n * @property {function} attach Attach events and decide when to call editor pointerDown/Move/Up methods\n * @property {function} detach Detach the grabber\n */\n\n/**\n * Grabber listener\n * @typedef {Object} GrabberListener\n * @property {Array<String>} types Event types to listen\n * @property {function} listener Event listener for these events\n */\n\n/**\n * Grabber context\n * @typedef {Object} GrabberContext\n * @property {Boolean|Object} options Options object that specifies characteristics about the event listener. (@see addEventListener.options for detail)\n * @property {Array<GrabberListener>} listeners Registered listeners\n */\n\nconst floatPrecisionArray = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000];\n\nfunction roundFloat(oneFloat, requestedFloatPrecision) {\n  if (requestedFloatPrecision || requestedFloatPrecision === 0) {\n    let floatPrecision;\n    if (requestedFloatPrecision > 10) {\n      floatPrecision = floatPrecisionArray[10];\n    } else {\n      floatPrecision = floatPrecisionArray[requestedFloatPrecision];\n    }\n    return Math.round(oneFloat * floatPrecision) / floatPrecision;\n  }\n  return oneFloat;\n}\n\nfunction extractPoint(event, domElement, configuration, offsetTop = 0, offsetLeft = 0) {\n  let eventRef = event;\n  if (eventRef.changedTouches) {\n    eventRef = eventRef.changedTouches[0];\n  }\n  const rect = domElement.getBoundingClientRect();\n  return {\n    x: roundFloat(eventRef.clientX - rect.left - domElement.clientLeft - offsetLeft, configuration.xyFloatPrecision),\n    y: roundFloat(eventRef.clientY - rect.top - domElement.clientTop - offsetTop, configuration.xyFloatPrecision),\n    t: roundFloat(Date.now(), configuration.timestampFloatPrecision)\n  };\n}\n\n/**\n * Listen for the desired events\n * @param {Element} element DOM element to attach events listeners\n * @param {Editor} editor Editor to received down/move/up events\n * @param {Number} [offsetTop=0]\n * @param {Number} [offsetLeft=0]\n * @return {GrabberContext} Grabber context\n * @listens {Event} pointermove: a pointer moves, similar to touchmove or mousemove.\n * @listens {Event} pointerdown: a pointer is activated, or a device button held.\n * @listens {Event} pointerup: a pointer is deactivated, or a device button released.\n * @listens {Event} pointerover: a pointer has moved onto an element.\n * @listens {Event} pointerout: a pointer is no longer on an element it once was.\n * @listens {Event} pointerenter: a pointer enters the bounding box of an element.\n * @listens {Event} pointerleave: a pointer leaves the bounding box of an element.\n * @listens {Event} pointercancel: a pointer will no longer generate events.\n */\nexport function attach(element, editor, offsetTop = 0, offsetLeft = 0) {\n  let mMaxDiffX = 0;\n\n  function unfocus() {\n    if (window.getSelection().type !== 'None') {\n      window.getSelection().removeAllRanges();\n    }\n  }\n\n  function hideMenu(evt) {\n    const moreMenuInDocument = document.querySelector('.more-menu');\n    if (!evt.target.classList.contains('ellipsis') && !evt.target.classList.contains('more-menu') && !evt.target.classList.contains('options-label-button') && moreMenuInDocument && moreMenuInDocument.style.display !== 'none') {\n      moreMenuInDocument.style.display = 'none';\n      return true;\n    }\n    return false;\n  }\n\n  function hideCandidates(evt) {\n    const candidatesInDocument = document.querySelector('.candidates');\n    if (!evt.target.classList.contains('candidates') && !(evt.target.tagName === 'SPAN') && candidatesInDocument && candidatesInDocument.style.display !== 'none') {\n      candidatesInDocument.style.display = 'none';\n      return true;\n    }\n    return false;\n  }\n\n  function pointerDownHandler(evt) { // Trigger a pointerDown\n    const pointerDownOnEditor = evt.target.id === editor.domElement.id || evt.target.classList.contains('ms-canvas');\n    if (this.activePointerId !== undefined) {\n      if (this.activePointerId === evt.pointerId) {\n        logger.trace(`${evt.type} event with the same id without any pointer up`, evt.pointerId);\n      }\n    } else if ((evt.button !== 2) && (evt.buttons !== 2) && pointerDownOnEditor) { // Ignore right click\n      if (!hideMenu(evt) && !hideCandidates(evt)) {\n        this.activePointerId = evt.pointerId;\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId;\n        unfocus();\n        evt.stopPropagation();\n        editor.pointerDown(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft), evt.pointerType, pointerId);\n      }\n    } else if (evt.target.classList.contains('ellipsis') || evt.target.classList.contains('tag-icon')) {\n      hideMenu(evt);\n      hideCandidates(evt);\n    } else { // FIXME add more complete verification to pointer down on smartguide\n      hideMenu(evt);\n      hideCandidates(evt);\n      this.smartGuidePointerDown = true;\n      this.downSmartGuidePoint = extractPoint(evt, element, editor.configuration);\n    }\n  }\n\n  function pointerMoveHandler(evt) { // Trigger a pointerMove\n    // Only considering the active pointer\n    if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) {\n      unfocus();\n      editor.pointerMove(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft));\n    } else if (this.smartGuidePointerDown) {\n      const point = extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft);\n      const diffX = Math.abs(this.downSmartGuidePoint.x - point.x);\n      const diffY = Math.abs(this.downSmartGuidePoint.y - point.y);\n      mMaxDiffX = Math.max(diffX, mMaxDiffX);\n      const cond1 = diffX < 5 && diffY > 5 && mMaxDiffX < 15;\n      const cond2 = diffX > 5 && diffY > 5 && mMaxDiffX < 15;\n      if (cond1 || cond2) {\n        this.activePointerId = evt.pointerId;\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId;\n        unfocus();\n        editor.pointerDown(this.downSmartGuidePoint, evt.pointerType, pointerId);\n      }\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId);\n    }\n  }\n\n  function pointerUpHandler(evt) { // Trigger a pointerUp\n    mMaxDiffX = 0;\n    this.smartGuidePointerDown = false;\n    const smartGuideIds = ['smartguide', 'prompter-text-container', 'prompter-text', 'tag-icon', 'ellipsis'];\n    const scrollbarClasses = ['ps__rail-x', 'ps__thumb-x'];\n    // Check if pointer entered into any smartguide elements or scrollbar\n    // Use case : when the pointer is entering the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left.\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerEnteredSmartGuide = evt.relatedTarget && (smartGuideIds.includes(evt.relatedTarget.className) || scrollbarClasses.includes(evt.relatedTarget.className));\n    // Check if pointer didn't stay in the smartguide and pointer exited the smartguide or scrollbar\n    // Use case : when the pointer is leaving the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left (the smart guide)\n    // We are entering again the editor\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerExitedSmartGuide = evt.relatedTarget && evt.target && (smartGuideIds.includes(evt.target.className) || scrollbarClasses.includes(evt.target.className));\n    // Check if pointer moved between words in smartguide\n    // Same use case as pointerEnteredSmartGuide but for the words in the smartguide (each word is a span).\n    const pointerMovedWords = evt.relatedTarget && evt.target && (evt.target.tagName === 'SPAN' || evt.relatedTarget.tagName === 'SPAN');\n    if (pointerEnteredSmartGuide || pointerExitedSmartGuide || pointerMovedWords) {\n      evt.stopPropagation();\n    } else if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) { // Only considering the active pointer\n      this.activePointerId = undefined; // Managing the active pointer\n      evt.stopPropagation();\n      editor.pointerUp(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft));\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId);\n    }\n  }\n\n  const context = {\n    options: editor.configuration.listenerOptions,\n    listeners: [{\n      types: ['pointerdown'],\n      listener: pointerDownHandler\n    }, {\n      types: ['pointermove'],\n      listener: pointerMoveHandler\n    }, {\n      types: ['pointerup', 'pointerout', 'pointerleave', 'pointercancel'],\n      listener: pointerUpHandler\n    }]\n  };\n\n  logger.debug('attaching listeners', context);\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.addEventListener(type, item.listener, context.options));\n  });\n  return context;\n}\n\nexport function detach(element, context) {\n  logger.debug('detaching listeners', context);\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.removeEventListener(type, item.listener, context.options));\n  });\n}\n","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke(context, stroke, stroker) {\n  if (stroker) {\n    stroker.drawStroke(context, stroke);\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig';\n\n/**\n * @type {{table: String, shape: String, recognizedShape: String, ellipse: String, line: String}}\n */\nexport const ShapeSymbols = {\n  table: 'table',\n  shape: 'shape',\n  recognizedShape: 'recognizedShape',\n  ellipse: 'ellipse',\n  line: 'line'\n};\n\nfunction phi(angle) {\n  let returnedAngle = ((angle + Math.PI) % (Math.PI * 2)) - Math.PI;\n  if (returnedAngle < -Math.PI) {\n    returnedAngle += Math.PI * 2;\n  }\n  return returnedAngle;\n}\n\nfunction drawEllipseArc(context, centerPoint, maxRadius, minRadius, orientation, startAngle, sweepAngle) {\n  const angleStep = 0.02; // angle delta between interpolated\n\n  let z1 = Math.cos(orientation);\n  let z3 = Math.sin(orientation);\n  let z2 = z1;\n  let z4 = z3;\n  z1 *= maxRadius;\n  z2 *= minRadius;\n  z3 *= maxRadius;\n  z4 *= minRadius;\n\n  const n = Math.floor(Math.abs(sweepAngle) / angleStep);\n\n  const boundariesPoints = [];\n\n  context.save();\n  try {\n    context.beginPath();\n\n    for (let i = 0; i <= n; i++) {\n      const angle = startAngle + ((i / n) * sweepAngle); // points on the arc, in radian\n      const alpha = Math.atan2(Math.sin(angle) / minRadius, Math.cos(angle) / maxRadius);\n\n      const cosAlpha = Math.cos(alpha);\n      const sinAlpha = Math.sin(alpha);\n\n      // current point\n      const x = (centerPoint.x + (z1 * cosAlpha)) - (z4 * sinAlpha);\n      const y = (centerPoint.y + (z2 * sinAlpha)) + (z3 * cosAlpha);\n      if (i === 0) {\n        context.moveTo(x, y);\n      } else {\n        context.lineTo(x, y);\n      }\n\n      if (i === 0 || i === n) {\n        boundariesPoints.push({ x, y });\n      }\n    }\n\n    context.stroke();\n  } finally {\n    context.restore();\n  }\n\n  return boundariesPoints;\n}\n\nfunction drawArrowHead(context, headPoint, angle, length) {\n  const alpha = phi(angle + (Math.PI * (7 / 8)));\n  const beta = phi(angle - (Math.PI * (7 / 8)));\n\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.fillStyle = contextReference.strokeStyle;\n\n    contextReference.moveTo(headPoint.x, headPoint.y);\n    contextReference.beginPath();\n    contextReference.lineTo(headPoint.x + (length * Math.cos(alpha)), headPoint.y + (length * Math.sin(alpha)));\n    contextReference.lineTo(headPoint.x + (length * Math.cos(beta)), headPoint.y + (length * Math.sin(beta)));\n    contextReference.lineTo(headPoint.x, headPoint.y);\n    contextReference.fill();\n  } finally {\n    contextReference.restore();\n  }\n}\n\nfunction drawShapeEllipse(context, shapeEllipse) {\n  const points = drawEllipseArc(\n    context,\n    shapeEllipse.center,\n    shapeEllipse.maxRadius,\n    shapeEllipse.minRadius,\n    shapeEllipse.orientation,\n    shapeEllipse.startAngle,\n    shapeEllipse.sweepAngle);\n\n  if (shapeEllipse.beginDecoration && shapeEllipse.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[0], shapeEllipse.beginTangentAngle, 12.0);\n  }\n  if (shapeEllipse.endDecoration && shapeEllipse.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[1], shapeEllipse.endTangentAngle, 12.0);\n  }\n}\n\n/**\n * Draw a line\n * @param {Object} context Current rendering context\n * @param {{x: Number, y: Number}} p1 Origin point\n * @param {{x: Number, y: Number}} p2 Destination point\n */\nexport function drawLine(context, p1, p2) {\n  context.save();\n  try {\n    context.beginPath();\n    context.moveTo(p1.x, p1.y);\n    context.lineTo(p2.x, p2.y);\n    context.stroke();\n  } finally {\n    context.restore();\n  }\n}\n\nfunction drawShapeLine(context, shapeLine) {\n  drawLine(context, shapeLine.firstPoint, shapeLine.lastPoint);\n  if (shapeLine.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.firstPoint, shapeLine.beginTangentAngle, 12.0);\n  }\n  if (shapeLine.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.lastPoint, shapeLine.endTangentAngle, 12.0);\n  }\n}\n\n/**\n * Draw a shape symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawShapeSymbol(context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`);\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.lineWidth = symbol.width;\n    contextReference.strokeStyle = symbol.color;\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case ShapeSymbols.shape:\n          drawShapeSymbol(contextReference, symbol.candidates[symbol.selectedCandidateIndex]);\n          break;\n        case ShapeSymbols.table:\n          symbol.lines.forEach(line => drawShapeSymbol(contextReference, line));\n          break;\n        case ShapeSymbols.line:\n          drawLine(contextReference, symbol.data.p1, symbol.data.p2);\n          break;\n        default:\n          logger.error(`${symbol.elementType} not implemented`);\n          break;\n      }\n    } else {\n      switch (symbol.type) {\n        case ShapeSymbols.ellipse:\n          drawShapeEllipse(contextReference, symbol);\n          break;\n        case ShapeSymbols.line:\n          drawShapeLine(contextReference, symbol);\n          break;\n        case ShapeSymbols.recognizedShape:\n          symbol.primitives.forEach(primitive => drawShapeSymbol(contextReference, primitive));\n          break;\n        default:\n          logger.error(`${symbol.type} not implemented`);\n          break;\n      }\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig';\nimport { drawLine } from './ShapeSymbolCanvasRenderer';\n\n/**\n * @type {{inputCharacter: String, char: String, string: String, textLine: String}}\n */\nexport const TextSymbols = {\n  inputCharacter: 'inputCharacter',\n  char: 'char',\n  string: 'string',\n  textLine: 'textLine'\n};\n\nfunction drawUnderline(context, underline, label, data) {\n  const delta = data.width / label.length;\n  const p1 = {\n    x: data.topLeftPoint.x + (underline.data.firstCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  };\n  const p2 = {\n    x: data.topLeftPoint.x + (underline.data.lastCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  };\n  drawLine(context, p1, p2);\n}\n\nfunction drawText(context, label, data) {\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.font = `${data.textHeight}px serif`;\n    contextReference.textAlign = (data.justificationType === 'CENTER') ? 'center' : 'left';\n    contextReference.textBaseline = 'bottom';\n    contextReference.fillStyle = contextReference.strokeStyle;\n    contextReference.fillText(label, data.topLeftPoint.x, (data.topLeftPoint.y + data.height));\n  } finally {\n    contextReference.restore();\n  }\n}\n\nfunction drawTextLine(context, textLine) {\n  drawText(context, textLine.label, textLine.data);\n  textLine.underlineList.forEach((underline) => {\n    drawUnderline(context, underline, textLine.label, textLine.data);\n  });\n}\n\n/**\n * Draw a text symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawTextSymbol(context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`);\n  const contextReference = context;\n  contextReference.save();\n  try {\n    contextReference.lineWidth = symbol.width;\n    contextReference.strokeStyle = symbol.color;\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol);\n          break;\n        default:\n          logger.error(`${symbol.elementType} not implemented`);\n          break;\n      }\n    } else {\n      switch (symbol.type) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol);\n          break;\n        default:\n          logger.error(`${symbol.type} not implemented`);\n      }\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Stroke symbol\n * @typedef {Object} Stroke\n * @property {String} type=stroke Symbol type, 'stroke' for stroke\n * @property {String} pointerType=undefined Pointer type\n * @property {Number} pointerId=undefined Pointer id\n * @property {Array<Number>} x=[] X coordinates\n * @property {Array<Number>} y=[] Y coordinates\n * @property {Array<Number>} t=[] Timestamps matching x,y coordinates\n * @property {Array<Number>} p=[] Pressure\n * @property {Array<Number>} l=[] Length from origin\n * @property {Number} width=0 (for rendering) Pen/brush width\n * @property {String} color=undefined (for rendering) Pen/brush color\n */\n\n/**\n * pointerEvents symbol\n * @typedef {Object} pointerEvents\n * @property {String} type=pointerEvents Symbol type, 'pointerEvents' for pointerEvents\n * @property {Boolean} processGestures=False indicates if the gestures have to be processed\n * @property {Array<Stroke>} events=[] the events to process\n */\n\nfunction computeDistance(x, y, xArray, yArray, lastIndexPoint) {\n  const distance = Math.sqrt(Math.pow((y - yArray[lastIndexPoint - 1]), 2) + Math.pow((x - xArray[lastIndexPoint - 1]), 2));\n  return isNaN(distance) ? 0 : distance;\n}\n\nfunction computeLength(x, y, xArray, yArray, lArray, lastIndexPoint) {\n  const length = lArray[lastIndexPoint - 1] + computeDistance(x, y, xArray, yArray, lastIndexPoint);\n  return isNaN(length) ? 0 : length;\n}\n\nfunction computePressure(x, y, xArray, yArray, lArray, lastIndexPoint) {\n  let ratio = 1.0;\n  const distance = computeDistance(x, y, xArray, yArray, lastIndexPoint);\n  const length = computeLength(x, y, xArray, yArray, lArray, lastIndexPoint);\n\n  if (length === 0) {\n    ratio = 0.5;\n  } else if (distance === length) {\n    ratio = 1.0;\n  } else if (distance < 10) {\n    ratio = 0.2 + Math.pow(0.1 * distance, 0.4);\n  } else if (distance > length - 10) {\n    ratio = 0.2 + Math.pow(0.1 * (length - distance), 0.4);\n  }\n  const pressure = ratio * Math.max(0.1, 1.0 - (0.1 * Math.sqrt(distance)));\n  return isNaN(parseFloat(pressure)) ? 0.5 : pressure;\n}\n\nfunction filterPointByAcquisitionDelta(x, y, xArray, yArray, width) {\n  const delta = (2 + (width / 4));\n  let ret = false;\n  if (xArray.length === 0 || yArray.length === 0 || Math.abs(xArray[xArray.length - 1] - x) >= delta || Math.abs(yArray[yArray.length - 1] - y) >= delta) {\n    ret = true;\n  }\n  return ret;\n}\n\n/**\n * Create a new stroke\n * @param {Object} properties Properties to be applied to the stroke.\n * @return {Stroke} New stroke with properties for quadratics draw\n */\nexport function createStrokeComponent(properties) {\n  const defaultStroke = {\n    type: 'stroke',\n    x: [],\n    y: [],\n    t: [],\n    p: [],\n    l: [],\n    width: 0\n  };\n  return Object.assign({}, defaultStroke, properties);\n}\n\n/**\n * Get a JSON copy of a stroke by filtering its properties\n * @param {Stroke} stroke Current stroke\n * @return {{x: Array<Number>, y: Array<Number>, t: Array<Number>}} Simplified stroke object\n */\nexport function toJSON(stroke) {\n  return { x: stroke.x, y: stroke.y, t: stroke.t };\n}\n\n/**\n * Mutate a stroke by adding a point to it.\n * @param {Stroke} stroke Current stroke\n * @param {{x: Number, y: Number, t: Number}} point Point to add\n * @return {Stroke} Updated stroke\n */\nexport function addPoint(stroke, point) {\n  const strokeReference = stroke;\n  if (filterPointByAcquisitionDelta(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.width)) {\n    strokeReference.x.push(point.x);\n    strokeReference.y.push(point.y);\n    strokeReference.t.push(point.t);\n    strokeReference.p.push(computePressure(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1));\n    strokeReference.l.push(computeLength(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1));\n  } else {\n    logger.trace('ignore filtered point', point);\n  }\n  return strokeReference;\n}\n\n/**\n * Slice a stroke and return the sliced part of it\n * @param {Stroke} stroke Current stroke\n * @param {Number} [start=0] Zero-based index at which to begin extraction\n * @param {Number} [end=length] Zero-based index at which to end extraction\n * @return {Stroke} Sliced stroke\n */\nexport function slice(stroke, start = 0, end = stroke.x.length) {\n  const slicedStroke = createStrokeComponent({ color: stroke.color, width: stroke.width });\n  for (let i = start; i < end; i++) {\n    addPoint(slicedStroke, {\n      x: stroke.x[i],\n      y: stroke.y[i],\n      t: stroke.t[i]\n    });\n  }\n  return slicedStroke;\n}\n\n/**\n * Extract point by index\n * @param {Stroke} stroke Current stroke\n * @param {Number} index Zero-based index\n * @return {{x: Number, y: Number, t: Number, p: Number, l: Number}} Point with properties for quadratics draw\n */\nexport function getPointByIndex(stroke, index) {\n  let point;\n  if (index !== undefined && index >= 0 && index < stroke.x.length) {\n    point = {\n      x: stroke.x[index],\n      y: stroke.y[index],\n      t: stroke.t[index],\n      p: stroke.p[index],\n      l: stroke.l[index]\n    };\n  }\n  return point;\n}\n","function mergeBounds(boundsA, boundsB) {\n  return {\n    minX: Math.min(boundsA.minX, boundsB.minX),\n    maxX: Math.max(boundsA.maxX, boundsB.maxX),\n    minY: Math.min(boundsA.minY, boundsB.minY),\n    maxY: Math.max(boundsA.maxY, boundsB.maxY)\n  };\n}\n\nfunction getLineBounds(line) {\n  return {\n    minX: Math.min(line.firstPoint.x, line.lastPoint.x),\n    maxX: Math.max(line.firstPoint.x, line.lastPoint.x),\n    minY: Math.min(line.firstPoint.y, line.lastPoint.y),\n    maxY: Math.max(line.firstPoint.y, line.lastPoint.y)\n  };\n}\n\nfunction getEllipseBounds(ellipse) {\n  const angleStep = 0.02; // angle delta between interpolated points on the arc, in radian\n\n  let z1 = Math.cos(ellipse.orientation);\n  let z3 = Math.sin(ellipse.orientation);\n  let z2 = z1;\n  let z4 = z3;\n  z1 *= ellipse.maxRadius;\n  z2 *= ellipse.minRadius;\n  z3 *= ellipse.maxRadius;\n  z4 *= ellipse.minRadius;\n\n  const n = Math.abs(ellipse.sweepAngle) / angleStep;\n\n  const x = [];\n  const y = [];\n\n  for (let i = 0; i <= n; i++) {\n    const angle = ellipse.startAngle + ((i / n) * ellipse.sweepAngle);\n    const alpha = Math.atan2(Math.sin(angle) / ellipse.minRadius, Math.cos(angle) / ellipse.maxRadius);\n\n    const cosAlpha = Math.cos(alpha);\n    const sinAlpha = Math.sin(alpha);\n\n    x.push(ellipse.center.x + ((z1 * cosAlpha) - (z4 * sinAlpha)));\n    y.push(ellipse.center.y + ((z2 * sinAlpha) + (z3 * cosAlpha)));\n  }\n\n  return {\n    minX: Math.min(...x),\n    maxX: Math.max(...x),\n    minY: Math.min(...y),\n    maxY: Math.max(...y)\n  };\n}\n\nfunction getTextLineBounds(textLine) {\n  return {\n    minX: textLine.data.topLeftPoint.x,\n    maxX: textLine.data.topLeftPoint.x + textLine.data.width,\n    minY: textLine.data.topLeftPoint.y,\n    maxY: textLine.data.topLeftPoint.y + textLine.data.height\n  };\n}\n\nfunction getClefBounds(clef) {\n  return {\n    minX: clef.boundingBox.x,\n    maxX: clef.boundingBox.x + clef.boundingBox.width,\n    minY: clef.boundingBox.y,\n    maxY: clef.boundingBox.y + clef.boundingBox.height\n  };\n}\n\nfunction getStrokeBounds(stroke) {\n  return {\n    minX: Math.min(...stroke.x),\n    maxX: Math.max(...stroke.x),\n    minY: Math.min(...stroke.y),\n    maxY: Math.max(...stroke.y)\n  };\n}\n\n/**\n * Get the box enclosing the given symbols\n * @param {Array} symbols Symbols to extract bounds from\n * @param {Bounds} [bounds] Starting bounds for recursion\n * @return {Bounds} Bounding box enclosing symbols\n */\nexport function getSymbolsBounds(symbols, bounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE }) {\n  let boundsRef = bounds;\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'stroke')\n    .map(getStrokeBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'clef')\n    .map(getClefBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'line')\n    .map(getLineBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'ellipse')\n    .map(getEllipseBounds)\n    .reduce(mergeBounds, boundsRef);\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'textLine')\n    .map(getTextLineBounds)\n    .reduce(mergeBounds, boundsRef);\n  return boundsRef;\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\nimport * as StrokeComponent from './StrokeComponent';\nimport { getSymbolsBounds } from './Symbol';\n\n/**\n * Recognition positions\n * @typedef {Object} RecognitionPositions\n * @property {Number} [lastSentPosition=-1] Index of the last sent stroke.\n * @property {Number} [lastReceivedPosition=-1] Index of the last received stroke.\n * @property {Number} [lastRenderedPosition=-1] Last rendered recognized symbol position\n */\n\n/**\n * Raw results\n * @typedef {Object} RawResults\n * @property {Object} convert=undefined The convert result\n * @property {Object} exports=undefined The exports output as return by the recognition service.\n */\n\n/**\n * Editor model\n * @typedef {Object} Model\n * @property {Stroke} currentStroke=undefined Stroke in building process.\n * @property {Array<Stroke>} rawStrokes=[] List of captured strokes.\n * @property {Array} strokeGroups=[] Group of strokes with same pen style.\n * @property {RecognitionPositions} lastPositions Last recognition sent/received stroke indexes.\n * @property {Array<Object>} defaultSymbols=[] Default symbols, relative to the current recognition type.\n * @property {Array<Object>} recognizedSymbols=undefined Symbols to render (e.g. stroke, shape primitives, string, characters...).\n * @property {Object} exports=undefined Result of the export (e.g. mathml, latex, text...).\n * @property {RawResults} rawResults The recognition output as return by the recognition service.\n * @property {Number} creationTime Date of creation timestamp.\n * @property {Number} modificationTime=undefined Date of lastModification.\n */\n\n/**\n * Bounding box\n * @typedef {Object} Bounds\n * @property {Number} minX Minimal x coordinate\n * @property {Number} maxX Maximal x coordinate\n * @property {Number} minY Minimal y coordinate\n * @property {Number} maxY Maximal y coordinate\n */\n\n/**\n * Create a new model\n * @param {Configuration} [configuration] Parameters to use to populate default recognition symbols\n * @return {Model} New model\n */\nexport function createModel(configuration) {\n  // see @typedef documentation on top\n  return {\n    currentStroke: undefined,\n    rawStrokes: [],\n    strokeGroups: [],\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1,\n      lastRenderedPosition: -1\n    },\n    defaultSymbols: [],\n    recognizedSymbols: undefined,\n    exports: undefined,\n    rawResults: {\n      convert: undefined,\n      exports: undefined\n    },\n    creationTime: new Date().getTime(),\n    modificationTime: undefined\n  };\n}\n\n/**\n * Clear the model.\n * @param {Model} model Current model\n * @return {Model} Cleared model\n */\nexport function clearModel(model) {\n  const modelReference = model;\n  modelReference.currentStroke = undefined;\n  modelReference.rawStrokes = [];\n  modelReference.strokeGroups = [];\n  modelReference.lastPositions.lastSentPosition = -1;\n  modelReference.lastPositions.lastReceivedPosition = -1;\n  modelReference.lastPositions.lastRenderedPosition = -1;\n  modelReference.recognizedSymbols = undefined;\n  modelReference.exports = undefined;\n  modelReference.rawResults.convert = undefined;\n  modelReference.rawResults.exports = undefined;\n  return modelReference;\n}\n\n/**\n * Check if the model needs to be redrawn.\n * @param {Model} model Current model\n * @return {Boolean} True if the model needs to be redrawn, false otherwise\n */\nexport function needRedraw(model) {\n  return model.recognizedSymbols ? (model.rawStrokes.length !== model.recognizedSymbols.filter(symbol => symbol.type === 'stroke').length) : false;\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @return {Model} Updated model\n */\nexport function addStroke(model, stroke) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model;\n  logger.debug('addStroke', stroke);\n  modelReference.rawStrokes.push(stroke);\n  return modelReference;\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd and the penstyle. Used for iink REST.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @param {PenStyle} strokePenStyle\n * @return {Model} Updated model\n */\nexport function addStrokeToGroup(model, stroke, strokePenStyle) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model;\n  logger.debug('addStroke', stroke);\n  const lastGroup = modelReference.strokeGroups.length - 1;\n  if (modelReference.strokeGroups[lastGroup] && modelReference.strokeGroups[lastGroup].penStyle === strokePenStyle) {\n    modelReference.strokeGroups[lastGroup].strokes.push(stroke);\n  } else {\n    const newStrokeGroup = {\n      penStyle: strokePenStyle,\n      strokes: []\n    };\n    const strokeCopy = {};\n    Object.assign(strokeCopy, stroke);\n    newStrokeGroup.strokes.push(strokeCopy);\n    modelReference.strokeGroups.push(newStrokeGroup);\n  }\n  return modelReference;\n}\n\n/**\n * Get the strokes that needs to be recognized\n * @param {Model} model Current model\n * @param {Number} [position=lastReceived] Index from where to extract strokes\n * @return {Array<Stroke>} Pending strokes\n */\nexport function extractPendingStrokes(model, position = model.lastPositions.lastReceivedPosition + 1) {\n  return model.rawStrokes.slice(position);\n}\n\n/**\n * Mutate the model by adding a point and close the current stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to create current stroke\n * @param {Object} properties Properties to be applied to the current stroke\n * @param {Number} [dpi=96] The screen dpi resolution\n * @return {Model} Updated model\n */\nexport function initPendingStroke(model, point, properties, dpi = 96) {\n  if (properties && properties['-myscript-pen-width']) {\n    const pxWidth = (properties['-myscript-pen-width'] * dpi) / 25.4;\n    Object.assign(properties, { width: pxWidth / 2 }); // FIXME hack to get better render\n  }\n  const modelReference = model;\n  logger.trace('initPendingStroke', point);\n  // Setting the current stroke to an empty one\n  modelReference.currentStroke = StrokeComponent.createStrokeComponent(properties);\n  modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n  return modelReference;\n}\n\n/**\n * Mutate the model by adding a point to the current pending stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @return {Model} Updated model\n */\nexport function appendToPendingStroke(model, point) {\n  const modelReference = model;\n  if (modelReference.currentStroke) {\n    logger.trace('appendToPendingStroke', point);\n    modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n  }\n  return modelReference;\n}\n\n/**\n * Mutate the model by adding the new point on a initPendingStroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @param {PenStyle} penStyle\n * @return {Model} Updated model\n */\nexport function endPendingStroke(model, point, penStyle) {\n  const modelReference = model;\n  if (modelReference.currentStroke) {\n    logger.trace('endPendingStroke', point);\n    const currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point);\n    // Mutating pending strokes\n    addStroke(modelReference, currentStroke);\n    addStrokeToGroup(modelReference, currentStroke, penStyle);\n    // Resetting the current stroke to an undefined one\n    delete modelReference.currentStroke;\n  }\n  return modelReference;\n}\n\n/**\n * Get the bounds of the current model.\n * @param {Model} model Current model\n * @return {Bounds} Bounding box enclosing the current drawn model\n */\nexport function getBorderCoordinates(model) {\n  let modelBounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE };\n\n  // Default symbols\n  if (model.defaultSymbols && model.defaultSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.defaultSymbols, modelBounds);\n  }\n  // Recognized symbols\n  if (model.recognizedSymbols && model.recognizedSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.recognizedSymbols, modelBounds);\n    // Pending strokes\n    modelBounds = getSymbolsBounds(extractPendingStrokes(model), modelBounds);\n  } else {\n    modelBounds = getSymbolsBounds(model.rawStrokes, modelBounds);\n  }\n  return modelBounds;\n}\n\n/**\n * Extract strokes from an ink range\n * @param {Model} model Current model\n * @param {Number} firstStroke First stroke index to extract\n * @param {Number} lastStroke Last stroke index to extract\n * @param {Number} firstPoint First point index to extract\n * @param {Number} lastPoint Last point index to extract\n * @return {Array<Stroke>} The extracted strokes\n */\nexport function extractStrokesFromInkRange(model, firstStroke, lastStroke, firstPoint, lastPoint) {\n  return model.rawStrokes.slice(firstStroke, lastStroke + 1).map((stroke, index, slicedStrokes) => {\n    if (slicedStrokes.length < 2) {\n      return StrokeComponent.slice(stroke, firstPoint, lastPoint + 1);\n    }\n    if (index === 0) {\n      return StrokeComponent.slice(stroke, firstPoint);\n    }\n    if (index === (slicedStrokes.length - 1)) {\n      return StrokeComponent.slice(stroke, 0, lastPoint + 1);\n    }\n    return stroke;\n  });\n}\n\n/**\n * Update model lastSentPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelSentPosition(model, position = model.rawStrokes.length - 1) {\n  const modelReference = model;\n  modelReference.lastPositions.lastSentPosition = position;\n  return modelReference;\n}\n\n/**\n * Update model lastReceivedPosition regarding to lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function updateModelReceivedPosition(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastReceivedPosition = modelReference.lastPositions.lastSentPosition;\n  return modelReference;\n}\n\n/**\n * Reset model lastReceivedPosition and lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelPositions(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastSentPosition = -1;\n  modelReference.lastPositions.lastReceivedPosition = -1;\n  return modelReference;\n}\n\n/**\n * Reset model lastRenderedPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelRendererPosition(model) {\n  const modelReference = model;\n  modelReference.lastPositions.lastRenderedPosition = -1;\n  return modelReference;\n}\n\n/**\n * Update model lastRenderedPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelRenderedPosition(model, position = model.recognizedSymbols ? model.recognizedSymbols.length - 1 : -1) {\n  const modelReference = model;\n  modelReference.lastPositions.lastRenderedPosition = position;\n  return modelReference;\n}\n\n/**\n * Get the symbols that needs to be rendered\n * @param {Model} model Current model\n * @param {Number} [position=lastRendered] Index from where to extract symbols\n * @return {Array<Object>}\n */\nexport function extractPendingRecognizedSymbols(model, position = model.lastPositions.lastRenderedPosition + 1) {\n  return model.recognizedSymbols ? model.recognizedSymbols.slice(position) : [];\n}\n\n/**\n * Clone model\n * @param {Model} model Current model\n * @return {Model} Clone of the current model\n */\nexport function cloneModel(model) {\n  const clonedModel = Object.assign({}, model);\n  // We clone the properties that need to be. Take care of arrays.\n  clonedModel.defaultSymbols = [...model.defaultSymbols];\n  clonedModel.currentStroke = model.currentStroke ? Object.assign({}, model.currentStroke) : undefined;\n  clonedModel.rawStrokes = [...model.rawStrokes];\n  clonedModel.strokeGroups = JSON.parse(JSON.stringify(model.strokeGroups));\n  clonedModel.lastPositions = Object.assign({}, model.lastPositions);\n  clonedModel.exports = model.exports ? Object.assign({}, model.exports) : undefined;\n  clonedModel.rawResults = Object.assign({}, model.rawResults);\n  clonedModel.recognizedSymbols = model.recognizedSymbols ? [...model.recognizedSymbols] : undefined;\n  return clonedModel;\n}\n\n/**\n * Merge models\n * @param {...Model} models Models to merge (ordered)\n * @return {Model} Updated model\n */\nexport function mergeModels(...models) {\n  return models.reduce((a, b) => {\n    const modelRef = a;\n    modelRef.recognizedSymbols = b.recognizedSymbols;\n    modelRef.lastPositions.lastSentPosition = b.lastPositions.lastSentPosition;\n    modelRef.lastPositions.lastReceivedPosition = b.lastPositions.lastReceivedPosition;\n    modelRef.lastPositions.lastRenderedPosition = b.lastPositions.lastRenderedPosition;\n    modelRef.rawResults = b.rawResults;\n    modelRef.exports = b.exports;\n    return modelRef;\n  });\n}\n","import { rendererLogger as logger } from '../../configuration/LoggerConfig';\nimport { drawStroke } from './symbols/StrokeSymbolCanvasRenderer';\nimport { drawTextSymbol, TextSymbols } from './symbols/TextSymbolCanvasRenderer';\nimport { drawShapeSymbol, ShapeSymbols } from './symbols/ShapeSymbolCanvasRenderer';\nimport * as InkModel from '../../model/InkModel';\n\n/**\n * Renderer info\n * @typedef {Object} RendererInfo\n * @property {String} type Renderer type.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Default renderer\n * @typedef {Object} Renderer\n * @property {function} getInfo Get some information about this renderer\n * @property {function} attach Populate the DOM element to create rendering area.\n * @property {function} detach Remove rendering area from the DOM element.\n * @property {function} resize Explicitly resize the rendering area.\n * @property {function} drawCurrentStroke Draw the model currentStroke.\n * @property {function} drawModel Draw the model defaultSymbols and recognizedSymbols.\n */\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo() {\n  return {\n    type: 'canvas'\n  };\n}\n\nfunction getPixelRatio(canvas) {\n  if (canvas) {\n    const context = canvas.getContext('2d');\n    // we are using a browser object\n    // eslint-disable-next-line no-undef\n    const devicePixelRatio = window.devicePixelRatio || 1;\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }\n  return 1;\n}\n\nfunction detectPixelRatio(element) {\n  // we are using a browser object\n  // eslint-disable-next-line no-undef\n  const tempCanvas = document.createElement('canvas');\n  const canvasRatio = getPixelRatio(tempCanvas);\n  // document.removeChild(tempCanvas);\n  return canvasRatio;\n}\n\nfunction createCanvas(element, type) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document;\n  const canvas = browserDocument.createElement('canvas');\n  canvas.classList.add(type);\n  canvas.classList.add('ms-canvas');\n  element.appendChild(canvas);\n  logger.debug('canvas created', canvas);\n  return canvas;\n}\n\nfunction resizeContent(context) {\n  const elements = [context.renderingCanvas, context.capturingCanvas];\n  elements.forEach((canvas) => {\n    const domElement = canvas.parentNode;\n    const width = domElement.clientWidth < context.minWidth ? context.minWidth : domElement.clientWidth;\n    const height = domElement.clientHeight < context.minHeight ? context.minHeight : domElement.clientHeight;\n    /* eslint-disable no-param-reassign */\n    canvas.width = width * context.pixelRatio;\n    canvas.height = height * context.pixelRatio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    /* eslint-enable no-param-reassign */\n    canvas.getContext('2d').scale(context.pixelRatio, context.pixelRatio);\n    logger.debug('canvas size changed', canvas);\n  });\n  return context;\n}\n\n/**\n * Attach the renderer to the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Number} [minHeight=0] Minimal height of the editor\n * @param {Number} [minWidth=0] Minimal width of the editor\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach(element, minHeight = 0, minWidth = 0) {\n  logger.debug('attach renderer', element);\n  const pixelRatio = detectPixelRatio(element);\n\n  const renderingCanvas = createCanvas(element, 'ms-rendering-canvas');\n  const capturingCanvas = createCanvas(element, 'ms-capture-canvas');\n\n  const context = {\n    pixelRatio,\n    minHeight,\n    minWidth,\n    renderingCanvas,\n    renderingCanvasContext: renderingCanvas.getContext('2d'),\n    capturingCanvas,\n    capturingCanvasContext: capturingCanvas.getContext('2d')\n  };\n\n  return resizeContent(context);\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach(element, context) {\n  logger.debug('detach renderer', element);\n  element.removeChild(context.renderingCanvas);\n  element.removeChild(context.capturingCanvas);\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function resize(context, model, stroker) {\n  return this.drawModel(resizeContent(context), model, stroker);\n}\n\nfunction drawSymbol(context, symbol, stroker) {\n  const type = symbol.elementType ? symbol.elementType : symbol.type;\n  logger.trace(`attempting to draw ${type} symbol`);\n  if (type === 'stroke') {\n    drawStroke(context, symbol, stroker);\n  } else if (TextSymbols[type]) {\n    drawTextSymbol(context, symbol);\n  } else if (ShapeSymbols[type]) {\n    drawShapeSymbol(context, symbol);\n  } else {\n    logger.warn(`impossible to draw ${type} symbol`);\n  }\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke(context, model, stroker) {\n  // Render the current stroke\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height);\n  logger.trace('drawing current stroke ', model.currentStroke);\n  drawStroke(context.capturingCanvasContext, model.currentStroke, stroker);\n  return model;\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel(context, model, stroker) {\n  context.renderingCanvasContext.clearRect(0, 0, context.renderingCanvas.width, context.renderingCanvas.height);\n  // Displaying the default symbols and pending strokes\n  const symbols = [...model.defaultSymbols];\n  // Displaying the recognition symbols or raw strokes\n  if (model.recognizedSymbols) {\n    symbols.push(...model.recognizedSymbols);\n    symbols.push(...InkModel.extractPendingStrokes(model));\n  } else {\n    symbols.push(...model.rawStrokes);\n  }\n  symbols.forEach(symbol => drawSymbol(context.renderingCanvasContext, symbol, stroker));\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height);\n  return model;\n}\n","/** ===============================================================================================\n * Compute quadratics control points\n * ============================================================================================= */\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point\n * @param angle\n * @param width\n * @return {({x: number, y: *}|{x: *, y: number})}\n */\nexport function computeLinksPoints(point, angle, width) {\n  const radius = point.p * width;\n  return [{\n    x: (point.x - (Math.sin(angle) * radius)),\n    y: (point.y + (Math.cos(angle) * radius))\n  }, {\n    x: (point.x + (Math.sin(angle) * radius)),\n    y: (point.y - (Math.cos(angle) * radius))\n  }];\n}\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point1\n * @param {{x: Number, y: Number, p: Number}} point2\n * @return {{x: Number, y: Number, p: Number}}\n */\nexport function computeMiddlePoint(point1, point2) {\n  return {\n    x: ((point2.x + point1.x) / 2),\n    y: ((point2.y + point1.y) / 2),\n    p: ((point2.p + point1.p) / 2)\n  };\n}\n\n/**\n *\n * @param {{x: Number, y: Number}} begin\n * @param {{x: Number, y: Number}} end\n * @return {Number}\n */\nexport function computeAxeAngle(begin, end) {\n  return Math.atan2(end.y - begin.y, end.x - begin.x);\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent';\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils';\n\n/**\n * Stroker info\n * @typedef {Object} StrokerInfo\n * @property {String} type Renderer type.\n * @property {String} name Stroker name.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Define how a stroke should be drawn\n * @typedef {Object} Stroker\n * @property {function} getInfo Get some information about this stroker\n * @property {function} drawStroke Render a stroke on the current context.\n */\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo() {\n  return {\n    type: 'canvas',\n    name: 'quadratic'\n  };\n}\n\nfunction renderArc(context, center, radius) {\n  context.arc(center.x, center.y, radius, 0, Math.PI * 2, true);\n}\n\nfunction renderLine(context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width);\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y);\n  context.lineTo(linkPoints2[0].x, linkPoints2[0].y);\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y);\n  context.lineTo(linkPoints1[1].x, linkPoints1[1].y);\n}\n\nfunction renderFinal(context, begin, end, width) {\n  const ARCSPLIT = 6;\n  const angle = computeAxeAngle(begin, end);\n  const linkPoints = computeLinksPoints(end, angle, width);\n  context.moveTo(linkPoints[0].x, linkPoints[0].y);\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - ((i * Math.PI) / ARCSPLIT);\n    context.lineTo(end.x - ((end.p * width) * Math.sin(newAngle)), end.y + (end.p * width * Math.cos(newAngle)));\n  }\n}\n\nfunction renderQuadratic(context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width);\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width);\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y);\n  context.quadraticCurveTo(linkPoints3[0].x, linkPoints3[0].y, linkPoints2[0].x, linkPoints2[0].y);\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y);\n  context.quadraticCurveTo(linkPoints3[1].x, linkPoints3[1].y, linkPoints1[1].x, linkPoints1[1].y);\n}\n\n/**\n * Draw a stroke on a canvas, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke(context, stroke) {\n  const contextReference = context;\n  const length = stroke.x.length;\n  const width = stroke.width > 0 ? stroke.width : contextReference.lineWidth;\n  const color = stroke.color ? stroke.color : contextReference.strokeStyle;\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0);\n  const nbquadratics = length - 2;\n\n  contextReference.save();\n  try {\n    contextReference.beginPath();\n    if (length < 3) {\n      renderArc(contextReference, firstPoint, width * 0.6);\n    } else {\n      renderArc(contextReference, firstPoint, width * firstPoint.p);\n      renderLine(contextReference, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width);\n\n      // Possibility to try this (the start looks better when the ink is large)\n      // var first = computeMiddlePoint(stroke[0], stroke[1]);\n      // contextReference.arc(first.x, first.y, width * first.p, 0, Math.PI * 2, true);\n\n      for (let i = 0; i < nbquadratics; i++) {\n        renderQuadratic(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width);\n      }\n      renderLine(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width);\n      renderFinal(contextReference, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width);\n    }\n    contextReference.closePath();\n    if (color !== undefined) {\n      contextReference.fillStyle = color;\n      contextReference.fill();\n    }\n  } finally {\n    contextReference.restore();\n  }\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke(context, stroke, stroker) {\n  if (stroker) {\n    stroker.drawStroke(context, stroke);\n  }\n}\n","import * as d3 from 'd3-selection';\nimport { rendererLogger as logger } from '../../configuration/LoggerConfig';\nimport { drawStroke } from './symbols/StrokeSymbolSVGRenderer';\nimport * as InkModel from '../../model/InkModel';\n\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo() {\n  return {\n    type: 'svg'\n  };\n}\n\n/**\n * Populate the dom element\n * @param {Element} element DOM element to attach the rendering elements\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach(element) {\n  const elementRef = element;\n  logger.debug('populate root element', elementRef);\n  elementRef.style.fontSize = '10px';\n  return d3.select(elementRef);\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach(element, context) {\n  logger.debug('detach renderer', element);\n  context.select('svg').remove();\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} minHeight Minimal height for resize\n * @param {Number} minWidth Minimal Width for resize\n * @return {Model}\n */\nexport function resize(context, model, stroker, minHeight, minWidth) {\n  const rect = context.node().getBoundingClientRect();\n  const svg = context.selectAll('svg');\n  const width = rect.width < minWidth ? minWidth : rect.width;\n  const height = rect.height < minHeight ? minHeight : rect.height;\n  svg.attr('viewBox', `0 0 ${width}, ${height}`);\n  svg.attr('width', `${width}px`);\n  svg.attr('height', `${height}px`);\n  logger.debug('svg viewBox changed', svg);\n  return model;\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke(context, model, stroker) {\n  const modelRef = model;\n  // Add a pending id for pending strokes rendering\n  modelRef.currentStroke.id = `pendingStroke-${model.rawStrokes.length}`;\n  // Render the current stroke\n  logger.trace('drawing current stroke ', model.currentStroke);\n  context.select(`#pendingStrokes #${modelRef.currentStroke.id}`).remove();\n  drawStroke(context.select('#pendingStrokes').append('path').attr('id', model.currentStroke.id), model.currentStroke, stroker);\n  return modelRef;\n}\n\nfunction insertAdjacentSVG(element, position, html) {\n  const container = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', '_');\n  container.innerHTML = html;\n\n  switch (position.toLowerCase()) {\n    case 'beforebegin':\n      element.parentNode.insertBefore(container.firstChild, element);\n      break;\n    case 'afterbegin':\n      element.insertBefore(container.lastChild, element.firstChild);\n      break;\n    case 'beforeend':\n      element.appendChild(container.firstChild);\n      break;\n    case 'afterend':\n      element.parentNode.insertBefore(container.lastChild, element.nextSibling);\n      break;\n    default:\n      logger.warn('Invalid insertAdjacentHTML position');\n      break;\n  }\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel(context, model, stroker) {\n  const drawSymbol = (symbol, symbolContext) => {\n    logger.trace(`attempting to draw ${symbol.type} symbol`);\n    if (symbol.type === 'stroke' && !symbolContext.select('id', symbol.id)) {\n      drawStroke(symbolContext.append('path').attr('id', symbol.id), symbol, stroker);\n    } else {\n      logger.warn(`impossible to draw ${symbol.type} symbol`);\n    }\n  };\n\n  const updateView = (patchUpdate) => {\n    // We only add in the stack patch with updates\n    patchUpdate.updates.forEach((update) => {\n      try {\n        const svgElementSelector = 'svg[data-layer=\"' + patchUpdate.layer + '\"]';\n        switch (update.type) {\n          case 'REPLACE_ALL': {\n            context.select(svgElementSelector).remove();\n            const parent = context.node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n            }\n            if (patchUpdate.layer === 'MODEL') {\n              context.select(svgElementSelector).append('g').attr('id', 'pendingStrokes');\n            }\n          }\n            break;\n          case 'REMOVE_ELEMENT': {\n            if (update.id.includes('s') || update.id.includes('MODEL')) {\n              context.select(`#${update.id}`).remove();\n            } else {\n              context.select(`#${update.id}`).attr('class', 'removed-stroke');\n              setTimeout(() => {\n                context.select(`#${update.id}`).remove();\n              }, 100);\n            }\n            break;\n          }\n          case 'REPLACE_ELEMENT': {\n            const parent = context.select(`#${update.id}`).node().parentNode;\n            context.select(`#${update.id}`).remove();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'REMOVE_CHILD':\n            context.select(`#${update.parentId} > *:nth-child(${update.index + 1})`).remove();\n            break;\n          case 'APPEND_CHILD': {\n            const parent = context.select(update.parentId ? `#${update.parentId}` : svgElementSelector).node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'INSERT_BEFORE': {\n            const parent = context.select(`#${update.refId}`).node();\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeBegin', update.svg);\n            } else {\n              insertAdjacentSVG(parent, 'beforeBegin', update.svg);\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML);\n            }\n          }\n            break;\n          case 'REMOVE_ATTRIBUTE':\n            context.selectAll(update.id ? `#${update.id}` : 'svg').attr(update.name, null);\n            break;\n          case 'SET_ATTRIBUTE': {\n            // We ignore setAttributes on the svg element because we handle the resize elsewhere to prevent a blink effect\n            // that occurs if we are waiting for the server to resize.\n            if (update.id) {\n              context.selectAll(`#${update.id}`).attr(update.name, update.value);\n            }\n            break;\n          }\n          default:\n            logger.debug(`unknown update ${update.type} action`);\n            break;\n        }\n      } catch (e) {\n        logger.error(`Invalid update ${update.type}`, update);\n        logger.error('Error on svg patch', e);\n      }\n    });\n  };\n\n  const pendingRecognizedSymbols = InkModel.extractPendingRecognizedSymbols(model);\n  if (pendingRecognizedSymbols) {\n    pendingRecognizedSymbols.forEach(patch => updateView(patch));\n    InkModel.updateModelRenderedPosition(model);\n  }\n\n  const pendingStrokes = InkModel.extractPendingStrokes(model);\n  if (pendingStrokes) {\n    pendingStrokes.forEach(stroke => drawSymbol(stroke, context.select('#pendingStrokes')));\n  }\n  return model;\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent';\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils';\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo() {\n  return {\n    type: 'svg',\n    name: 'quadratic'\n  };\n}\n\nfunction renderArc(context, center, radius) {\n  const svgPath = [\n    `M ${center.x},${center.y}`,\n    `m ${-radius},0`,\n    `a ${radius},${radius} 0 1 0 ${radius * 2},0`,\n    `a ${radius},${radius} 0 1 0 ${-(radius * 2)},0`\n  ].join(' ');\n  return svgPath;\n}\n\nfunction renderLine(context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width);\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `L ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `L ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ');\n  return svgPath;\n}\n\nfunction renderFinal(context, begin, end, width) {\n  const ARCSPLIT = 6;\n  const angle = computeAxeAngle(begin, end);\n  const linkPoints = computeLinksPoints(end, angle, width);\n\n  const parts = [`M ${linkPoints[0].x},${linkPoints[0].y}`];\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - (i * (Math.PI / ARCSPLIT));\n    parts.push(`L ${end.x - (end.p * width * Math.sin(newAngle))},${end.y + (end.p * width * Math.cos(newAngle))}`);\n  }\n  const svgPath = parts.join(' ');\n  return svgPath;\n}\n\nfunction renderQuadratic(context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width);\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width);\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width);\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `Q ${linkPoints3[0].x},${linkPoints3[0].y} ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `Q ${linkPoints3[1].x},${linkPoints3[1].y} ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ');\n  return svgPath;\n}\n\n/**\n * Draw a stroke on a svg tag, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke(context, stroke) {\n  const length = stroke.x.length;\n  const width = stroke.width;\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0);\n  const nbquadratics = length - 2;\n\n  const parts = [];\n  if (length < 3) {\n    parts.push(renderArc(context, firstPoint, width * 0.6));\n  } else {\n    parts.push(renderArc(context, firstPoint, width * firstPoint.p));\n    parts.push(renderLine(context, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width));\n\n    for (let i = 0; i < nbquadratics; i++) {\n      parts.push(renderQuadratic(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width));\n    }\n    parts.push(renderLine(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width));\n    parts.push(renderFinal(context, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width));\n  }\n  const svgPath = parts.join(' ');\n\n  context\n    .attr('color', stroke.color)\n    .style('fill', stroke.color)\n    .style('stroke', 'transparent')\n    .classed('pending-stroke', true)\n    .attr('d', `${svgPath}Z`);\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Hex;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var X32WordArray = C_lib.WordArray;\n\n\t    /**\n\t     * x64 namespace.\n\t     */\n\t    var C_x64 = C.x64 = {};\n\n\t    /**\n\t     * A 64-bit word.\n\t     */\n\t    var X64Word = C_x64.Word = Base.extend({\n\t        /**\n\t         * Initializes a newly created 64-bit word.\n\t         *\n\t         * @param {number} high The high 32 bits.\n\t         * @param {number} low The low 32 bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\n\t         */\n\t        init: function (high, low) {\n\t            this.high = high;\n\t            this.low = low;\n\t        }\n\n\t        /**\n\t         * Bitwise NOTs this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after negating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var negated = x64Word.not();\n\t         */\n\t        // not: function () {\n\t            // var high = ~this.high;\n\t            // var low = ~this.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ANDs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to AND with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ANDing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var anded = x64Word.and(anotherX64Word);\n\t         */\n\t        // and: function (word) {\n\t            // var high = this.high & word.high;\n\t            // var low = this.low & word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to OR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var ored = x64Word.or(anotherX64Word);\n\t         */\n\t        // or: function (word) {\n\t            // var high = this.high | word.high;\n\t            // var low = this.low | word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise XORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after XORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var xored = x64Word.xor(anotherX64Word);\n\t         */\n\t        // xor: function (word) {\n\t            // var high = this.high ^ word.high;\n\t            // var low = this.low ^ word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftL(25);\n\t         */\n\t        // shiftL: function (n) {\n\t            // if (n < 32) {\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\n\t                // var low = this.low << n;\n\t            // } else {\n\t                // var high = this.low << (n - 32);\n\t                // var low = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftR(7);\n\t         */\n\t        // shiftR: function (n) {\n\t            // if (n < 32) {\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\n\t                // var high = this.high >>> n;\n\t            // } else {\n\t                // var low = this.high >>> (n - 32);\n\t                // var high = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotL(25);\n\t         */\n\t        // rotL: function (n) {\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotR(7);\n\t         */\n\t        // rotR: function (n) {\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\n\t        // },\n\n\t        /**\n\t         * Adds this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to add with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after adding.\n\t         *\n\t         * @example\n\t         *\n\t         *     var added = x64Word.add(anotherX64Word);\n\t         */\n\t        // add: function (word) {\n\t            // var low = (this.low + word.low) | 0;\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\n\t            // var high = (this.high + word.high + carry) | 0;\n\n\t            // return X64Word.create(high, low);\n\t        // }\n\t    });\n\n\t    /**\n\t     * An array of 64-bit words.\n\t     *\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ]);\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ], 10);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 8;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this 64-bit word array to a 32-bit word array.\n\t         *\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x32WordArray = x64WordArray.toX32();\n\t         */\n\t        toX32: function () {\n\t            // Shortcuts\n\t            var x64Words = this.words;\n\t            var x64WordsLength = x64Words.length;\n\n\t            // Convert\n\t            var x32Words = [];\n\t            for (var i = 0; i < x64WordsLength; i++) {\n\t                var x64Word = x64Words[i];\n\t                x32Words.push(x64Word.high);\n\t                x32Words.push(x64Word.low);\n\t            }\n\n\t            return X32WordArray.create(x32Words, this.sigBytes);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {X64WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = x64WordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\n\t            // Clone \"words\" array\n\t            var words = clone.words = this.words.slice(0);\n\n\t            // Clone each X64Word object\n\t            var wordsLength = words.length;\n\t            for (var i = 0; i < wordsLength; i++) {\n\t                words[i] = words[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\t}());\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\n\t    function X64Word_create() {\n\t        return X64Word.create.apply(X64Word, arguments);\n\t    }\n\n\t    // Constants\n\t    var K = [\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\n\t    ];\n\n\t    // Reusable objects\n\t    var W = [];\n\t    (function () {\n\t        for (var i = 0; i < 80; i++) {\n\t            W[i] = X64Word_create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-512 hash algorithm.\n\t     */\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var H0 = H[0];\n\t            var H1 = H[1];\n\t            var H2 = H[2];\n\t            var H3 = H[3];\n\t            var H4 = H[4];\n\t            var H5 = H[5];\n\t            var H6 = H[6];\n\t            var H7 = H[7];\n\n\t            var H0h = H0.high;\n\t            var H0l = H0.low;\n\t            var H1h = H1.high;\n\t            var H1l = H1.low;\n\t            var H2h = H2.high;\n\t            var H2l = H2.low;\n\t            var H3h = H3.high;\n\t            var H3l = H3.low;\n\t            var H4h = H4.high;\n\t            var H4l = H4.low;\n\t            var H5h = H5.high;\n\t            var H5l = H5.low;\n\t            var H6h = H6.high;\n\t            var H6l = H6.low;\n\t            var H7h = H7.high;\n\t            var H7l = H7.low;\n\n\t            // Working variables\n\t            var ah = H0h;\n\t            var al = H0l;\n\t            var bh = H1h;\n\t            var bl = H1l;\n\t            var ch = H2h;\n\t            var cl = H2l;\n\t            var dh = H3h;\n\t            var dl = H3l;\n\t            var eh = H4h;\n\t            var el = H4l;\n\t            var fh = H5h;\n\t            var fl = H5l;\n\t            var gh = H6h;\n\t            var gl = H6l;\n\t            var hh = H7h;\n\t            var hl = H7l;\n\n\t            // Rounds\n\t            for (var i = 0; i < 80; i++) {\n\t                // Shortcut\n\t                var Wi = W[i];\n\n\t                // Extend message\n\t                if (i < 16) {\n\t                    var Wih = Wi.high = M[offset + i * 2]     | 0;\n\t                    var Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\n\t                } else {\n\t                    // Gamma0\n\t                    var gamma0x  = W[i - 15];\n\t                    var gamma0xh = gamma0x.high;\n\t                    var gamma0xl = gamma0x.low;\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\n\n\t                    // Gamma1\n\t                    var gamma1x  = W[i - 2];\n\t                    var gamma1xh = gamma1x.high;\n\t                    var gamma1xl = gamma1x.low;\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\n\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t                    var Wi7  = W[i - 7];\n\t                    var Wi7h = Wi7.high;\n\t                    var Wi7l = Wi7.low;\n\n\t                    var Wi16  = W[i - 16];\n\t                    var Wi16h = Wi16.high;\n\t                    var Wi16l = Wi16.low;\n\n\t                    var Wil = gamma0l + Wi7l;\n\t                    var Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + gamma1l;\n\t                    var Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + Wi16l;\n\t                    var Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\n\n\t                    Wi.high = Wih;\n\t                    Wi.low  = Wil;\n\t                }\n\n\t                var chh  = (eh & fh) ^ (~eh & gh);\n\t                var chl  = (el & fl) ^ (~el & gl);\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\n\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\n\t                var Ki  = K[i];\n\t                var Kih = Ki.high;\n\t                var Kil = Ki.low;\n\n\t                var t1l = hl + sigma1l;\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + chl;\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Kil;\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Wil;\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\n\n\t                // t2 = sigma0 + maj\n\t                var t2l = sigma0l + majl;\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n\t                // Update working variables\n\t                hh = gh;\n\t                hl = gl;\n\t                gh = fh;\n\t                gl = fl;\n\t                fh = eh;\n\t                fl = el;\n\t                el = (dl + t1l) | 0;\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n\t                dh = ch;\n\t                dl = cl;\n\t                ch = bh;\n\t                cl = bl;\n\t                bh = ah;\n\t                bl = al;\n\t                al = (t1l + t2l) | 0;\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H0l = H0.low  = (H0l + al);\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\n\t            H1l = H1.low  = (H1l + bl);\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\n\t            H2l = H2.low  = (H2l + cl);\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\n\t            H3l = H3.low  = (H3l + dl);\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\n\t            H4l = H4.low  = (H4l + el);\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\n\t            H5l = H5.low  = (H5l + fl);\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\n\t            H6l = H6.low  = (H6l + gl);\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\n\t            H7l = H7.low  = (H7l + hl);\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Convert hash to 32-bit word array before returning\n\t            var hash = this._hash.toX32();\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        },\n\n\t        blockSize: 1024/32\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA512('message');\n\t     *     var hash = CryptoJS.SHA512(wordArray);\n\t     */\n\t    C.SHA512 = Hasher._createHelper(SHA512);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\n\t     */\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\n\t}());\n\n\n\treturn CryptoJS.SHA512;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./sha512\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./sha512\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA512;\n\n}));","import Hex from 'crypto-js/enc-hex';\nimport HmacSHA512 from 'crypto-js/hmac-sha512';\nimport { recognizerLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Compute HMAC signature for server authentication\n *\n * @param {Object} input Input data to compute HMAC\n * @param {String} applicationKey Current applicationKey\n * @param {String} hmacKey Current hmacKey\n * @return {String} Signature\n */\nexport function computeHmac(input, applicationKey, hmacKey) {\n  const jsonInput = (typeof input === 'object') ? JSON.stringify(input) : input;\n  logger.debug('The HmacSHA512 function is loaded', HmacSHA512);\n  return new HmacSHA512(jsonInput, applicationKey + hmacKey).toString(Hex);\n}\n","/* eslint-disable no-unused-expressions */\nimport * as CryptoHelper from '../CryptoHelper';\n\n/**\n * Parse JSON String to Object\n * @param {Object} req JSON string result to be parsed\n * @return {Object} Parsed response\n */\nfunction parse(req) {\n  let result;\n  try {\n    result = JSON.parse(req.responseText);\n  } catch (e) {\n    result = req.responseText;\n  }\n  return result;\n}\n\n/**\n * Transform object data request to a list of parameters\n * @param {Object} obj Query properties\n * @return {String} URI encoded string\n */\nfunction transformRequest(obj) {\n  const str = [];\n  Object.keys(obj).forEach((p) => {\n    if ((typeof obj[p] !== 'undefined') &&\n        (typeof obj[p] !== 'function')) {\n      str.push(`${encodeURIComponent(p)}=${encodeURIComponent(obj[p])}`);\n    }\n  });\n  return str.join('&');\n}\n\n/**\n * Send request to the network and return a promise\n * @param {String} type Request type (GET/POST)\n * @param {String} url URL\n * @param {Object} data Data to be sent\n * @param {RecognizerContext} [recognizerContext] Recognizer context\n * @param {String} apiVersion api version\n * @param {String} mimeType MimeType to be used\n * @return {Promise}\n */\nfunction xhr(type, url, data, recognizerContext = {}, apiVersion, mimeType) {\n  const pptxMimeType = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';\n  const configuration = recognizerContext.editor.configuration;\n  const recognizerContextRef = recognizerContext;\n  return new Promise((resolve, reject) => {\n    // We are writing some browser module here so the no import found should be ignored\n    // eslint-disable-next-line no-undef\n    const request = new XMLHttpRequest();\n    request.open(type, url, true);\n    request.withCredentials = true;\n\n    switch (configuration.recognitionParams.type) {\n      case 'TEXT':\n        request.setRequestHeader('Accept', 'application/json,' + mimeType);\n        break;\n      case 'MATH':\n        request.setRequestHeader('Accept', 'application/json,' + mimeType);\n        break;\n      case 'DIAGRAM':\n        request.setRequestHeader('Accept', 'application/json,' + mimeType);\n        break;\n      case 'Raw Content':\n        request.setRequestHeader('Accept', 'application/json,' + mimeType);\n        break;\n      default:\n        break;\n    }\n    request.setRequestHeader('applicationKey', configuration.recognitionParams.server.applicationKey);\n    request.setRequestHeader('hmac', CryptoHelper.computeHmac(JSON.stringify(data), configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey));\n    request.setRequestHeader('Content-Type', 'application/json');\n\n    const isBlobType = mimeType && (mimeType === pptxMimeType || mimeType.startsWith('image/png') || mimeType.startsWith('image/jpeg'));\n    if (isBlobType) {\n      request.responseType = 'blob';\n    }\n\n    request.onerror = () => {\n      reject({ msg: `Could not connect to ${url} connection error`, recoverable: false });\n    };\n\n    request.onload = () => {\n      if (request.status >= 200 && request.status < 300) {\n        isBlobType ? resolve(request.response) : resolve(parse(request));\n      } else {\n        reject(new Error(request.responseText));\n      }\n    };\n\n    request.onreadystatechange = () => {\n      if (request.readyState === 4) {\n        if (request.status >= 200 && request.status < 300) {\n          isBlobType ? resolve(request.response) : resolve(parse(request));\n        }\n      }\n    };\n\n    if (recognizerContextRef) {\n      recognizerContextRef.idle = false;\n    }\n\n    request.send(JSON.stringify(data));\n  }).then((res) => {\n    if (recognizerContextRef) {\n      recognizerContextRef.idle = true;\n    }\n    return res;\n  });\n}\n\n/**\n * Get request\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @param {String} url URL\n * @param {Object} params Query properties\n * @return {Promise}\n */\nexport function get(recognizerContext, url, params) {\n  let queryUrl = url;\n  if (params) {\n    queryUrl += `?${transformRequest(params)}`;\n  }\n  return xhr('GET', queryUrl, undefined, recognizerContext);\n}\n\n/**\n * Post request\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @param {String} url URL\n * @param {Object} data Data to be sent\n * @param {String} apiVersion api version\n * @param {String} mimeType MimeType to be used\n * @return {Promise}\n */\nexport function post(recognizerContext, url, data, apiVersion, mimeType) {\n  return xhr('POST', url, data, recognizerContext, apiVersion, mimeType);\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Recognition context\n * @typedef {Object} RecognitionContext\n * @property {Model} model\n * @property {Callback} callback\n */\n\n/**\n * Recognizer context\n * @typedef {Object} RecognizerContext\n * @property {Editor} editor Get a reference to the current editor\n * @property {Array<RecognitionContext>} recognitionContexts=[]\n * @property {Promise} initPromise=undefined\n * @property {RecognitionPositions} lastPositions  Last recognition sent/received stroke indexes.\n * @property {String} url=undefined\n * @property {WebSocket} websocket=undefined\n * @property {function} websocketCallback=undefined\n * @property {function} reconnect=undefined\n * @property {Number} currentReconnectionCount=0\n * @property {String} sessionId=undefined\n * @property {Number} contentPartCount=0\n * @property {String} currentPartId=undefined\n * @property {String} instanceId=undefined\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n * @property {Boolean} isEmpty=false\n * @property {Array} supportedImportMimeTypes=[]\n * @property {Number} undoStackIndex=0\n * @property {Number} possibleUndoCount=0\n * @property {Boolean} idle=true\n * @property {Boolean} initialized=false\n */\n/**\n * Create a new recognizer context\n * @param {Editor} editor\n * @return {RecognizerContext} An object that contains all recognizer context\n */\nexport function createEmptyRecognizerContext(editor) {\n  const id = Date.now();\n  logger.info('Create empty recognizer context with ID: ' + id);\n  return {\n    id,\n    editor,\n    // websocket\n    recognitionContexts: [],\n    initPromise: undefined,\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1\n    },\n    url: undefined,\n    websocket: undefined,\n    websocketCallback: undefined,\n    reconnect: undefined,\n    currentReconnectionCount: 0,\n    sessionId: undefined,\n    contentPartCount: 0,\n    currentPartId: undefined,\n    instanceId: undefined,\n    canUndo: false,\n    canRedo: false,\n    isEmpty: undefined,\n    supportedImportMimeTypes: [],\n    undoStackIndex: 0,\n    possibleUndoCount: 0,\n    idle: true,\n    initialized: false\n  };\n}\n\n/**\n * Return true if a reset is required, false otherwise\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Boolean}\n */\nexport function isResetRequired(recognizerContext, model) {\n  if (recognizerContext.lastPositions) {\n    return recognizerContext.lastPositions.lastSentPosition >= model.rawStrokes.length - 1;\n  }\n  return false;\n}\n\n/**\n * Update the recognition context positions\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionPositions} positions Current recognition positions\n * @return {RecognizerContext}\n */\nexport function updateRecognitionPositions(recognizerContext, positions) {\n  const recognizerContextRef = recognizerContext;\n  if (positions) {\n    recognizerContextRef.lastPositions.lastSentPosition = positions.lastSentPosition;\n    recognizerContextRef.lastPositions.lastReceivedPosition = positions.lastReceivedPosition;\n  }\n  if (recognizerContextRef.lastPositions.lastSentPosition === recognizerContextRef.lastPositions.lastReceivedPosition === -1) {\n    delete recognizerContextRef.instanceId;\n  }\n  return recognizerContextRef;\n}\n\n/**\n * Set the recognition context\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionContext} recognitionContext\n * @return {RecognizerContext}\n */\nexport function setRecognitionContext(recognizerContext, recognitionContext) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.recognitionContexts[0] = recognitionContext;\n  return recognizerContextRef;\n}\n\n\n/**\n * Test if it is possible to reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if possible, false otherwise\n */\nexport function canReconnect(recognizerContext) {\n  return recognizerContext.websocket.autoReconnect === true && recognizerContext.currentReconnectionCount <= recognizerContext.websocket.maxRetryCount;\n}\n\n/**\n * Test if it should attempt immediate reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if should attempt reconnect, false otherwise\n */\nexport function shouldAttemptImmediateReconnect(recognizerContext) {\n  const recognizerContextRef = recognizerContext;\n  return recognizerContextRef.websocket.autoReconnect === true && recognizerContextRef.currentReconnectionCount++ <= recognizerContextRef.websocket.maxRetryCount;\n}\n\n/**\n * Lost connection message\n * @type {{type: string}}\n */\nexport const LOST_CONNEXION_MESSAGE = { type: 'LOST_CONNECTION' };\n\n/**\n * Explicit close message\n * @type {String}\n */\nexport const CLOSE_RECOGNIZER_MESSAGE = 'CLOSE_RECOGNIZER';\n\n","/*!\n * perfect-scrollbar v1.4.0\n * (c) 2018 Hyunje Jun\n * @license MIT\n */\nfunction get(element) {\n  return getComputedStyle(element);\n}\n\nfunction set(element, obj) {\n  for (var key in obj) {\n    var val = obj[key];\n    if (typeof val === 'number') {\n      val = val + \"px\";\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n\nfunction div(className) {\n  var div = document.createElement('div');\n  div.className = className;\n  return div;\n}\n\nvar elMatches =\n  typeof Element !== 'undefined' &&\n  (Element.prototype.matches ||\n    Element.prototype.webkitMatchesSelector ||\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector);\n\nfunction matches(element, query) {\n  if (!elMatches) {\n    throw new Error('No element matching method supported');\n  }\n\n  return elMatches.call(element, query);\n}\n\nfunction remove(element) {\n  if (element.remove) {\n    element.remove();\n  } else {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n}\n\nfunction queryChildren(element, selector) {\n  return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\n  );\n}\n\nvar cls = {\n  main: 'ps',\n  element: {\n    thumb: function (x) { return (\"ps__thumb-\" + x); },\n    rail: function (x) { return (\"ps__rail-\" + x); },\n    consuming: 'ps__child--consume',\n  },\n  state: {\n    focus: 'ps--focus',\n    clicking: 'ps--clicking',\n    active: function (x) { return (\"ps--active-\" + x); },\n    scrolling: function (x) { return (\"ps--scrolling-\" + x); },\n  },\n};\n\n/*\n * Helper methods\n */\nvar scrollingClassTimeout = { x: null, y: null };\n\nfunction addScrollingClass(i, x) {\n  var classList = i.element.classList;\n  var className = cls.state.scrolling(x);\n\n  if (classList.contains(className)) {\n    clearTimeout(scrollingClassTimeout[x]);\n  } else {\n    classList.add(className);\n  }\n}\n\nfunction removeScrollingClass(i, x) {\n  scrollingClassTimeout[x] = setTimeout(\n    function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\n    i.settings.scrollingThreshold\n  );\n}\n\nfunction setScrollingClassInstantly(i, x) {\n  addScrollingClass(i, x);\n  removeScrollingClass(i, x);\n}\n\nvar EventElement = function EventElement(element) {\n  this.element = element;\n  this.handlers = {};\n};\n\nvar prototypeAccessors = { isEmpty: { configurable: true } };\n\nEventElement.prototype.bind = function bind (eventName, handler) {\n  if (typeof this.handlers[eventName] === 'undefined') {\n    this.handlers[eventName] = [];\n  }\n  this.handlers[eventName].push(handler);\n  this.element.addEventListener(eventName, handler, false);\n};\n\nEventElement.prototype.unbind = function unbind (eventName, target) {\n    var this$1 = this;\n\n  this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\n    if (target && handler !== target) {\n      return true;\n    }\n    this$1.element.removeEventListener(eventName, handler, false);\n    return false;\n  });\n};\n\nEventElement.prototype.unbindAll = function unbindAll () {\n    var this$1 = this;\n\n  for (var name in this$1.handlers) {\n    this$1.unbind(name);\n  }\n};\n\nprototypeAccessors.isEmpty.get = function () {\n    var this$1 = this;\n\n  return Object.keys(this.handlers).every(\n    function (key) { return this$1.handlers[key].length === 0; }\n  );\n};\n\nObject.defineProperties( EventElement.prototype, prototypeAccessors );\n\nvar EventManager = function EventManager() {\n  this.eventElements = [];\n};\n\nEventManager.prototype.eventElement = function eventElement (element) {\n  var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\n  if (!ee) {\n    ee = new EventElement(element);\n    this.eventElements.push(ee);\n  }\n  return ee;\n};\n\nEventManager.prototype.bind = function bind (element, eventName, handler) {\n  this.eventElement(element).bind(eventName, handler);\n};\n\nEventManager.prototype.unbind = function unbind (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  ee.unbind(eventName, handler);\n\n  if (ee.isEmpty) {\n    // remove\n    this.eventElements.splice(this.eventElements.indexOf(ee), 1);\n  }\n};\n\nEventManager.prototype.unbindAll = function unbindAll () {\n  this.eventElements.forEach(function (e) { return e.unbindAll(); });\n  this.eventElements = [];\n};\n\nEventManager.prototype.once = function once (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  var onceHandler = function (evt) {\n    ee.unbind(eventName, onceHandler);\n    handler(evt);\n  };\n  ee.bind(eventName, onceHandler);\n};\n\nfunction createEvent(name) {\n  if (typeof window.CustomEvent === 'function') {\n    return new CustomEvent(name);\n  } else {\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(name, false, false, undefined);\n    return evt;\n  }\n}\n\nvar processScrollDiff = function(\n  i,\n  axis,\n  diff,\n  useScrollingClass,\n  forceFireReachEvent\n) {\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\n\n  var fields;\n  if (axis === 'top') {\n    fields = [\n      'contentHeight',\n      'containerHeight',\n      'scrollTop',\n      'y',\n      'up',\n      'down' ];\n  } else if (axis === 'left') {\n    fields = [\n      'contentWidth',\n      'containerWidth',\n      'scrollLeft',\n      'x',\n      'left',\n      'right' ];\n  } else {\n    throw new Error('A proper axis should be provided');\n  }\n\n  processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\n};\n\nfunction processScrollDiff$1(\n  i,\n  diff,\n  ref,\n  useScrollingClass,\n  forceFireReachEvent\n) {\n  var contentHeight = ref[0];\n  var containerHeight = ref[1];\n  var scrollTop = ref[2];\n  var y = ref[3];\n  var up = ref[4];\n  var down = ref[5];\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\n\n  var element = i.element;\n\n  // reset reach\n  i.reach[y] = null;\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] < 1) {\n    i.reach[y] = 'start';\n  }\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\n    i.reach[y] = 'end';\n  }\n\n  if (diff) {\n    element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\n\n    if (diff < 0) {\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\n    } else if (diff > 0) {\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\n    }\n\n    if (useScrollingClass) {\n      setScrollingClassInstantly(i, y);\n    }\n  }\n\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\n    element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\n  }\n}\n\nfunction toInt(x) {\n  return parseInt(x, 10) || 0;\n}\n\nfunction isEditable(el) {\n  return (\n    matches(el, 'input,[contenteditable]') ||\n    matches(el, 'select,[contenteditable]') ||\n    matches(el, 'textarea,[contenteditable]') ||\n    matches(el, 'button,[contenteditable]')\n  );\n}\n\nfunction outerWidth(element) {\n  var styles = get(element);\n  return (\n    toInt(styles.width) +\n    toInt(styles.paddingLeft) +\n    toInt(styles.paddingRight) +\n    toInt(styles.borderLeftWidth) +\n    toInt(styles.borderRightWidth)\n  );\n}\n\nvar env = {\n  isWebKit:\n    typeof document !== 'undefined' &&\n    'WebkitAppearance' in document.documentElement.style,\n  supportsTouch:\n    typeof window !== 'undefined' &&\n    ('ontouchstart' in window ||\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\n  supportsIePointer:\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\n  isChrome:\n    typeof navigator !== 'undefined' &&\n    /Chrome/i.test(navigator && navigator.userAgent),\n};\n\nvar updateGeometry = function(i) {\n  var element = i.element;\n  var roundedScrollTop = Math.floor(element.scrollTop);\n\n  i.containerWidth = element.clientWidth;\n  i.containerHeight = element.clientHeight;\n  i.contentWidth = element.scrollWidth;\n  i.contentHeight = element.scrollHeight;\n\n  if (!element.contains(i.scrollbarXRail)) {\n    // clean up and append\n    queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\n    );\n    element.appendChild(i.scrollbarXRail);\n  }\n  if (!element.contains(i.scrollbarYRail)) {\n    // clean up and append\n    queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\n    );\n    element.appendChild(i.scrollbarYRail);\n  }\n\n  if (\n    !i.settings.suppressScrollX &&\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\n  ) {\n    i.scrollbarXActive = true;\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\n    i.railXRatio = i.containerWidth / i.railXWidth;\n    i.scrollbarXWidth = getThumbSize(\n      i,\n      toInt(i.railXWidth * i.containerWidth / i.contentWidth)\n    );\n    i.scrollbarXLeft = toInt(\n      (i.negativeScrollAdjustment + element.scrollLeft) *\n        (i.railXWidth - i.scrollbarXWidth) /\n        (i.contentWidth - i.containerWidth)\n    );\n  } else {\n    i.scrollbarXActive = false;\n  }\n\n  if (\n    !i.settings.suppressScrollY &&\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\n  ) {\n    i.scrollbarYActive = true;\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\n    i.railYRatio = i.containerHeight / i.railYHeight;\n    i.scrollbarYHeight = getThumbSize(\n      i,\n      toInt(i.railYHeight * i.containerHeight / i.contentHeight)\n    );\n    i.scrollbarYTop = toInt(\n      roundedScrollTop *\n        (i.railYHeight - i.scrollbarYHeight) /\n        (i.contentHeight - i.containerHeight)\n    );\n  } else {\n    i.scrollbarYActive = false;\n  }\n\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n  }\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n  }\n\n  updateCss(element, i);\n\n  if (i.scrollbarXActive) {\n    element.classList.add(cls.state.active('x'));\n  } else {\n    element.classList.remove(cls.state.active('x'));\n    i.scrollbarXWidth = 0;\n    i.scrollbarXLeft = 0;\n    element.scrollLeft = 0;\n  }\n  if (i.scrollbarYActive) {\n    element.classList.add(cls.state.active('y'));\n  } else {\n    element.classList.remove(cls.state.active('y'));\n    i.scrollbarYHeight = 0;\n    i.scrollbarYTop = 0;\n    element.scrollTop = 0;\n  }\n};\n\nfunction getThumbSize(i, thumbSize) {\n  if (i.settings.minScrollbarLength) {\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n  }\n  if (i.settings.maxScrollbarLength) {\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n  }\n  return thumbSize;\n}\n\nfunction updateCss(element, i) {\n  var xRailOffset = { width: i.railXWidth };\n  var roundedScrollTop = Math.floor(element.scrollTop);\n\n  if (i.isRtl) {\n    xRailOffset.left =\n      i.negativeScrollAdjustment +\n      element.scrollLeft +\n      i.containerWidth -\n      i.contentWidth;\n  } else {\n    xRailOffset.left = element.scrollLeft;\n  }\n  if (i.isScrollbarXUsingBottom) {\n    xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\n  } else {\n    xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\n  }\n  set(i.scrollbarXRail, xRailOffset);\n\n  var yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\n  if (i.isScrollbarYUsingRight) {\n    if (i.isRtl) {\n      yRailOffset.right =\n        i.contentWidth -\n        (i.negativeScrollAdjustment + element.scrollLeft) -\n        i.scrollbarYRight -\n        i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n    }\n  } else {\n    if (i.isRtl) {\n      yRailOffset.left =\n        i.negativeScrollAdjustment +\n        element.scrollLeft +\n        i.containerWidth * 2 -\n        i.contentWidth -\n        i.scrollbarYLeft -\n        i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n    }\n  }\n  set(i.scrollbarYRail, yRailOffset);\n\n  set(i.scrollbarX, {\n    left: i.scrollbarXLeft,\n    width: i.scrollbarXWidth - i.railBorderXWidth,\n  });\n  set(i.scrollbarY, {\n    top: i.scrollbarYTop,\n    height: i.scrollbarYHeight - i.railBorderYWidth,\n  });\n}\n\nvar clickRail = function(i) {\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\n  i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\n    var positionTop =\n      e.pageY -\n      window.pageYOffset -\n      i.scrollbarYRail.getBoundingClientRect().top;\n    var direction = positionTop > i.scrollbarYTop ? 1 : -1;\n\n    i.element.scrollTop += direction * i.containerHeight;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\n  i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\n    var positionLeft =\n      e.pageX -\n      window.pageXOffset -\n      i.scrollbarXRail.getBoundingClientRect().left;\n    var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\n\n    i.element.scrollLeft += direction * i.containerWidth;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n};\n\nvar dragThumb = function(i) {\n  bindMouseScrollHandler(i, [\n    'containerWidth',\n    'contentWidth',\n    'pageX',\n    'railXWidth',\n    'scrollbarX',\n    'scrollbarXWidth',\n    'scrollLeft',\n    'x',\n    'scrollbarXRail' ]);\n  bindMouseScrollHandler(i, [\n    'containerHeight',\n    'contentHeight',\n    'pageY',\n    'railYHeight',\n    'scrollbarY',\n    'scrollbarYHeight',\n    'scrollTop',\n    'y',\n    'scrollbarYRail' ]);\n};\n\nfunction bindMouseScrollHandler(\n  i,\n  ref\n) {\n  var containerHeight = ref[0];\n  var contentHeight = ref[1];\n  var pageY = ref[2];\n  var railYHeight = ref[3];\n  var scrollbarY = ref[4];\n  var scrollbarYHeight = ref[5];\n  var scrollTop = ref[6];\n  var y = ref[7];\n  var scrollbarYRail = ref[8];\n\n  var element = i.element;\n\n  var startingScrollTop = null;\n  var startingMousePageY = null;\n  var scrollBy = null;\n\n  function mouseMoveHandler(e) {\n    element[scrollTop] =\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\n    addScrollingClass(i, y);\n    updateGeometry(i);\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function mouseUpHandler() {\n    removeScrollingClass(i, y);\n    i[scrollbarYRail].classList.remove(cls.state.clicking);\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  }\n\n  i.event.bind(i[scrollbarY], 'mousedown', function (e) {\n    startingScrollTop = element[scrollTop];\n    startingMousePageY = e[pageY];\n    scrollBy =\n      (i[contentHeight] - i[containerHeight]) /\n      (i[railYHeight] - i[scrollbarYHeight]);\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    i[scrollbarYRail].classList.add(cls.state.clicking);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nvar keyboard = function(i) {\n  var element = i.element;\n\n  var elementHovered = function () { return matches(element, ':hover'); };\n  var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = Math.floor(element.scrollTop);\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if (\n        (scrollTop === 0 && deltaY > 0) ||\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if (\n        (scrollLeft === 0 && deltaX < 0) ||\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\n    if (\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\n      e.defaultPrevented\n    ) {\n      return;\n    }\n\n    if (!elementHovered() && !scrollbarFocused()) {\n      return;\n    }\n\n    var activeElement = document.activeElement\n      ? document.activeElement\n      : i.ownerDocument.activeElement;\n    if (activeElement) {\n      if (activeElement.tagName === 'IFRAME') {\n        activeElement = activeElement.contentDocument.activeElement;\n      } else {\n        // go deeper if element is a webcomponent\n        while (activeElement.shadowRoot) {\n          activeElement = activeElement.shadowRoot.activeElement;\n        }\n      }\n      if (isEditable(activeElement)) {\n        return;\n      }\n    }\n\n    var deltaX = 0;\n    var deltaY = 0;\n\n    switch (e.which) {\n      case 37: // left\n        if (e.metaKey) {\n          deltaX = -i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = -i.containerWidth;\n        } else {\n          deltaX = -30;\n        }\n        break;\n      case 38: // up\n        if (e.metaKey) {\n          deltaY = i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = 30;\n        }\n        break;\n      case 39: // right\n        if (e.metaKey) {\n          deltaX = i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = i.containerWidth;\n        } else {\n          deltaX = 30;\n        }\n        break;\n      case 40: // down\n        if (e.metaKey) {\n          deltaY = -i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = -i.containerHeight;\n        } else {\n          deltaY = -30;\n        }\n        break;\n      case 32: // space bar\n        if (e.shiftKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = -i.containerHeight;\n        }\n        break;\n      case 33: // page up\n        deltaY = i.containerHeight;\n        break;\n      case 34: // page down\n        deltaY = -i.containerHeight;\n        break;\n      case 36: // home\n        deltaY = i.contentHeight;\n        break;\n      case 35: // end\n        deltaY = -i.contentHeight;\n        break;\n      default:\n        return;\n    }\n\n    if (i.settings.suppressScrollX && deltaX !== 0) {\n      return;\n    }\n    if (i.settings.suppressScrollY && deltaY !== 0) {\n      return;\n    }\n\n    element.scrollTop -= deltaY;\n    element.scrollLeft += deltaX;\n    updateGeometry(i);\n\n    if (shouldPreventDefault(deltaX, deltaY)) {\n      e.preventDefault();\n    }\n  });\n};\n\nvar wheel = function(i) {\n  var element = i.element;\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var roundedScrollTop = Math.floor(element.scrollTop);\n    var isTop = element.scrollTop === 0;\n    var isBottom =\n      roundedScrollTop + element.offsetHeight === element.scrollHeight;\n    var isLeft = element.scrollLeft === 0;\n    var isRight =\n      element.scrollLeft + element.offsetWidth === element.scrollWidth;\n\n    var hitsBound;\n\n    // pick axis with primary direction\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\n      hitsBound = isTop || isBottom;\n    } else {\n      hitsBound = isLeft || isRight;\n    }\n\n    return hitsBound ? !i.settings.wheelPropagation : true;\n  }\n\n  function getDeltaFromEvent(e) {\n    var deltaX = e.deltaX;\n    var deltaY = -1 * e.deltaY;\n\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\n      // OS X Safari\n      deltaX = -1 * e.wheelDeltaX / 6;\n      deltaY = e.wheelDeltaY / 6;\n    }\n\n    if (e.deltaMode && e.deltaMode === 1) {\n      // Firefox in deltaMode 1: Line scrolling\n      deltaX *= 10;\n      deltaY *= 10;\n    }\n\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\n      // IE in some mouse drivers\n      deltaX = 0;\n      deltaY = e.wheelDelta;\n    }\n\n    if (e.shiftKey) {\n      // reverse axis with shift key\n      return [-deltaY, -deltaX];\n    }\n    return [deltaX, deltaY];\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\n    if (!env.isWebKit && element.querySelector('select:focus')) {\n      return true;\n    }\n\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    var cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      var style = get(cursor);\n      var overflow = [style.overflow, style.overflowX, style.overflowY].join(\n        ''\n      );\n\n      // if scrollable\n      if (overflow.match(/(scroll|auto)/)) {\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            !(cursor.scrollTop === 0 && deltaY > 0) &&\n            !(cursor.scrollTop === maxScrollTop && deltaY < 0)\n          ) {\n            return true;\n          }\n        }\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            !(cursor.scrollLeft === 0 && deltaX < 0) &&\n            !(cursor.scrollLeft === maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function mousewheelHandler(e) {\n    var ref = getDeltaFromEvent(e);\n    var deltaX = ref[0];\n    var deltaY = ref[1];\n\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\n      return;\n    }\n\n    var shouldPrevent = false;\n    if (!i.settings.useBothWheelAxes) {\n      // deltaX will only be used for horizontal scrolling and deltaY will\n      // only be used for vertical scrolling - this is the default\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n      // only vertical scrollbar is active and useBothWheelAxes option is\n      // active, so let's scroll vertical bar using both mouse wheel axes\n      if (deltaY) {\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      } else {\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n      // useBothWheelAxes and only horizontal bar is active, so use both\n      // wheel axes for horizontal bar\n      if (deltaX) {\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\n      } else {\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    }\n\n    updateGeometry(i);\n\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\n    if (shouldPrevent && !e.ctrlKey) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  if (typeof window.onwheel !== 'undefined') {\n    i.event.bind(element, 'wheel', mousewheelHandler);\n  } else if (typeof window.onmousewheel !== 'undefined') {\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\n  }\n};\n\nvar touch = function(i) {\n  if (!env.supportsTouch && !env.supportsIePointer) {\n    return;\n  }\n\n  var element = i.element;\n\n  function shouldPrevent(deltaX, deltaY) {\n    var scrollTop = Math.floor(element.scrollTop);\n    var scrollLeft = element.scrollLeft;\n    var magnitudeX = Math.abs(deltaX);\n    var magnitudeY = Math.abs(deltaY);\n\n    if (magnitudeY > magnitudeX) {\n      // user is perhaps trying to swipe up/down the page\n\n      if (\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\n        (deltaY > 0 && scrollTop === 0)\n      ) {\n        // set prevent for mobile Chrome refresh\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\n      }\n    } else if (magnitudeX > magnitudeY) {\n      // user is perhaps trying to swipe left/right across the page\n\n      if (\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\n        (deltaX > 0 && scrollLeft === 0)\n      ) {\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function applyTouchMove(differenceX, differenceY) {\n    element.scrollTop -= differenceY;\n    element.scrollLeft -= differenceX;\n\n    updateGeometry(i);\n  }\n\n  var startOffset = {};\n  var startTime = 0;\n  var speed = {};\n  var easingLoop = null;\n\n  function getTouch(e) {\n    if (e.targetTouches) {\n      return e.targetTouches[0];\n    } else {\n      // Maybe IE pointer\n      return e;\n    }\n  }\n\n  function shouldHandle(e) {\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\n      return false;\n    }\n    if (e.targetTouches && e.targetTouches.length === 1) {\n      return true;\n    }\n    if (\n      e.pointerType &&\n      e.pointerType !== 'mouse' &&\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  function touchStart(e) {\n    if (!shouldHandle(e)) {\n      return;\n    }\n\n    var touch = getTouch(e);\n\n    startOffset.pageX = touch.pageX;\n    startOffset.pageY = touch.pageY;\n\n    startTime = new Date().getTime();\n\n    if (easingLoop !== null) {\n      clearInterval(easingLoop);\n    }\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    var cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      var style = get(cursor);\n      var overflow = [style.overflow, style.overflowX, style.overflowY].join(\n        ''\n      );\n\n      // if scrollable\n      if (overflow.match(/(scroll|auto)/)) {\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            !(cursor.scrollTop === 0 && deltaY > 0) &&\n            !(cursor.scrollTop === maxScrollTop && deltaY < 0)\n          ) {\n            return true;\n          }\n        }\n        var maxScrollLeft = cursor.scrollLeft - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            !(cursor.scrollLeft === 0 && deltaX < 0) &&\n            !(cursor.scrollLeft === maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function touchMove(e) {\n    if (shouldHandle(e)) {\n      var touch = getTouch(e);\n\n      var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\n\n      var differenceX = currentOffset.pageX - startOffset.pageX;\n      var differenceY = currentOffset.pageY - startOffset.pageY;\n\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\n        return;\n      }\n\n      applyTouchMove(differenceX, differenceY);\n      startOffset = currentOffset;\n\n      var currentTime = new Date().getTime();\n\n      var timeGap = currentTime - startTime;\n      if (timeGap > 0) {\n        speed.x = differenceX / timeGap;\n        speed.y = differenceY / timeGap;\n        startTime = currentTime;\n      }\n\n      if (shouldPrevent(differenceX, differenceY)) {\n        e.preventDefault();\n      }\n    }\n  }\n  function touchEnd() {\n    if (i.settings.swipeEasing) {\n      clearInterval(easingLoop);\n      easingLoop = setInterval(function() {\n        if (i.isInitialized) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (!speed.x && !speed.y) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        applyTouchMove(speed.x * 30, speed.y * 30);\n\n        speed.x *= 0.8;\n        speed.y *= 0.8;\n      }, 10);\n    }\n  }\n\n  if (env.supportsTouch) {\n    i.event.bind(element, 'touchstart', touchStart);\n    i.event.bind(element, 'touchmove', touchMove);\n    i.event.bind(element, 'touchend', touchEnd);\n  } else if (env.supportsIePointer) {\n    if (window.PointerEvent) {\n      i.event.bind(element, 'pointerdown', touchStart);\n      i.event.bind(element, 'pointermove', touchMove);\n      i.event.bind(element, 'pointerup', touchEnd);\n    } else if (window.MSPointerEvent) {\n      i.event.bind(element, 'MSPointerDown', touchStart);\n      i.event.bind(element, 'MSPointerMove', touchMove);\n      i.event.bind(element, 'MSPointerUp', touchEnd);\n    }\n  }\n};\n\nvar defaultSettings = function () { return ({\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\n  maxScrollbarLength: null,\n  minScrollbarLength: null,\n  scrollingThreshold: 1000,\n  scrollXMarginOffset: 0,\n  scrollYMarginOffset: 0,\n  suppressScrollX: false,\n  suppressScrollY: false,\n  swipeEasing: true,\n  useBothWheelAxes: false,\n  wheelPropagation: true,\n  wheelSpeed: 1,\n}); };\n\nvar handlers = {\n  'click-rail': clickRail,\n  'drag-thumb': dragThumb,\n  keyboard: keyboard,\n  wheel: wheel,\n  touch: touch,\n};\n\nvar PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\n  var this$1 = this;\n  if ( userSettings === void 0 ) userSettings = {};\n\n  if (typeof element === 'string') {\n    element = document.querySelector(element);\n  }\n\n  if (!element || !element.nodeName) {\n    throw new Error('no element is specified to initialize PerfectScrollbar');\n  }\n\n  this.element = element;\n\n  element.classList.add(cls.main);\n\n  this.settings = defaultSettings();\n  for (var key in userSettings) {\n    this$1.settings[key] = userSettings[key];\n  }\n\n  this.containerWidth = null;\n  this.containerHeight = null;\n  this.contentWidth = null;\n  this.contentHeight = null;\n\n  var focus = function () { return element.classList.add(cls.state.focus); };\n  var blur = function () { return element.classList.remove(cls.state.focus); };\n\n  this.isRtl = get(element).direction === 'rtl';\n  this.isNegativeScroll = (function () {\n    var originalScrollLeft = element.scrollLeft;\n    var result = null;\n    element.scrollLeft = -1;\n    result = element.scrollLeft < 0;\n    element.scrollLeft = originalScrollLeft;\n    return result;\n  })();\n  this.negativeScrollAdjustment = this.isNegativeScroll\n    ? element.scrollWidth - element.clientWidth\n    : 0;\n  this.event = new EventManager();\n  this.ownerDocument = element.ownerDocument || document;\n\n  this.scrollbarXRail = div(cls.element.rail('x'));\n  element.appendChild(this.scrollbarXRail);\n  this.scrollbarX = div(cls.element.thumb('x'));\n  this.scrollbarXRail.appendChild(this.scrollbarX);\n  this.scrollbarX.setAttribute('tabindex', 0);\n  this.event.bind(this.scrollbarX, 'focus', focus);\n  this.event.bind(this.scrollbarX, 'blur', blur);\n  this.scrollbarXActive = null;\n  this.scrollbarXWidth = null;\n  this.scrollbarXLeft = null;\n  var railXStyle = get(this.scrollbarXRail);\n  this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\n  if (isNaN(this.scrollbarXBottom)) {\n    this.isScrollbarXUsingBottom = false;\n    this.scrollbarXTop = toInt(railXStyle.top);\n  } else {\n    this.isScrollbarXUsingBottom = true;\n  }\n  this.railBorderXWidth =\n    toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\n  // Set rail to display:block to calculate margins\n  set(this.scrollbarXRail, { display: 'block' });\n  this.railXMarginWidth =\n    toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\n  set(this.scrollbarXRail, { display: '' });\n  this.railXWidth = null;\n  this.railXRatio = null;\n\n  this.scrollbarYRail = div(cls.element.rail('y'));\n  element.appendChild(this.scrollbarYRail);\n  this.scrollbarY = div(cls.element.thumb('y'));\n  this.scrollbarYRail.appendChild(this.scrollbarY);\n  this.scrollbarY.setAttribute('tabindex', 0);\n  this.event.bind(this.scrollbarY, 'focus', focus);\n  this.event.bind(this.scrollbarY, 'blur', blur);\n  this.scrollbarYActive = null;\n  this.scrollbarYHeight = null;\n  this.scrollbarYTop = null;\n  var railYStyle = get(this.scrollbarYRail);\n  this.scrollbarYRight = parseInt(railYStyle.right, 10);\n  if (isNaN(this.scrollbarYRight)) {\n    this.isScrollbarYUsingRight = false;\n    this.scrollbarYLeft = toInt(railYStyle.left);\n  } else {\n    this.isScrollbarYUsingRight = true;\n  }\n  this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\n  this.railBorderYWidth =\n    toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\n  set(this.scrollbarYRail, { display: 'block' });\n  this.railYMarginHeight =\n    toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\n  set(this.scrollbarYRail, { display: '' });\n  this.railYHeight = null;\n  this.railYRatio = null;\n\n  this.reach = {\n    x:\n      element.scrollLeft <= 0\n        ? 'start'\n        : element.scrollLeft >= this.contentWidth - this.containerWidth\n          ? 'end'\n          : null,\n    y:\n      element.scrollTop <= 0\n        ? 'start'\n        : element.scrollTop >= this.contentHeight - this.containerHeight\n          ? 'end'\n          : null,\n  };\n\n  this.isAlive = true;\n\n  this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\n\n  this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\n  this.lastScrollLeft = element.scrollLeft; // for onScroll only\n  this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\n  updateGeometry(this);\n};\n\nPerfectScrollbar.prototype.update = function update () {\n  if (!this.isAlive) {\n    return;\n  }\n\n  // Recalcuate negative scrollLeft adjustment\n  this.negativeScrollAdjustment = this.isNegativeScroll\n    ? this.element.scrollWidth - this.element.clientWidth\n    : 0;\n\n  // Recalculate rail margins\n  set(this.scrollbarXRail, { display: 'block' });\n  set(this.scrollbarYRail, { display: 'block' });\n  this.railXMarginWidth =\n    toInt(get(this.scrollbarXRail).marginLeft) +\n    toInt(get(this.scrollbarXRail).marginRight);\n  this.railYMarginHeight =\n    toInt(get(this.scrollbarYRail).marginTop) +\n    toInt(get(this.scrollbarYRail).marginBottom);\n\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\n  set(this.scrollbarXRail, { display: 'none' });\n  set(this.scrollbarYRail, { display: 'none' });\n\n  updateGeometry(this);\n\n  processScrollDiff(this, 'top', 0, false, true);\n  processScrollDiff(this, 'left', 0, false, true);\n\n  set(this.scrollbarXRail, { display: '' });\n  set(this.scrollbarYRail, { display: '' });\n};\n\nPerfectScrollbar.prototype.onScroll = function onScroll (e) {\n  if (!this.isAlive) {\n    return;\n  }\n\n  updateGeometry(this);\n  processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\n  processScrollDiff(\n    this,\n    'left',\n    this.element.scrollLeft - this.lastScrollLeft\n  );\n\n  this.lastScrollTop = Math.floor(this.element.scrollTop);\n  this.lastScrollLeft = this.element.scrollLeft;\n};\n\nPerfectScrollbar.prototype.destroy = function destroy () {\n  if (!this.isAlive) {\n    return;\n  }\n\n  this.event.unbindAll();\n  remove(this.scrollbarX);\n  remove(this.scrollbarY);\n  remove(this.scrollbarXRail);\n  remove(this.scrollbarYRail);\n  this.removePsClasses();\n\n  // unset elements\n  this.element = null;\n  this.scrollbarX = null;\n  this.scrollbarY = null;\n  this.scrollbarXRail = null;\n  this.scrollbarYRail = null;\n\n  this.isAlive = false;\n};\n\nPerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\n  this.element.className = this.element.className\n    .split(' ')\n    .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\n    .join(' ');\n};\n\nexport default PerfectScrollbar;\n","function select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","var is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});","import PerfectScrollbar from 'perfect-scrollbar';\nimport Clipboard from 'clipboard';\nimport Constants from '../configuration/Constants';\n\n/**\n * Smart guide\n * @typedef {Object} SmartGuide\n * @property {Editor} editor - A reference to the current editor.\n * @property {String} wordToChange - Word to change following a click on a word.\n * @property {String} lastWord - Keep the last word of the previous export to compare with the new and scroll if it's different.\n * @property {String} previousLabelExport - Keep the previous label export to know if we should repopulate the prompter text.\n * @property {PerfectScrollbar} perfectScrollbar - Perfect Scrollbar used to get gestures from smart guide using touch-action none anyway and get scrolling too.\n * @property {Object} elements - All the HTML elements of the smart guide.\n * @property {Number} smartGuideTimeOutId - Id of the setTimeOut from fade out animation to clear.\n * @property {String} randomString - Random string used in case of multiple smart guide.\n */\n\n/**\n * Create all the smart guide HTML elements.\n */\nfunction createHTMLElements(randomString) {\n  /**\n   * The smart guide element.\n   * @type {HTMLDivElement}\n   */\n  const smartGuideElement = document.createElement('div');\n  smartGuideElement.id = 'smartguide' + randomString;\n  smartGuideElement.classList.add('smartguide');\n\n  /**\n   * The prompter text element that contains the text to get the overflow working.\n   * @type {HTMLDivElement}\n   */\n  const textElement = document.createElement('div');\n  textElement.id = 'prompter-text' + randomString;\n  textElement.classList.add('prompter-text');\n  textElement.setAttribute('touch-action', 'none');\n\n  /**\n   * The text container element that contains the text element.\n   * @type {HTMLDivElement}\n   */\n  const textContainer = document.createElement('div');\n  textContainer.id = 'prompter-text-container' + randomString;\n  textContainer.classList.add('prompter-text-container');\n  textContainer.appendChild(textElement);\n\n  /**\n   * The actions menu represented by the ellipsis character.\n   * @type {HTMLDivElement}\n   */\n  const ellipsisElement = document.createElement('div');\n  ellipsisElement.id = 'ellipsis' + randomString;\n  ellipsisElement.classList.add('ellipsis');\n  ellipsisElement.innerHTML = '...';\n\n  /**\n   * The tag element.\n   * @type {HTMLDivElement}\n   */\n  const tagElement = document.createElement('div');\n  tagElement.id = 'tag-icon' + randomString;\n  tagElement.classList.add('tag-icon');\n  tagElement.innerHTML = '&#182;';\n\n  /**\n   * The candidates element that contains the candidates for a word.\n   * @type {HTMLDivElement}\n   */\n  const candidatesElement = document.createElement('div');\n  candidatesElement.id = 'candidates' + randomString;\n  candidatesElement.classList.add('candidates');\n\n  /**\n   * The menu element that contains the actions.\n   * @type {HTMLDivElement}\n   */\n  const menuElement = document.createElement('div');\n  menuElement.id = 'more-menu' + randomString;\n  menuElement.classList.add('more-menu');\n\n  /**\n   * The convert button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const convertElement = document.createElement('button');\n  convertElement.classList.add('options-label-button');\n  convertElement.id = 'convert' + randomString;\n  convertElement.innerHTML = 'Convert';\n\n  /**\n   * The copy button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const copyElement = document.createElement('button');\n  copyElement.classList.add('options-label-button');\n  copyElement.id = 'copy' + randomString;\n  copyElement.innerHTML = 'Copy';\n\n  /**\n   * The delete button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const deleteElement = document.createElement('button');\n  deleteElement.classList.add('options-label-button');\n  deleteElement.id = 'delete' + randomString;\n  deleteElement.innerHTML = 'Delete';\n\n  return {\n    smartGuideElement,\n    textElement,\n    textContainer,\n    candidatesElement,\n    menuElement,\n    tagElement,\n    ellipsisElement,\n    convertElement,\n    copyElement,\n    deleteElement,\n  };\n}\n\n/**\n * Check if node is in shadow dom\n * @param {Node} node - A node element.\n * @returns {boolean} true if is in shadow dom, false otherwise.\n */\nfunction isInShadow(node) {\n  let parent = (node && node.parentNode);\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\n\n/**\n * Show the actions of the action menu.\n * @param {Event} evt - Event used to insert the option div using the event's target.\n * @param {Object} elements - All the elements of the smart guide.\n * @param {SmartGuide} smartGuide\n */\nfunction showActions(evt, elements) {\n  const elementsRef = elements;\n\n  const insertActions = () => {\n    elementsRef.menuElement.appendChild(elementsRef.convertElement);\n    elementsRef.menuElement.appendChild(elementsRef.copyElement);\n    elementsRef.menuElement.appendChild(elementsRef.deleteElement);\n\n    const parent = evt.target.parentNode;\n    parent.insertBefore(elementsRef.menuElement, evt.target);\n  };\n\n  const positionActions = () => {\n    // 48 to get the boundary of smart guide element.\n    const left = evt.target.offsetLeft - 68;\n    elementsRef.menuElement.style.left = `${left}px`;\n  };\n\n  const isMenuInDocument = document.contains(elementsRef.menuElement);\n  if (!isInShadow(elementsRef.menuElement) && !isMenuInDocument) {\n    elementsRef.menuElement.style.display = 'flex';\n    positionActions();\n    insertActions();\n  } else if (elementsRef.menuElement.style.display === 'none') {\n    positionActions();\n    elementsRef.menuElement.style.display = 'flex';\n  }\n}\n\n/**\n * Show the candidates of the clicked word.\n * @param {Event} evt - Event used to determine the clicked word.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction showCandidates(evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  if (evt.target.id !== `prompter-text${smartGuide.randomString}`) {\n    const id = evt.target.id.replace('word-', '').replace(smartGuide.randomString, '');\n    const words = JSON.parse(editor.exports[Constants.Exports.JIIX]).words;\n    smartGuideRef.wordToChange = words[id];\n    smartGuideRef.wordToChange.id = id;\n    elementsRef.candidatesElement.innerHTML = '';\n    if (smartGuideRef.wordToChange && smartGuideRef.wordToChange.candidates) {\n      elementsRef.candidatesElement.style.display = 'flex';\n      smartGuideRef.wordToChange.candidates.forEach((word, index) => {\n        if (smartGuideRef.wordToChange.label === word) {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\" class=\"selected-word\">${word}</span>`;\n        } else {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\">${word}</span>`;\n        }\n      });\n      // get the parent parent of word to insert just before smart guide, 48 to get the boundary of smart guide element.\n      const top = 48;\n      const left = evt.target.getBoundingClientRect().left - 60;\n      elementsRef.candidatesElement.style.top = `${top}px`;\n      elementsRef.candidatesElement.style.left = `${left}px`;\n\n      const parent = evt.target.parentNode.parentNode.parentNode;\n      parent.insertBefore(elementsRef.candidatesElement, evt.target.parentNode.parentNode);\n    }\n  }\n}\n\n/**\n * Call the import_ function of the editor to import the modified Jiix with the new label.\n * @param {Event} evt - Event to determine the clicked candidate.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction clickCandidate(evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n  const candidate = evt.target.innerText;\n\n  if (candidate !== smartGuideRef.wordToChange.label && smartGuideRef.wordToChange.candidates.includes(candidate)) {\n    const jiixToImport = JSON.parse(editor.exports[Constants.Exports.JIIX]);\n    jiixToImport.words[smartGuideRef.wordToChange.id].label = candidate;\n    // eslint-disable-next-line no-underscore-dangle\n    editor.import_(JSON.stringify(jiixToImport), Constants.Exports.JIIX);\n  }\n  elementsRef.candidatesElement.style.display = 'none';\n}\n\n/**\n * Add the listeners to the smart guide elements.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction addListeners(editor, smartGuide) {\n  const elementsRef = smartGuide.elements;\n\n  elementsRef.textElement.addEventListener('click', evt => showCandidates(evt, editor, smartGuide));\n  elementsRef.candidatesElement.addEventListener('click', evt => clickCandidate(evt, editor, smartGuide));\n  elementsRef.ellipsisElement.addEventListener('click', evt => showActions(evt, elementsRef));\n  elementsRef.copyElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n  });\n  elementsRef.convertElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n    editor.convert();\n  });\n  elementsRef.deleteElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none';\n    editor.clear();\n  });\n}\n\n/**\n * Call mutation observer to trigger fade out animation.\n * @param {number} [duration=10000] - the duration in milliseconds before calling the fade out animation.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction callFadeOutObserver(duration = 10000, smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n  // eslint-disable-next-line no-undef\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach(() => {\n      if (smartGuideRef.smartGuideTimeOutId) {\n        clearTimeout(smartGuideRef.smartGuideTimeOutId);\n      }\n      if (elementsRef.candidatesElement.style.display === 'none' && elementsRef.menuElement.style.display === 'none') {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out');\n          elementsRef.smartGuideElement.classList.remove('smartguide-in');\n        }, duration);\n      } else if (!document.contains(elementsRef.candidatesElement) && !document.contains(elementsRef.menuElement)) {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out');\n          elementsRef.smartGuideElement.classList.remove('smartguide-in');\n        }, duration);\n      }\n    });\n  });\n  observer.observe(elementsRef.smartGuideElement, { childList: true, subtree: true, attributes: true });\n}\n\n/**\n * Create a new smart guide\n * @param {Editor} editor - A reference to the editor.\n * @returns {SmartGuide} New smart guide\n */\nexport function createSmartGuide(editor) {\n  const randomString = '-' + Math.random().toString(10).substring(2, 12);\n  const elements = createHTMLElements(randomString);\n\n  /**\n   * Clipboard from clipboard.js used to get copy across all browsers.\n   * @type {Clipboard}\n   */\n  const clipboard = new Clipboard(elements.copyElement);\n  const perfectScrollbar = new PerfectScrollbar(elements.textContainer, { suppressScrollY: true, scrollXMarginOffset: 1 });\n\n  const smartGuide = {\n    editor,\n    wordToChange: '',\n    lastWord: '',\n    previousLabelExport: ' ',\n    perfectScrollbar,\n    elements,\n    smartGuideTimeOutId: 0,\n    randomString\n  };\n  addListeners(editor, smartGuide);\n\n  if (editor.configuration.recognitionParams.iink.text.smartGuideFadeOut.enable) {\n    callFadeOutObserver(editor.configuration.recognitionParams.iink.text.smartGuideFadeOut.duration, smartGuide);\n  }\n\n  return smartGuide;\n}\n\nexport function resize(smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const mmToPixels = 3.779527559;\n  let left = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.left * mmToPixels;\n\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left;\n\n  // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n  elementsRef.textContainer.style.width = `${maxWidthTextContainer}px`;\n  elementsRef.textContainer.style.maxWidth = `${maxWidthTextContainer}px`;\n\n  left = elementsRef.tagElement.offsetWidth;\n  left += maxWidthTextContainer;\n  elementsRef.ellipsisElement.style.left = `${left}px`;\n\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`;\n  smartGuideRef.perfectScrollbar.update();\n}\n\n/**\n * Insert the smart guide HTML elements in the DOM.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nexport function insertSmartGuide(smartGuide) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const insertSmartGuideElement = (left, top) => {\n    elementsRef.smartGuideElement.style.top = `${top}px`;\n    elementsRef.smartGuideElement.style.left = `${left}px`;\n    elementsRef.smartGuideElement.style.visibility = 'hidden';\n\n    const parent = smartGuideRef.editor.domElement;\n    parent.insertBefore(elementsRef.smartGuideElement, smartGuideRef.editor.loader);\n  };\n  const insertTag = () => {\n    elementsRef.smartGuideElement.appendChild(elementsRef.tagElement);\n  };\n  const insertTextContainer = (left, maxWidth) => {\n    elementsRef.textContainer.style.left = `${left}px`;\n\n    // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n    elementsRef.textContainer.style.width = `${maxWidth}px`;\n    elementsRef.textContainer.style.maxWidth = `${maxWidth}px`;\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.textContainer);\n  };\n  const insertEllipsis = (left) => {\n    elementsRef.ellipsisElement.style.left = `${left}px`;\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.ellipsisElement);\n  };\n\n\n  // FIXME Use value from contentChanged when available\n\n  const mmToPixels = 3.779527559;\n\n  const marginTop = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.top * mmToPixels;\n  const marginLeft = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.left * mmToPixels;\n\n  // 12 is the space between line in mm\n  const top = marginTop - (12 * mmToPixels);\n  let left = marginLeft;\n\n  insertSmartGuideElement(left, top);\n  insertTag();\n\n  // 35 is the ellipsis element width\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left;\n  left = elementsRef.tagElement.offsetWidth;\n  insertTextContainer(left, maxWidthTextContainer);\n\n  left += maxWidthTextContainer;\n  insertEllipsis(left);\n\n  elementsRef.menuElement.style.display = 'none';\n  elementsRef.menuElement.appendChild(elementsRef.convertElement);\n  elementsRef.menuElement.appendChild(elementsRef.copyElement);\n  elementsRef.menuElement.appendChild(elementsRef.deleteElement);\n  elementsRef.smartGuideElement.appendChild(elementsRef.menuElement);\n\n  elementsRef.candidatesElement.style.display = 'none';\n  elementsRef.smartGuideElement.appendChild(elementsRef.candidatesElement);\n\n  // 48px as set in css\n  elementsRef.smartGuideElement.style.height = '48px';\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`;\n  smartGuideRef.perfectScrollbar.update();\n}\n\n/**\n * Launch the smartguide.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n * @param {Object} exports -  The export from the editor.\n */\nexport function launchSmartGuide(smartGuide, exports) {\n  const smartGuideRef = smartGuide;\n  const elementsRef = smartGuide.elements;\n\n  const isSmartGuideInDocument = document.contains(elementsRef.smartGuideElement);\n\n  if (!isInShadow(elementsRef.smartGuideElement) && !isSmartGuideInDocument) {\n    insertSmartGuide(smartGuide);\n  }\n\n  const addAnimationToModifiedWord = (words) => {\n    if (smartGuideRef.tempWords && smartGuideRef.tempWords.length === words.length) {\n      const labelWordsArray = words.map(word => word.label);\n      const tempLabelWordsArray = smartGuideRef.tempWords.map(word => word.label);\n      const wordChangedId = labelWordsArray.indexOf(labelWordsArray.filter(a => tempLabelWordsArray.indexOf(a) === -1)[0]);\n      if (document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`) && wordChangedId > -1) {\n        document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).classList.add('modified-word');\n        elementsRef.textContainer.scrollLeft = document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).offsetLeft - 10;\n      }\n    }\n    smartGuideRef.tempWords = JSON.parse(exports[Constants.Exports.JIIX]).words;\n  };\n\n  const createWordSpan = (empty, index, word) => {\n    const span = document.createElement('span');\n    span.id = `word-${index}${smartGuide.randomString}`;\n    if (empty) {\n      span.innerHTML = '&nbsp;';\n    } else {\n      span.textContent = word.label;\n    }\n    return span;\n  };\n\n  // Possible optimisation ? Check if we can find a way to not repopulate the smartguide every time even if we now use Document fragment\n  const populatePrompter = (words) => {\n    elementsRef.textElement.innerHTML = '';\n    // We use a DocumentFragment to reflow the DOM only one time as it is not part of the DOM\n    const myFragment = document.createDocumentFragment();\n    words.forEach((word, index) => {\n      if (word.label === ' ' || word.label.includes('\\n')) {\n        myFragment.appendChild(createWordSpan(true, index));\n      } else if (index !== words.length - 1) {\n        myFragment.appendChild(createWordSpan(false, index, word));\n      } else {\n        elementsRef.textElement.appendChild(myFragment);\n        smartGuideRef.perfectScrollbar.update();\n        if (smartGuideRef.lastWord === '') {\n          smartGuideRef.lastWord = word;\n        }\n        const span = createWordSpan(false, index, word);\n        // This is used to scroll to last word if last word is modified\n        if ((smartGuideRef.lastWord.candidates !== word.candidates) && (smartGuideRef.lastWord.label !== word.label)) {\n          span.classList.add('added-word');\n          elementsRef.textElement.appendChild(span);\n          elementsRef.textContainer.scrollLeft = span.offsetLeft;\n          smartGuideRef.lastWord = word;\n        } else {\n          elementsRef.textElement.appendChild(span);\n          elementsRef.textContainer.scrollLeft = span.offsetLeft;\n        }\n      }\n    });\n  };\n\n  if (exports && JSON.parse(exports[Constants.Exports.JIIX]).words.length > 0) {\n    elementsRef.smartGuideElement.classList.add('smartguide-in');\n    elementsRef.smartGuideElement.classList.remove('smartguide-out');\n    elementsRef.candidatesElement.style.display = 'none';\n    elementsRef.menuElement.style.display = 'none';\n    if (smartGuideRef.previousLabelExport && smartGuideRef.previousLabelExport !== JSON.parse(exports[Constants.Exports.JIIX]).label) {\n      const words = JSON.parse(exports[Constants.Exports.JIIX]).words;\n      populatePrompter(words);\n      addAnimationToModifiedWord(words);\n    }\n    smartGuideRef.previousLabelExport = JSON.parse(exports[Constants.Exports.JIIX]).label;\n    // This is required by clipboard.js to get the text to be copied.\n    elementsRef.copyElement.setAttribute('data-clipboard-text', JSON.parse(exports[Constants.Exports.JIIX]).label);\n  } else {\n    elementsRef.smartGuideElement.classList.add('smartguide-out');\n    elementsRef.smartGuideElement.classList.remove('smartguide-in');\n  }\n\n  return smartGuideRef;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Undo/redo context\n * @typedef {Object} UndoRedoContext\n * @property {Array<Model>} stack=[] List of processed models.\n * @property {Number} currentPosition=-1 Current model index into the stack.\n * @property {Number} maxSize Max size of the stack.\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n */\n\n/**\n * Create a new undo/redo context\n * @param {Configuration} configuration Current configuration\n * @return {UndoRedoContext} New undo/redo context\n */\nexport function createUndoRedoContext(configuration) {\n  return {\n    stack: [],\n    currentPosition: -1,\n    maxSize: configuration.undoRedoMaxStackSize,\n    canUndo: false,\n    canRedo: false\n  };\n}\n\n/**\n * Update the undo/redo state\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @return {UndoRedoContext} Updated undo/redo context\n */\nexport function updateUndoRedoState(undoRedoContext) {\n  const undoRedoContextRef = undoRedoContext;\n  undoRedoContextRef.canUndo = undoRedoContext.currentPosition > 0;\n  undoRedoContextRef.canRedo = undoRedoContext.currentPosition < (undoRedoContext.stack.length - 1);\n  return undoRedoContextRef;\n}\n","import * as InkModel from '../model/InkModel';\nimport * as UndoRedoContext from '../model/UndoRedoContext';\nimport { modelLogger as logger } from '../configuration/LoggerConfig';\nimport Constants from '../configuration/Constants';\n\n/**\n * Undo/redo manager\n * @typedef {Object} UndoRedoManager\n * @property {function} updateModel Push the current model into the undo/redo context.\n * @property {function} undo Undo.\n * @property {function} redo Redo.\n * @property {function} clear Clear.\n */\n\n/**\n * Get current model in stack\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @param {Boolean} [clone=true] Whether or not to clone the model\n * @param {...String} types\n */\nexport function getModel(undoRedoContext, clone = true, ...types) {\n  const model = undoRedoContext.stack[undoRedoContext.currentPosition];\n  const val = {\n    res: clone ? InkModel.cloneModel(model) : model,\n    types\n  };\n  return Promise.resolve(val);\n}\n\n/**\n * Mutate the undoRedo stack by adding a new model to it.\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function updateModel(undoRedoContext, model) {\n  // Used to update the model with the recognition result if relevant\n  const modelIndex = undoRedoContext.stack.findIndex(item => (item.modificationTime === model.modificationTime) && (item.rawStrokes.length === model.rawStrokes.length));\n\n  const modelReference = model;\n  modelReference.modificationTime = new Date().getTime();\n\n  const types = [];\n  if (modelIndex > -1) {\n    undoRedoContext.stack.splice(modelIndex, 1, InkModel.cloneModel(modelReference));\n    logger.debug('model updated', modelReference);\n  } else {\n    const undoRedoContextReference = undoRedoContext;\n    undoRedoContextReference.currentPosition += 1;\n    undoRedoContextReference.stack = undoRedoContextReference.stack.slice(0, undoRedoContextReference.currentPosition);\n    undoRedoContextReference.stack.push(InkModel.cloneModel(modelReference));\n    if (undoRedoContextReference.stack.length > undoRedoContextReference.maxSize) {\n      undoRedoContextReference.stack.shift();\n      undoRedoContextReference.currentPosition--;\n    }\n    logger.debug('model pushed', modelReference);\n    types.push(Constants.EventType.CHANGED);\n  }\n  UndoRedoContext.updateUndoRedoState(undoRedoContext);\n  logger.debug('undo/redo stack updated', undoRedoContext);\n  return getModel(undoRedoContext, false, ...types);\n}\n\n/**\n * Undo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function undo(undoRedoContext, model) {\n  const undoRedoContextReference = undoRedoContext;\n  if (undoRedoContextReference.currentPosition > 0) {\n    undoRedoContextReference.currentPosition -= 1;\n    UndoRedoContext.updateUndoRedoState(undoRedoContext);\n    logger.debug('undo index', undoRedoContextReference.currentPosition);\n  }\n  return getModel(undoRedoContext, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED);\n}\n\n/**\n * Redo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function redo(undoRedoContext, model) {\n  const undoRedoContextReference = undoRedoContext;\n  if (undoRedoContextReference.currentPosition < undoRedoContextReference.stack.length - 1) {\n    undoRedoContextReference.currentPosition += 1;\n    UndoRedoContext.updateUndoRedoState(undoRedoContext);\n    logger.debug('redo index', undoRedoContextReference.currentPosition);\n  }\n  return getModel(undoRedoContext, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED);\n}\n","import { drawModel } from './CanvasRenderer';\nimport * as InkModel from '../../model/InkModel';\n\nfunction createCanvas(borderCoordinates, margin = 10) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document;\n  const canvas = browserDocument.createElement('canvas');\n  canvas.width = Math.abs(borderCoordinates.maxX - borderCoordinates.minX) + (2 * margin);\n  canvas.style.width = `${canvas.width}px`;\n  canvas.height = Math.abs(borderCoordinates.maxY - borderCoordinates.minY) + (2 * margin);\n  canvas.style.height = `${canvas.height}px`;\n  return canvas;\n}\n\n/**\n * Generate a PNG image data url from the model\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} [margin=10] Margins to apply around the image\n * @return {String} Image data string result\n */\nexport function getImage(model, stroker, margin = 10) {\n  if (model.rawStrokes.length > 0) {\n    const borderCoordinates = InkModel.getBorderCoordinates(model);\n\n    const capturingCanvas = createCanvas(borderCoordinates, margin);\n    const renderingCanvas = createCanvas(borderCoordinates, margin);\n    const renderStructure = {\n      renderingCanvas,\n      renderingCanvasContext: renderingCanvas.getContext('2d'),\n      capturingCanvas,\n      capturingCanvasContext: capturingCanvas.getContext('2d')\n    };\n    // Change canvas origin\n    renderStructure.renderingCanvasContext.translate(-borderCoordinates.minX + margin, -borderCoordinates.minY + margin);\n    drawModel(renderStructure, model, stroker);\n    return renderStructure.renderingCanvas.toDataURL('image/png');\n  }\n  return null;\n}\n","/* eslint-disable no-undef */\nimport { editorLogger as logger } from '../configuration/LoggerConfig';\nimport * as InkModel from '../model/InkModel';\n\n/**\n * Function to copy past to inject ink during tutorial.\n * @param editorParam\n * @param strokes\n * @param delayBetweenStrokes\n * @param lastOneDelay\n */\nexport function inkImporter(editorParam, strokes, delayBetweenStrokes, lastOneDelay) {\n  const editor = editorParam;\n  logger.debug('inkImporter start importing =>', strokes);\n  const origGrabber = Object.assign({}, editor.behavior.grabber);\n  origGrabber.detach = editor.behavior.grabber.detach;\n  editor.behavior.grabber = {};\n  const actions = [];\n  strokes.forEach((stroke) => {\n    if (stroke.convert) {\n      actions.push({ action: 'convert', value: true });\n    } else if (stroke.setDelay) {\n      actions.push({ action: 'setDelay', value: stroke.setDelay });\n    } else {\n      if (stroke.color) {\n        actions.push({ action: 'setColor', value: stroke.color });\n      }\n      stroke.X.forEach((x, idx) => {\n        let action = 'move';\n        if (idx === 0) {\n          action = 'down';\n        } else if (idx === (stroke.X.length - 1)) {\n          action = 'up';\n        }\n        actions.push({ action, point: { x: stroke.X[idx], y: stroke.Y[idx] } });\n      });\n    }\n  });\n  logger.debug('Array of actions =>', actions);\n  const play = (actionsArray, position, delay) => {\n    if (position < actionsArray.length) {\n      const currentAction = actionsArray[position];\n      let nextDelay = delay;\n      if (currentAction.action === 'convert') {\n        editor.convert();\n      } else if (currentAction.action === 'setDelay') {\n        nextDelay = currentAction.value;\n      } else if (currentAction.action === 'setColor') {\n        editor.penStyle = {\n          color: currentAction.value,\n        };\n      } else {\n        currentAction.point.t = new Date().getTime();\n        if (currentAction.action === 'down') {\n          editor.pointerDown(currentAction.point);\n        } else if (currentAction.action === 'up') {\n          editor.pointerUp(currentAction.point);\n        } else if (currentAction.action === 'move') {\n          editor.pointerMove(currentAction.point);\n        }\n      } if (lastOneDelay && position === actionsArray.map(x => x.action).lastIndexOf('down') - 1) {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay);\n        }, lastOneDelay);\n      } else if (position === actionsArray.length - 1) {\n        const event = new Event('drawEnded');\n        document.dispatchEvent(event);\n        editor.behavior.grabber = origGrabber;\n      } else {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay);\n        }, nextDelay);\n      }\n    }\n  };\n  play(actions, 0, delayBetweenStrokes);\n}\n\n\nexport function importStrokeGroups(editorParam, strokeGroups) {\n  strokeGroups.forEach((group) => {\n    group.strokes.forEach((strokeFromGroup) => {\n      InkModel.addStroke(editorParam.model, strokeFromGroup);\n      InkModel.addStrokeToGroup(editorParam.model, strokeFromGroup, group.penStyle);\n    });\n  });\n  editorParam.renderer.drawModel(editorParam.rendererContext, editorParam.model, editorParam.stroker);\n}\n","/**\n * @typedef {Object} DestructuredPromise\n * @property {Promise} promise\n * @property {function} resolve\n * @property {function} reject\n */\n\n/**\n * destructurePromise\n * @returns {{resolve: *, reject: *, promise: Promise<unknown>}}\n */\nexport function destructurePromise() {\n  let resolve;\n  let reject;\n  const initPromise = new Promise(\n    (resolveParam, rejectParam) => {\n      resolve = resolveParam;\n      reject = rejectParam;\n    });\n  return { promise: initPromise, resolve, reject };\n}\n\n\n/**\n * @param time\n * @return {{timer: *, promise: Promise}}\n */\nexport function delay(time) {\n  let timer = null;\n  const promise = new Promise((resolve) => {\n    timer = setTimeout(resolve, time);\n  });\n  return {\n    promise,\n    timer,\n  };\n}\n\n","/* eslint-disable no-underscore-dangle */\nimport style from './iink.css';\nimport { editorLogger as logger } from './configuration/LoggerConfig';\nimport * as DefaultBehaviors from './configuration/DefaultBehaviors';\nimport * as DefaultConfiguration from './configuration/DefaultConfiguration';\nimport * as DefaultStyles from './configuration/DefaultPenStyle';\nimport * as DefaultTheme from './configuration/DefaultTheme';\nimport * as InkModel from './model/InkModel';\nimport * as UndoRedoContext from './model/UndoRedoContext';\nimport * as UndoRedoManager from './model/UndoRedoManager';\nimport * as ImageRenderer from './renderer/canvas/ImageRenderer';\nimport * as RecognizerContext from './model/RecognizerContext';\nimport * as SmartGuide from './smartguide/SmartGuide';\nimport Constants from './configuration/Constants';\nimport * as eastereggs from './eastereggs/InkImporter';\nimport {\n  handleError,\n  handleSuccess,\n  emitEvents,\n  manageRecognizedModel\n} from './recognizer/RecognizerService';\nimport * as PromiseHelper from './util/PromiseHelper';\n\n\n/**\n * Check if a clear is required, and does it if it is\n * @param {Editor} editor\n * @param {Model} model Current model\n * @return {Promise<*>}\n */\nfunction manageResetState(editor, model) {\n  // If strokes moved in the undo redo stack then a clear is mandatory before sending strokes.\n  if (editor.recognizer.reset && RecognizerContext.isResetRequired(editor.recognizerContext, model)) {\n    return editor.recognizer.reset(editor.recognizerContext, model);\n  }\n  return null;\n}\n\n/**\n * Check if the trigger in parameter is valid.\n * @param {Editor} editor\n * @param {String} type\n * @param {String} [trigger]\n * @return {Boolean}\n */\nfunction isTriggerValid(editor, type, trigger = editor.configuration.triggers[type]) {\n  if (editor.recognizer &&\n    editor.recognizer.getInfo().availableTriggers[type].includes(trigger)) {\n    return true;\n  }\n  logger.error(`${trigger} is not a valid trigger for ${type}`);\n  return false;\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [trigger]\n * @return {Promise}\n */\nasync function addStrokes(editor, model, trigger = editor.configuration.triggers.addStrokes) {\n  if (editor.recognizer && editor.recognizer.addStrokes) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      // Firing addStrokes only if recognizer is configure to do it\n      if (isTriggerValid(editor, 'addStrokes', trigger)) {\n        const res = await manageResetState(editor, model);\n        if (res) {\n          return editor.recognizer.addStrokes(editor.recognizerContext, res);\n        }\n        return editor.recognizer.addStrokes(editor.recognizerContext, model);\n      }\n    }\n  }\n  return Promise.reject('Cannot addStrokes');\n}\n\n/**\n * Launch ink import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {PointerEvents} events\n * @return {Promise<*>}\n */\nasync function launchPointerEvents(editor, model, events) {\n  if (editor.recognizer && editor.recognizer.pointerEvents) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.pointerEvents(editor.recognizerContext, model, events);\n    }\n  }\n  return Promise.reject('Cannot launch pointerEvents');\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [requestedMimeTypes]\n * @param {String} [trigger]\n */\nexport async function launchExport(editor, model, requestedMimeTypes, trigger = editor.configuration.triggers.exportContent) {\n  if (editor.recognizer && editor.recognizer.export_) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      if (isTriggerValid(editor, 'exportContent', trigger)) {\n        const editorRef = editor;\n        window.clearTimeout(editor.exportTimer);\n        const timeout = trigger === Constants.Trigger.QUIET_PERIOD ? editor.configuration.triggerDelay : 0;\n        const delayer = PromiseHelper.delay(timeout);\n        editorRef.exportTimer = delayer.timer;\n        await delayer.promise;\n        const res = await manageResetState(editor, model);\n        if (res) {\n          return editor.recognizer.export_(editor.recognizerContext, res, requestedMimeTypes);\n        }\n        return editor.recognizer.export_(editor.recognizerContext, model, requestedMimeTypes);\n      }\n    }\n  }\n  return Promise.reject('Cannot launch export');\n}\n\n/**\n * Launch the import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {Blob} data\n * @return {Promise<*>}\n */\nasync function launchImport(editor, model, data) {\n  if (editor.recognizer && editor.recognizer.import_) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.import_(editor.recognizerContext, model, data);\n    }\n  }\n  return Promise.reject('Cannot launch import');\n}\n\n/**\n * Get the supported mimetypes for import.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchGetSupportedImportMimeTypes(editor, model) {\n  if (editor.recognizer && editor.recognizer.getSupportedImportMimeTypes) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.getSupportedImportMimeTypes(editor.recognizerContext, model);\n    }\n  }\n  return Promise.reject('Cannot launch getSupportedImportMimeTypes');\n}\n\n/**\n * Launch the convert with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} conversionState\n * @return {Promise<*>}\n */\nasync function launchConvert(editor, model, conversionState) {\n  if (editor.recognizer && editor.recognizer.convert) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.convert(editor.recognizerContext, model, conversionState);\n    }\n  }\n  return Promise.reject('Cannot launch convert');\n}\n\n/**\n * Launch the configuration for the editor\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchConfig(editor, model) {\n  if (editor.recognizer && editor.recognizer.sendConfiguration) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.sendConfiguration(editor.recognizerContext, model);\n    }\n  }\n  return Promise.reject('Cannot launch config');\n}\n\n/**\n * Launch the resize.\n * @param {Editor} editor\n * @param {Model} model\n */\nasync function launchResize(editor, model) {\n  if (editor.recognizer && editor.recognizer.resize) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      const editorRef = editor;\n      window.clearTimeout(editor.resizeTimer);\n      const delayer = PromiseHelper.delay(editor.configuration.resizeTriggerDelay);\n      editorRef.resizeTimer = delayer.timer;\n      SmartGuide.resize(editor.smartGuide);\n      await delayer.promise;\n      return editor.recognizer.resize(editor.recognizerContext, model, editor.domElement);\n    }\n  }\n  return Promise.reject('Cannot launch resize');\n}\n\n/**\n * Launch wait for idle\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchWaitForIdle(editor, model) {\n  if (editor.recognizer && editor.recognizer.waitForIdle) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.waitForIdle(editor.recognizerContext, model);\n    }\n  }\n  return Promise.reject('Cannot launch wait for idle');\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setPenStyle(editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyle) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.setPenStyle(editor.recognizerContext, model, editor.penStyle);\n    }\n  }\n  return Promise.reject('Cannot set pentStyle');\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setPenStyleClasses(editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyleClasses) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.setPenStyleClasses(editor.recognizerContext, model, editor.penStyleClasses);\n    }\n  }\n  return Promise.reject('Cannot set penStyleClasses');\n}\n\n/**\n * Set theme.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setTheme(editor, model) {\n  if (editor.recognizer && editor.recognizer.setTheme) {\n    const init = await editor.recognizerContext.initPromise;\n    if (init) {\n      return editor.recognizer.setTheme(editor.recognizerContext, model, editor.theme);\n    }\n  }\n  return Promise.reject('Cannot set theme');\n}\n\n/**\n * Editor\n */\nexport class Editor {\n  /**\n   * @param {Element} element DOM element to attach this editor\n   * @param {Configuration} [configuration] Configuration to apply\n   * @param {Theme} [theme] Custom theme to apply\n   * @param {PenStyle} [penStyle] Custom style to apply\n   * @param {Behaviors} [behaviors] Custom behaviors to apply\n   */\n  constructor(element, configuration, penStyle, theme, behaviors) {\n    const styleElement = document.createElement('style');\n    styleElement.appendChild(document.createTextNode(''));\n    element.appendChild(styleElement);\n\n    const sheet = styleElement.sheet;\n    styleElement.textContent = style;\n\n    this.sheet = sheet;\n    /**\n     * Inner reference to the DOM Element\n     * @type {Element}\n     */\n    this.domElement = element;\n    this.domElement.classList.add('ms-editor');\n\n    // eslint-disable-next-line no-undef\n    this.loader = document.createElement('div');\n    this.loader.classList.add('loader');\n    this.loader = this.domElement.appendChild(this.loader);\n\n    // eslint-disable-next-line no-undef\n    this.error = document.createElement('div');\n    this.error.classList.add('error-msg');\n    this.error = this.domElement.appendChild(this.error);\n\n    /**\n     * Launch export timer\n     * @type {Number}\n     */\n    this.exportTimer = undefined;\n\n    /**\n     * Launch resize timer\n     * @type {Number}\n     */\n    this.resizeTimer = undefined;\n\n    /**\n     * Notify delay timer\n     * @type {Number}\n     */\n    this.notifyTimer = undefined;\n\n\n    /**\n     * @private\n     * @type {Behaviors}\n     */\n    this.innerBehaviors = DefaultBehaviors.overrideDefaultBehaviors(behaviors);\n    this.configuration = configuration;\n    this.smartGuide = SmartGuide.createSmartGuide(this);\n\n    /**\n     * Pen color used only for pending stroke\n     * @type {string}\n     */\n    this.localTheme = '';\n\n    this.theme = theme;\n    this.penStyle = penStyle;\n    this.penStyleClasses = '';\n\n    this.domElement.editor = this;\n  }\n\n  /**\n   * Set the recognition parameters\n   * WARNING : Need to fire a clear if user have already input some strokes.\n   * @param {Configuration} configuration\n   */\n  set configuration(configuration) {\n    this.loader.style.display = 'initial';\n    this.error.style.display = 'none';\n    /**\n     * @private\n     * @type {Configuration}\n     */\n    this.innerConfiguration = DefaultConfiguration.overrideDefaultConfiguration(configuration);\n    this.setThemeForFont(this.innerConfiguration.recognitionParams.iink.lang);\n    this.behavior = this.behaviors.getBehaviorFromConfiguration(this.behaviors, this.innerConfiguration);\n  }\n\n  /**\n   * Get the current recognition parameters\n   * @return {Configuration}\n   */\n  get configuration() {\n    return this.innerConfiguration;\n  }\n\n  /**\n   * Set the pen style\n   * @param {PenStyle} penStyle\n   */\n  set penStyle(penStyle) {\n    /**\n     * @private\n     * @type {PenStyle}\n     */\n    this.innerPenStyle = DefaultStyles.overrideDefaultPenStyle(penStyle);\n    this.localPenStyle = this.innerPenStyle;\n    setPenStyle(this, this.model);\n  }\n\n  /**\n   * Get the pen style\n   * @return {PenStyle}\n   */\n  get penStyle() {\n    return this.innerPenStyle;\n  }\n\n  /**\n   * Set the pen style\n   * @param {String} penStyleClasses\n   */\n  set penStyleClasses(penStyleClasses) {\n    /**\n     * @private\n     * @type {String}\n     */\n    this.innerPenStyleClasses = penStyleClasses;\n    this.localPenStyle = this.theme[`.${this.innerPenStyleClasses}`];\n    setPenStyleClasses(this, this.model);\n  }\n\n  /**\n   * Get the pen style\n   * @return {String}\n   */\n  get penStyleClasses() {\n    return this.innerPenStyleClasses;\n  }\n\n  /**\n   * Set the theme\n   * @param {Theme} theme\n   */\n  set theme(theme) {\n    /**\n     * @private\n     * @type {Theme}\n     */\n    this.innerTheme = DefaultTheme.overrideDefaultTheme(theme);\n    setTheme(this, this.model)\n      .then(res => console.log(res))\n      .catch(err => console.error(err));\n  }\n\n  /**\n   * Get the theme\n   * @return {Theme}\n   */\n  get theme() {\n    return this.innerTheme;\n  }\n\n  /**\n   * Get behaviors\n   * @return {Behaviors}\n   */\n  get behaviors() {\n    return this.innerBehaviors;\n  }\n\n  /**\n   * @private\n   * @param {Behavior} behavior\n   */\n  set behavior(behavior) {\n    if (behavior) {\n      if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n        this.grabber.detach(this.domElement, this.grabberContext);\n      }\n      /**\n       * @private\n       * @type {Behavior}\n       */\n      this.innerBehavior = behavior;\n      this.renderer = this.innerBehavior.renderer;\n      this.recognizer = this.innerBehavior.recognizer;\n      /**\n       * Current grabber context\n       * @type {GrabberContext}\n       */\n      this.grabberContext = this.grabber.attach(this.domElement, this);\n    }\n  }\n\n  /**\n   * Get current behavior\n   * @return {Behavior}\n   */\n  get behavior() {\n    return this.innerBehavior;\n  }\n\n  /**\n   * Set the current recognizer\n   * @private\n   * @param {Recognizer} recognizer\n   */\n  set recognizer(recognizer) {\n    this.undoRedoContext = UndoRedoContext.createUndoRedoContext(this.configuration);\n    this.undoRedoManager = UndoRedoManager;\n\n    const initialize = (model) => {\n      /**\n       * @private\n       * @type {Recognizer}\n       */\n      this.innerRecognizer = recognizer;\n      if (this.innerRecognizer) {\n        /**\n         * Current recognition context\n         * @type {RecognizerContext}\n         */\n        this.recognizerContext = RecognizerContext.createEmptyRecognizerContext(this);\n        // FIXME: merge undo/redo manager with default recognizer\n        if (this.innerRecognizer.undo && this.innerRecognizer.redo && this.innerRecognizer.clear) {\n          this.undoRedoContext = this.recognizerContext;\n          this.undoRedoManager = this.innerRecognizer;\n        }\n\n        this.innerRecognizer.init(this.recognizerContext, model)\n          .then((values) => {\n            logger.info('Recognizer initialized !');\n            this.loader.style.display = 'none';\n          })\n          .catch(err => handleError(this, err));\n      }\n    };\n\n    if (recognizer) {\n      if (this.innerRecognizer) {\n        this.innerRecognizer.close(this.recognizerContext, this.model)\n          .then((model) => {\n            logger.info('Recognizer closed');\n            handleSuccess(this, model);\n            initialize(InkModel.clearModel(model));\n          })\n          .catch(err => handleError(this, err));\n      } else {\n        /**\n         * Current model\n         * @type {Model}\n         */\n        this.model = InkModel.createModel(this.configuration);\n\n        // INFO: Recognizer needs model to be initialized\n        initialize(this.model);\n      }\n    }\n  }\n\n  /**\n   * Get current recognizer\n   * @return {Recognizer}\n   */\n  get recognizer() {\n    return this.innerRecognizer;\n  }\n\n  /**\n   * Set the current renderer\n   * @private\n   * @param {Renderer} renderer\n   */\n  set renderer(renderer) {\n    if (renderer) {\n      if (this.innerRenderer) {\n        this.innerRenderer.detach(this.domElement, this.rendererContext);\n      }\n\n      /**\n       * @private\n       * @type {Renderer}\n       */\n      this.innerRenderer = renderer;\n      if (this.innerRenderer) {\n        /**\n         * Current rendering context\n         * @type {Object}\n         */\n        this.rendererContext = this.innerRenderer.attach(this.domElement, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth);\n      }\n    }\n  }\n\n  /**\n   * Get current renderer\n   * @return {Renderer}\n   */\n  get renderer() {\n    return this.innerRenderer;\n  }\n\n  /**\n   * Get current grabber\n   * @return {Grabber}\n   */\n  get grabber() {\n    return this.behavior ? this.behavior.grabber : undefined;\n  }\n\n  /**\n   * Get current stroker\n   * @return {Stroker}\n   */\n  get stroker() {\n    return this.behavior ? this.behavior.stroker : undefined;\n  }\n\n  /**\n   * Get current events\n   * @return {Array}\n   */\n  get emit() {\n    return this.behavior ? this.behavior.events : undefined;\n  }\n\n  /**\n   * Get a PNG image data url from the data model\n   * @return {String}\n   */\n  get png() {\n    return ImageRenderer.getImage(this.model, this.stroker);\n  }\n\n  /**\n   * True if initialized, false otherwise\n   * @return {Boolean}\n   */\n  get initialized() {\n    return this.recognizerContext ? this.recognizerContext.initialized : false;\n  }\n\n  /**\n   * Handle a pointer down\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   * @param {String} [pointerType=mouse] Current pointer type\n   * @param {String} [pointerId] Current pointer id\n   */\n  pointerDown(point, pointerType = 'pen', pointerId) {\n    logger.trace('Pointer down', point);\n    window.clearTimeout(this.notifyTimer);\n    window.clearTimeout(this.exportTimer);\n    this.model = InkModel.initPendingStroke(this.model, point, Object.assign({ pointerType, pointerId }, this.theme.ink, this.localPenStyle));\n    this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker);\n    // Currently no recognition on pointer down\n  }\n\n  /**\n   * Handle a pointer move\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerMove(point) {\n    logger.trace('Pointer move', point);\n    this.model = InkModel.appendToPendingStroke(this.model, point);\n    this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker);\n    // Currently no recognition on pointer move\n  }\n\n  /**\n   * Handle a pointer up\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerUp(point) {\n    logger.trace('Pointer up', point);\n    this.model = InkModel.endPendingStroke(this.model, point, this.penStyle);\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n\n    if (this.recognizer.addStrokes) {\n      addStrokes(this, this.model);\n    } else {\n      // Push model in undo redo manager\n      handleSuccess(this, this.model);\n    }\n  }\n\n  removeStroke(stroke) {\n    this.model.strokeGroups.forEach((group) => {\n      const stringStrokes = group.strokes.map(strokeFromGroup => JSON.stringify(strokeFromGroup));\n      const strokeIndex = stringStrokes.indexOf(JSON.stringify(stroke));\n      if (strokeIndex !== -1) {\n        group.strokes.splice(strokeIndex, 1);\n      }\n    });\n    const stringRawStrokes = this.model.rawStrokes.map(strokes => JSON.stringify(strokes));\n    const strokeIndex = stringRawStrokes.indexOf(JSON.stringify(stroke));\n    if (strokeIndex !== -1) {\n      this.model.rawStrokes.splice(strokeIndex, 1);\n    }\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n    handleSuccess(this, this.model);\n    if (!(this.configuration.triggers.exportContent === 'DEMAND')) {\n      launchExport(this, this.model);\n    }\n  }\n\n  /**\n   * @Deprecated\n   * @param rawStrokes\n   * @param strokeGroups\n   */\n  reDraw(rawStrokes, strokeGroups) {\n    rawStrokes.forEach((stroke) => {\n      InkModel.addStroke(this.model, stroke);\n    });\n    strokeGroups.forEach((group) => {\n      group.strokes.forEach((strokeFromGroup) => {\n        InkModel.addStrokeToGroup(this.model, strokeFromGroup, group.penStyle);\n      });\n    });\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker);\n    handleSuccess(this, this.model);\n  }\n\n  /**\n   * True if idle state\n   * @return {Boolean}\n   */\n  get idle() {\n    return this.recognizerContext.idle;\n  }\n\n  /**\n   * Wait for idle state.\n   * @return {Promise<*>}\n   */\n  waitForIdle() {\n    emitEvents(this, undefined, Constants.EventType.IDLE);\n    return launchWaitForIdle(this, this.model);\n  }\n\n  /**\n   * True if can undo, false otherwise.\n   * @return {Boolean}\n   */\n  get canUndo() {\n    return this.undoRedoContext.canUndo;\n  }\n\n  /**\n   * Undo the last action.\n   * @return {Promise<*>}\n   */\n  async undo() {\n    logger.debug('Undo current model', this.model);\n    emitEvents(this, undefined, Constants.EventType.UNDO);\n    const { res, types } = await this.undoRedoManager.undo(this.undoRedoContext, this.model)\n      .catch(err => handleError(this, err));\n    manageRecognizedModel(this, res, ...types);\n    return res;\n  }\n\n  /**\n   * True if can redo, false otherwise.\n   * @return {Boolean}\n   */\n  get canRedo() {\n    return this.undoRedoContext.canRedo;\n  }\n\n  /**\n   * Redo the last action.\n   * @return {Promise<*>}\n   */\n  async redo() {\n    logger.debug('Redo current model', this.model);\n    emitEvents(this, undefined, Constants.EventType.REDO);\n    const { res, types } = await this.undoRedoManager.redo(this.undoRedoContext, this.model)\n      .catch(err => handleError(this, err));\n    manageRecognizedModel(this, res, ...types);\n    return res;\n  }\n\n  /**\n   * True if empty, false otherwise\n   * @return {boolean}\n   */\n  get isEmpty() {\n    return this.recognizerContext.isEmpty;\n  }\n\n  /**\n   * True if can clear, false otherwise.\n   * @return {Boolean}\n   */\n  get canClear() {\n    return this.canUndo && !this.isEmpty;\n  }\n\n  /**\n   * Clear the output and the recognition result.\n   * @return {Promise<*>}\n   */\n  async clear() {\n    if (this.canClear) {\n      logger.debug('Clear current model', this.model);\n      emitEvents(this, undefined, Constants.EventType.CLEAR);\n      const { res, events } = await this.recognizer.clear(this.recognizerContext, this.model)\n        .catch(error => handleError(this, error));\n      handleSuccess(this, res, ...events);\n      return res;\n    }\n    return Promise.reject('Cannot launch clear');\n  }\n\n  /**\n   * True if can convert, false otherwise.\n   * @return {Boolean}\n   */\n  get canConvert() {\n    return !!(this.canUndo && this.canClear && this.recognizer && this.recognizer.convert);\n  }\n\n  /**\n   * Convert the current content\n   * @param {string} conversionState\n   * @return {Promise<*>}\n   */\n  convert(conversionState = 'DIGITAL_EDIT') {\n    if (this.canConvert) {\n      emitEvents(this, undefined, Constants.EventType.CONVERT);\n      return launchConvert(this, this.model, conversionState);\n    }\n    return Promise.reject('Cannot launch convert');\n  }\n\n  /**\n   * Set the guides for text\n   * @param {Boolean} [enable]\n   * @return {Promise<*|null>}\n   */\n  setGuides(enable = true) {\n    this.configuration.recognitionParams.iink.text.guides.enable = enable;\n    return launchConfig(this, this.model);\n  }\n\n  /**\n   * Return the position of the cursor identifying the current state in the internal iink undo/redo stack.\n   * @returns {Number}\n   */\n  get possibleUndoCount() {\n    return this.recognizerContext.possibleUndoCount;\n  }\n\n  /**\n   * The number of operations that it is currently possible to undo.\n   * @returns {Number}\n   */\n  get undoStackIndex() {\n    return this.recognizerContext.undoStackIndex;\n  }\n\n  /**\n   * True if can export, false otherwise.\n   * @return {Boolean}\n   */\n  get canExport() {\n    return this.canUndo && this.canClear && this.recognizer && this.recognizer.getInfo().availableTriggers.exportContent.includes(Constants.Trigger.DEMAND);\n  }\n\n  /**\n   * Explicitly ask to perform an export. You have to listen to events to get the content as this function is non blocking and does not have a return type.\n   * @param {Array<String>} requestedMimeTypes Requested mime-types. Be sure to ask all the types required by the listeners of exported event.\n   */\n  export_(requestedMimeTypes) {\n    if (this.canExport) {\n      emitEvents(this, undefined, Constants.EventType.EXPORT);\n      return launchExport(this, this.model, requestedMimeTypes, Constants.Trigger.DEMAND);\n    }\n    return Promise.reject('Cannot launch export');\n  }\n\n  /**\n   * Import content.\n   * @param {Blob|*} data Data to import\n   * @param {String} [mimetype] Mimetype of the data, needed if data is not a Blob\n   */\n  import_(data, mimetype) {\n    emitEvents(this, undefined, Constants.EventType.IMPORT);\n    return launchImport(this, this.model, !(data instanceof Blob) ? new Blob([data], { type: mimetype }) : data);\n  }\n\n  /**\n   * Get supported import mime types\n   * @return {Promise<*|null>}\n   */\n  getSupportedImportMimeTypes() {\n    return launchGetSupportedImportMimeTypes(this, this.model);\n  }\n\n  /**\n   * pointer events\n   * @param {PointerEvents} events\n   * @return {Promise<*|null>}\n   */\n  pointerEvents(events) {\n    return launchPointerEvents(this, this.model, events);\n  }\n\n  /**\n   * Get current state exports\n   * @return {Object}\n   */\n  get exports() {\n    return this.model ? this.model.exports : undefined;\n  }\n\n  get supportedImportMimeTypes() {\n    return this.recognizerContext.supportedImportMimeTypes;\n  }\n\n  /**\n   * Function to call when the dom element link to the current ink paper has been resize.\n   */\n  resize() {\n    logger.debug('Resizing editor');\n    this.renderer.resize(this.rendererContext, this.model, this.stroker, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth);\n    return launchResize(this, this.model);\n  }\n\n  /**\n   * Set the theme (font family, font size and line height) depending on the language\n   * @param lang\n   */\n  setThemeForFont(lang) {\n    const defaultLang = !Object.keys(Constants.Languages).includes(lang);\n    const armenian = lang === 'hy_AM';\n    const fontFamily = defaultLang || armenian ? Constants.Languages.default : Constants.Languages[lang];\n    const lineHeight = defaultLang || armenian ? '1.2' : '1.8';\n    this.theme = {\n      '.text': {\n        'font-family': fontFamily,\n        'line-height': lineHeight\n      }\n    };\n  }\n\n  /**\n   * Detach event listeners from the DOM element created at editor creation.\n   */\n  unload() {\n    if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n      this.grabber.detach(this.domElement, this.grabberContext);\n    }\n    if (this.innerRenderer) {\n      this.innerRenderer.detach(this.domElement, this.rendererContext);\n    }\n  }\n\n  /**\n   * Trigger the change callbacks (and by default send a change event).\n   */\n  forceChange() {\n    emitEvents(this, undefined, Constants.EventType.CHANGED);\n  }\n\n  /* eslint-disable class-methods-use-this */\n  /**\n   * Get access to some easter egg features link ink injection. Use at your own risk (less tested and may be removed without notice).\n   */\n  get eastereggs() {\n    return eastereggs;\n  }\n  /* eslint-enable class-methods-use-this */\n}\n","import { editorLogger as logger } from './LoggerConfig';\nimport * as PointerEventGrabber from '../grabber/PointerEventGrabber';\nimport * as CanvasRenderer from '../renderer/canvas/CanvasRenderer';\nimport * as QuadraticCanvasStroker from '../renderer/canvas/stroker/QuadraticCanvasStroker';\nimport * as SVGRenderer from '../renderer/svg/SVGRenderer';\nimport * as QuadraticSVGStroker from '../renderer/svg/stroker/QuadraticSVGStroker';\nimport * as iinkRestRecognizer from '../recognizer/rest/iinkRestRecognizer';\nimport * as iinkWsRecognizer from '../recognizer/websocket/IInkWsRecognizer';\nimport emit from '../event/Event';\n\n/**\n * Current behavior\n * @typedef {Object} Behavior\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Stroker} stroker Stroker to draw stroke\n * @property {Renderer} renderer Renderer to draw on the editor\n * @property {Recognizer} recognizer Recognizer to call the recognition service\n * @property {Array} events Functions to handle model changes\n */\n\n/**\n * Set of behaviors to be used by the {@link Editor}\n * @typedef {Object} Behaviors\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Array<Stroker>} strokerList List of stroker to draw stroke\n * @property {Array<Renderer>} rendererList List of renderer to draw on the editor\n * @property {Array<Recognizer>} recognizerList Recognizers to call the recognition service\n * @property {function} getBehaviorFromConfiguration Get the current behavior to use regarding the current configuration\n * @property {Array} events Functions to handle model changes\n */\n\n/**\n * Default behaviors\n * @type {Behaviors}\n */\nexport const defaultBehaviors = {\n  grabber: PointerEventGrabber,\n  strokerList: [QuadraticCanvasStroker, QuadraticSVGStroker],\n  rendererList: [CanvasRenderer, SVGRenderer],\n  recognizerList: [iinkRestRecognizer, iinkWsRecognizer],\n  events: emit,\n  getBehaviorFromConfiguration: (behaviors, configuration) => {\n    const behavior = {};\n    behavior.grabber = behaviors.grabber;\n    if (configuration) {\n      if (configuration.recognitionParams.protocol === 'REST') {\n        behavior.stroker = QuadraticCanvasStroker;\n        behavior.renderer = CanvasRenderer;\n        behavior.recognizer = iinkRestRecognizer;\n      } else {\n        behavior.stroker = QuadraticSVGStroker;\n        behavior.renderer = SVGRenderer;\n        behavior.recognizer = iinkWsRecognizer;\n      }\n    }\n    behavior.events = behaviors.events;\n    return behavior;\n  }\n};\n\n/**\n * Generate behaviors\n * @param {Behaviors} behaviors Behaviors to be used\n * @return {Behaviors} Overridden behaviors\n */\nexport function overrideDefaultBehaviors(behaviors) {\n  if (behaviors) {\n    const currentBehaviors = {\n      grabber: behaviors.grabber || defaultBehaviors.grabber,\n      rendererList: behaviors.rendererList || defaultBehaviors.rendererList,\n      strokerList: behaviors.strokerList || defaultBehaviors.strokerList,\n      recognizerList: behaviors.recognizerList || defaultBehaviors.recognizerList,\n      events: behaviors.events || defaultBehaviors.events,\n      getBehaviorFromConfiguration: behaviors.getBehaviorFromConfiguration || defaultBehaviors.getBehaviorFromConfiguration\n    };\n    logger.debug('Override default behaviors', currentBehaviors);\n    return currentBehaviors;\n  }\n  return defaultBehaviors;\n}\n\nexport default defaultBehaviors;\n","import Constants from '../configuration/Constants';\nimport { recognizerLogger as logger } from '../configuration/LoggerConfig';\nimport * as InkModel from '../model/InkModel';\nimport * as SmartGuide from '../smartguide/SmartGuide';\nimport * as RecognizerContext from '../model/RecognizerContext';\nimport { launchExport } from '../Editor';\n\n/**\n * Emit events\n * @param {Editor} editor\n * @param {Object} data\n * @param {...String} types\n * @return {Model}\n */\nexport function emitEvents(editor, data, ...types) {\n  const editorRef = editor;\n  types.forEach((type) => {\n    switch (type) {\n      case Constants.EventType.RENDERED:\n        break; // Internal use only\n      case Constants.EventType.UNDO:\n      case Constants.EventType.REDO:\n      case Constants.EventType.CLEAR:\n      case Constants.EventType.CONVERT:\n      case Constants.EventType.EXPORT:\n        editor.emit.call(editor.domElement, type);\n        break;\n      case Constants.EventType.LOADED:\n      case Constants.EventType.CHANGED:\n        editor.emit.call(editor.domElement, type, {\n          initialized: editor.initialized,\n          canUndo: editor.canUndo,\n          canRedo: editor.canRedo,\n          canClear: editor.canClear,\n          isEmpty: editor.isEmpty,\n          possibleUndoCount: editor.possibleUndoCount,\n          undoStackIndex: editor.undoStackIndex,\n          canConvert: editor.canConvert,\n          canExport: editor.canExport\n        });\n        break;\n      case Constants.EventType.EXPORTED:\n        window.clearTimeout(editorRef.notifyTimer);\n        editorRef.notifyTimer = window.setTimeout(() => {\n          editor.emit.call(editor.domElement, type, {\n            exports: editor.exports\n          });\n        }, editorRef.configuration.processDelay);\n        break;\n      case Constants.EventType.SUPPORTED_IMPORT_MIMETYPES:\n        editor.emit.call(editor.domElement, type, {\n          mimeTypes: editor.supportedImportMimeTypes\n        });\n        break;\n      case Constants.EventType.ERROR:\n        editor.emit.call(editor.domElement, type, data);\n        break;\n      case Constants.EventType.IDLE:\n        editor.emit.call(editor.domElement, type, {\n          idle: editor.idle\n        });\n        break;\n      default:\n        logger.debug(`No valid trigger configured for ${type}`);\n        break;\n    }\n  });\n}\n\n/**\n * Manage recognized model\n * @param {Editor} editor\n * @param {Model} model\n * @param {...String} types\n */\nexport function manageRecognizedModel(editor, model, ...types) {\n  const editorRef = editor;\n  const modelRef = model;\n  logger.debug(`model changed callback on ${types} event(s)`, model);\n  if (modelRef.creationTime === editor.model.creationTime) {\n    // Merge recognized model if relevant and return current editor model\n    if ((modelRef.rawStrokes.length === editor.model.rawStrokes.length) &&\n      (modelRef.lastPositions.lastSentPosition >= editor.model.lastPositions.lastReceivedPosition)) {\n      editorRef.model = InkModel.mergeModels(editorRef.model, modelRef);\n      if (InkModel.needRedraw(editorRef.model) || types.includes(Constants.EventType.RENDERED)) {\n        editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker);\n      }\n    } else {\n      editorRef.model = modelRef;\n      editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker);\n    }\n    emitEvents(editor, undefined, ...types);\n  }\n\n  if (editor.configuration.recognitionParams.type === 'TEXT'\n    && editor.configuration.recognitionParams.protocol !== 'REST'\n    && editor.configuration.recognitionParams.iink.text.mimeTypes.includes(Constants.Exports.JIIX)\n    && editor.configuration.recognitionParams.iink.text.smartGuide) {\n    // eslint-disable-next-line no-use-before-define\n    editorRef.smartGuide = SmartGuide.launchSmartGuide(editor.smartGuide, modelRef.exports);\n  }\n\n  if ((InkModel.extractPendingStrokes(model).length > 0) &&\n    (!editor.recognizer.addStrokes) && // FIXME: Ugly hack to avoid double export (addStrokes + export)\n    (editor.configuration.triggers.exportContent !== Constants.Trigger.DEMAND)) {\n    launchExport(editor, model);\n  }\n}\n\n/**\n * Method called when server respond with an error\n * Use in catch on Promises\n * @param {Editor} editor\n * @param {Object} err\n * @param {...String} events\n */\nexport function handleError(editor, err, ...events) {\n  const editorRef = editor;\n  if (err.type !== 'close') {\n    logger.error('Error while firing the recognition', err.stack || err); // Handle any error from all above steps\n  }\n  if (\n    // IInk error managment before refactor\n    (err.message === 'Invalid application key.') || (err.message === 'Invalid HMAC') ||\n    // CDK error managment\n    (err.error &&\n      err.error.result &&\n      err.error.result.error &&\n      (err.error.result.error === 'InvalidApplicationKeyException' || err.error.result.error === 'InvalidHMACSignatureException')) ||\n    // IInk error managment after refactor\n    (err.code && err.code === 'access.not.granted')) {\n    editorRef.error.innerText = Constants.Error.WRONG_CREDENTIALS;\n  } else if (err.message === 'Session is too old. Max Session Duration Reached.' ||\n    (err.code && err.code === 'session.too.old')) {\n    editorRef.error.innerText = Constants.Error.TOO_OLD;\n  } else if ((err.code === 1006 || err.code === 1000) && editorRef.error.style.display === 'none') {\n    editorRef.error.innerText = Constants.Error.NOT_REACHABLE;\n  }\n  if ((editorRef.error.innerText === Constants.Error.TOO_OLD || err.reason === 'CLOSE_RECOGNIZER') && RecognizerContext.canReconnect(editor.recognizerContext)) {\n    logger.info('Reconnection is available', err.stack || err);\n    editorRef.error.style.display = 'none';\n  } else {\n    editorRef.loader.style.display = 'none';\n    editorRef.error.style.display = 'initial';\n    emitEvents(editor, err, Constants.EventType.ERROR, ...events);\n  }\n}\n\n/**\n * Method called when server respond correctly to request or WS\n * Use in then on Promises\n * @param {Editor} editor\n * @param {Object} model\n * @param {...String} events\n */\nexport function handleSuccess(editor, model, ...events) {\n  const editorRef = editor;\n  if (editor.undoRedoManager.updateModel) {\n    editor.undoRedoManager.updateModel(editor.undoRedoContext, model)\n      .then(({ res, types }) => {\n        manageRecognizedModel(editorRef, res, ...[...events, ...types].filter((el, i, a) => i === a.indexOf(el)));\n      });\n  } else {\n    if (editorRef.error.style.display === 'initial') {\n      editorRef.error.style.display = 'none';\n    }\n    manageRecognizedModel(editorRef, model, ...events);\n  }\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig';\nimport * as InkModel from '../model/InkModel';\nimport * as RecognizerContext from '../model/RecognizerContext';\nimport Constants from '../configuration/Constants';\nimport { handleSuccess } from './RecognizerService';\n\n/**\n * Triggers\n * @typedef {Object} Triggers\n * @property {Array<String>} exportContent Supported triggers for exporting content.\n * @property {Array<String>} [addStrokes] Supported triggers for adding strokes.\n */\n\n/**\n * Recognizer info\n * @typedef {Object} RecognizerInfo\n * @property {Array<String>} types Supported recognition types (TEXT, MATH, SHAPE, MUSIC, ANALYZER).\n * @property {String} protocol Supported protocol (REST, WEBSOCKET).\n * @property {String} apiVersion Supported API version.\n * @property {Triggers} availableTriggers Supported triggers for this recognizer.\n */\n\n/**\n * Recognizer callback\n * @typedef {function} RecognizerCallback\n * @param {Object} [err] Error\n * @param {Model} [model] Result\n * @param {...String} [types] Result types\n */\n\n/**\n * Simple callback\n * @typedef {function} Callback\n * @param {Object} [err] Error\n * @param {Object} [res] Result\n */\n\n/**\n * Recognition service entry point\n * @typedef {Object} Recognizer\n * @property {function} getInfo Get information about the supported configuration (protocol, type, apiVersion, ...).\n * @property {function} init Initialize recognition.\n * @property {function} clear Clear server context. Currently nothing to do there.\n * @property {function} close Close and free all resources that will no longer be used by the recognizer.\n * @property {function} [undo] Undo Undo the last done action.\n * @property {function} [redo] Redo Redo the previously undone action.\n * @property {function} [resize] Resize.\n * @property {function} [pointerEvents] Pointer Events.\n * @property {function} [addStrokes] Add strokes.\n * @property {function} [export_] Export content.\n * @property {function} [import_] Import content.\n * @property {function} [convert] Convert.\n * @property {function} [waitForIdle] Wait for idle.\n * @property {function} [setPenStyle] Set pen style.\n * @property {function} [setPenStyleClasses] Set pen style classes.\n * @property {function} [setTheme] Set theme.\n */\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function init(recognizerContext, model) {\n  const modelRef = InkModel.resetModelPositions(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  recognizerContextRef.initPromise = Promise.resolve(modelRef);\n  return recognizerContextRef.initPromise\n    .then((res) => {\n      recognizerContextRef.initialized = true;\n      logger.debug('Updated recognizer context', recognizerContextRef);\n      handleSuccess(recognizerContextRef.editor, res, Constants.EventType.LOADED);\n      return res;\n    });\n}\n\n/**\n * Reset server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function reset(recognizerContext, model) {\n  const modelRef = InkModel.resetModelPositions(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  delete recognizerContextRef.instanceId;\n  logger.debug('Updated recognizer context', recognizerContextRef);\n  return Promise.resolve({\n    res: modelRef,\n  });\n}\n\n/**\n * Clear server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function clear(recognizerContext, model) {\n  const modelRef = InkModel.clearModel(model);\n  logger.debug('Updated model', modelRef);\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  delete recognizerContextRef.instanceId;\n  logger.debug('Updated recognizer context', recognizerContextRef);\n  return Promise.resolve({\n    err: undefined,\n    res: modelRef,\n    events: [Constants.EventType.CHANGED, Constants.EventType.EXPORTED, Constants.EventType.RENDERED]\n  });\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function close(recognizerContext, model) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.initialized = false;\n  delete recognizerContextRef.instanceId;\n  return Promise.resolve(model);\n}\n","/* eslint-disable no-underscore-dangle */\nimport * as NetworkInterface from './networkInterface';\nimport * as RecognizerContext from '../../model/RecognizerContext';\nimport { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport Constants from '../../configuration/Constants';\nimport * as InkModel from '../../model/InkModel';\nimport * as StrokeComponent from '../../model/StrokeComponent';\nimport * as DefaultTheme from '../../configuration/DefaultTheme';\nimport * as DefaultPenStyle from '../../configuration/DefaultPenStyle';\nimport { handleError, handleSuccess } from '../RecognizerService';\n\nexport { init, close, clear, reset } from '../DefaultRecognizer';\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const iinkRestConfiguration = {\n  types: [Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.MATH, Constants.RecognitionType.RAWCONTENT],\n  protocol: Constants.Protocol.REST,\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return iinkRestConfiguration;\n}\n\n\n/**\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @param {function} buildMessage\n * @param {String} conversionState\n * @param {String} mimeType\n * @return {Promise.<Model>} Promise that return an updated model as a result\n */\nexport function postMessage(suffixUrl, recognizerContext, model, buildMessage, conversionState = '', mimeType) {\n  const configuration = recognizerContext.editor.configuration;\n  return NetworkInterface.post(recognizerContext, `${configuration.recognitionParams.server.scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`, buildMessage(recognizerContext, model, conversionState), 'V4', mimeType)\n    .then((response) => {\n      logger.debug('iinkRestRecognizer success', response);\n      const positions = recognizerContext.lastPositions;\n      positions.lastReceivedPosition = positions.lastSentPosition;\n      const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, positions);\n      if (response.instanceId) {\n        recognizerContextReference.instanceId = response.instanceId;\n      }\n      return response;\n    });\n}\n\nfunction buildTextConf(configuration) {\n  return {\n    text: configuration.recognitionParams.iink.text,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  };\n}\n\nfunction buildMathConf(configuration) {\n  return {\n    math: configuration.recognitionParams.iink.math,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  };\n}\n\nfunction buildDiagramConf(configuration) {\n  return {\n    diagram: configuration.recognitionParams.iink.diagram,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  };\n}\n\nfunction buildRawContentConf(configuration) {\n  return {\n    'raw-content': {\n      recognition: configuration.recognitionParams.iink['raw-content'].recognition\n    },\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  };\n}\n\nfunction buildData(recognizerContext, model, conversionState) {\n  const configuration = recognizerContext.editor.configuration;\n  let dataConf;\n\n  if (configuration.recognitionParams.type === 'TEXT') {\n    dataConf = buildTextConf(configuration);\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    dataConf = buildMathConf(configuration);\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    dataConf = buildDiagramConf(configuration);\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    dataConf = buildRawContentConf(configuration);\n  }\n\n  const newStrokes = [];\n  model.strokeGroups.forEach((group) => {\n    const newPenStyle = JSON.stringify(group.penStyle) === '{}' ? null : DefaultPenStyle.toCSS(group.penStyle);\n    const newGroup = {\n      penStyle: newPenStyle,\n      strokes: group.strokes.map(stroke => StrokeComponent.toJSON(stroke))\n    };\n    newStrokes.push(newGroup);\n  });\n\n  const contentType = configuration.recognitionParams.type === 'Raw Content' ? 'Raw Content' : configuration.recognitionParams.type.charAt(0)\n    .toUpperCase() + configuration.recognitionParams.type.slice(1)\n    .toLowerCase();\n\n  const data = {\n    configuration: dataConf,\n    xDPI: 96,\n    yDPI: 96,\n    contentType,\n    theme: DefaultTheme.toCSS(recognizerContext.editor.theme),\n    strokeGroups: newStrokes\n  };\n\n  if (recognizerContext.editor.domElement) {\n    data.height = recognizerContext.editor.domElement.clientHeight;\n    data.width = recognizerContext.editor.domElement.clientWidth;\n  }\n\n  if (conversionState) {\n    data.conversionState = 'DIGITAL_EDIT';\n  }\n\n  InkModel.updateModelSentPosition(model);\n  return data;\n}\n\nfunction extractExports(configuration, mimeType, res) {\n  const exports = {};\n  exports[mimeType] = res;\n  return exports;\n}\n\nfunction resultCallback(recognizerContext, model, configuration, res, mimeType) {\n  logger.debug('iinkRestRecognizer result callback', model);\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  modelReference.rawResults.exports = res;\n  if (modelReference.exports) {\n    Object.assign(modelReference.exports, extractExports(configuration, mimeType, res));\n  } else {\n    modelReference.exports = extractExports(configuration, mimeType, res);\n  }\n  logger.debug('iinkRestRecognizer model updated', modelReference);\n\n  if (recognizerContext.editor.undoRedoManager) {\n    handleSuccess(recognizerContext.editor, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE);\n  }\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {Array} requestedMimeTypes\n */\nexport function export_(recognizerContext, model, requestedMimeTypes) {\n  const configuration = recognizerContext.editor.configuration;\n\n  function callPostMessage(mimeType) {\n    return postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, configuration.restConversionState, mimeType)\n      .then((res) => {\n        resultCallback(recognizerContext, model, configuration, res, mimeType);\n        return model;\n      })\n      .catch((err) => {\n        handleError(recognizerContext.editor, err);\n        return err;\n      });\n  }\n\n  if (requestedMimeTypes) {\n    return Promise.all(requestedMimeTypes.map(mimeType => callPostMessage(mimeType)));\n  } else if (configuration.recognitionParams.type === 'TEXT') {\n    return Promise.all(configuration.recognitionParams.iink.text.mimeTypes.map(mimeType => callPostMessage(mimeType)));\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    return Promise.all(configuration.recognitionParams.iink.diagram.mimeTypes.map(mimeType => callPostMessage(mimeType)));\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    return Promise.all(configuration.recognitionParams.iink.math.mimeTypes.map(mimeType => callPostMessage(mimeType)));\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    return Promise.all(configuration.recognitionParams.iink['raw-content'].mimeTypes.map(mimeType => callPostMessage(mimeType)));\n  }\n  return Promise.reject();\n}\n\n/**\n * Ask for conversion using DIGITAL_EDIT\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n */\nexport function convert(recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration;\n  postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, 'DIGITAL_EDIT')\n    .then(res => resultCallback(model, configuration, res))\n    .catch(err => handleError(recognizerContext.editor, err));\n}\n","/*\n * UUID-js: A js library to generate and parse UUIDs, TimeUUIDs and generate\n * TimeUUID based on dates for range selections.\n * @see http://www.ietf.org/rfc/rfc4122.txt\n **/\n\nfunction UUIDjs() {\n};\n\nUUIDjs.maxFromBits = function(bits) {\n  return Math.pow(2, bits);\n};\n\nUUIDjs.limitUI04 = UUIDjs.maxFromBits(4);\nUUIDjs.limitUI06 = UUIDjs.maxFromBits(6);\nUUIDjs.limitUI08 = UUIDjs.maxFromBits(8);\nUUIDjs.limitUI12 = UUIDjs.maxFromBits(12);\nUUIDjs.limitUI14 = UUIDjs.maxFromBits(14);\nUUIDjs.limitUI16 = UUIDjs.maxFromBits(16);\nUUIDjs.limitUI32 = UUIDjs.maxFromBits(32);\nUUIDjs.limitUI40 = UUIDjs.maxFromBits(40);\nUUIDjs.limitUI48 = UUIDjs.maxFromBits(48);\n\n// Returns a random integer between min and max\n// Using Math.round() will give you a non-uniform distribution!\n// @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nUUIDjs.randomUI04 = function() {\n  return getRandomInt(0, UUIDjs.limitUI04-1);\n};\nUUIDjs.randomUI06 = function() {\n  return getRandomInt(0, UUIDjs.limitUI06-1);\n};\nUUIDjs.randomUI08 = function() {\n  return getRandomInt(0, UUIDjs.limitUI08-1);\n};\nUUIDjs.randomUI12 = function() {\n  return getRandomInt(0, UUIDjs.limitUI12-1);\n};\nUUIDjs.randomUI14 = function() {\n  return getRandomInt(0, UUIDjs.limitUI14-1);\n};\nUUIDjs.randomUI16 = function() {\n  return getRandomInt(0, UUIDjs.limitUI16-1);\n};\nUUIDjs.randomUI32 = function() {\n  return getRandomInt(0, UUIDjs.limitUI32-1);\n};\nUUIDjs.randomUI40 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 40 - 30)) * (1 << 30);\n};\nUUIDjs.randomUI48 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 48 - 30)) * (1 << 30);\n};\n\nUUIDjs.paddedString = function(string, length, z) {\n  string = String(string);\n  z = (!z) ? '0' : z;\n  var i = length - string.length;\n  for (; i > 0; i >>>= 1, z += z) {\n    if (i & 1) {\n      string = z + string;\n    }\n  }\n  return string;\n};\n\nUUIDjs.prototype.fromParts = function(timeLow, timeMid, timeHiAndVersion, clockSeqHiAndReserved, clockSeqLow, node) {\n  this.version = (timeHiAndVersion >> 12) & 0xF;\n  this.hex = UUIDjs.paddedString(timeLow.toString(16), 8)\n             + '-'\n             + UUIDjs.paddedString(timeMid.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(timeHiAndVersion.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(clockSeqHiAndReserved.toString(16), 2)\n             + UUIDjs.paddedString(clockSeqLow.toString(16), 2)\n             + '-'\n             + UUIDjs.paddedString(node.toString(16), 12);\n  return this;\n};\n\nUUIDjs.prototype.toString = function() {\n  return this.hex;\n};\nUUIDjs.prototype.toURN = function() {\n  return 'urn:uuid:' + this.hex;\n};\n\nUUIDjs.prototype.toBytes = function() {\n  var parts = this.hex.split('-');\n  var ints = [];\n  var intPos = 0;\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i].length; j+=2) {\n      ints[intPos++] = parseInt(parts[i].substr(j, 2), 16);\n    }\n  }\n  return ints;\n};\n\nUUIDjs.prototype.equals = function(uuid) {\n  if (!(uuid instanceof UUID)) {\n    return false;\n  }\n  if (this.hex !== uuid.hex) {\n    return false;\n  }\n  return true;\n};\n\nUUIDjs.getTimeFieldValues = function(time) {\n  var ts = time - Date.UTC(1582, 9, 15);\n  var hm = ((ts / 0x100000000) * 10000) & 0xFFFFFFF;\n  return { low: ((ts & 0xFFFFFFF) * 10000) % 0x100000000,\n            mid: hm & 0xFFFF, hi: hm >>> 16, timestamp: ts };\n};\n\nUUIDjs._create4 = function() {\n  return new UUIDjs().fromParts(\n    UUIDjs.randomUI32(),\n    UUIDjs.randomUI16(),\n    0x4000 | UUIDjs.randomUI12(),\n    0x80   | UUIDjs.randomUI06(),\n    UUIDjs.randomUI08(),\n    UUIDjs.randomUI48()\n  );\n};\n\nUUIDjs._create1 = function() {\n  var now = new Date().getTime();\n  var sequence = UUIDjs.randomUI14();\n  var node = (UUIDjs.randomUI08() | 1) * 0x10000000000 + UUIDjs.randomUI40();\n  var tick = UUIDjs.randomUI04();\n  var timestamp = 0;\n  var timestampRatio = 1/4;\n\n  if (now != timestamp) {\n    if (now < timestamp) {\n      sequence++;\n    }\n    timestamp = now;\n    tick = UUIDjs.randomUI04();\n  } else if (Math.random() < timestampRatio && tick < 9984) {\n    tick += 1 + UUIDjs.randomUI04();\n  } else {\n    sequence++;\n  }\n\n  var tf = UUIDjs.getTimeFieldValues(timestamp);\n  var tl = tf.low + tick;\n  var thav = (tf.hi & 0xFFF) | 0x1000;\n\n  sequence &= 0x3FFF;\n  var cshar = (sequence >>> 8) | 0x80;\n  var csl = sequence & 0xFF;\n\n  return new UUIDjs().fromParts(tl, tf.mid, thav, cshar, csl, node);\n};\n\nUUIDjs.create = function(version) {\n  version = version || 4;\n  return this['_create' + version]();\n};\n\nUUIDjs.fromTime = function(time, last) {\n  last = (!last) ? false : last;\n  var tf = UUIDjs.getTimeFieldValues(time);\n  var tl = tf.low;\n  var thav = (tf.hi & 0xFFF) | 0x1000;  // set version '0001'\n  if (last === false) {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0, 0, 0);\n  } else {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0x80 | UUIDjs.limitUI06, UUIDjs.limitUI08 - 1, UUIDjs.limitUI48 - 1);\n  }\n};\n\nUUIDjs.firstFromTime = function(time) {\n  return UUIDjs.fromTime(time, false);\n};\nUUIDjs.lastFromTime = function(time) {\n  return UUIDjs.fromTime(time, true);\n};\n\nUUIDjs.fromURN = function(strId) {\n  var r, p = /^(?:urn:uuid:|\\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\\})?$/i;\n  if ((r = p.exec(strId))) {\n    return new UUIDjs().fromParts(parseInt(r[1], 16), parseInt(r[2], 16),\n                            parseInt(r[3], 16), parseInt(r[4], 16),\n                            parseInt(r[5], 16), parseInt(r[6], 16));\n  }\n  return null;\n};\n\nUUIDjs.fromBytes = function(ints) {\n  if (ints.length < 5) {\n    return null;\n  }\n  var str = '';\n  var pos = 0;\n  var parts = [4, 2, 2, 2, 6];\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i]; j++) {\n      var octet = ints[pos++].toString(16);\n      if (octet.length == 1) {\n        octet = '0' + octet;\n      }\n      str += octet;\n    }\n    if (parts[i] !== 6) {\n      str += '-';\n    }\n  }\n  return UUIDjs.fromURN(str);\n};\n\nUUIDjs.fromBinary = function(binary) {\n  var ints = [];\n  for (var i = 0; i < binary.length; i++) {\n    ints[i] = binary.charCodeAt(i);\n    if (ints[i] > 255 || ints[i] < 0) {\n      throw new Error('Unexpected byte in binary data.');\n    }\n  }\n  return UUIDjs.fromBytes(ints);\n};\n\n// Aliases to support legacy code. Do not use these when writing new code as\n// they may be removed in future versions!\nUUIDjs.new = function() {\n  return this.create(4);\n};\nUUIDjs.newTS = function() {\n  return this.create(1);\n};\n\nmodule.exports = UUIDjs;\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport * as RecognizerContext from '../../model/RecognizerContext';\n\nfunction infinitePing(websocket) {\n  const websocketRef = websocket;\n  websocketRef.pingLostCount++;\n  if (websocketRef.pingLostCount > websocketRef.maxPingLost) {\n    websocket.close(1000, 'PING_LOST');\n  } else if (websocketRef.readyState <= 1) {\n    setTimeout(() => {\n      if (websocketRef.readyState <= 1) {\n        websocketRef.send(JSON.stringify({ type: 'ping' }));\n        infinitePing(websocketRef);\n      }\n    }, websocketRef.pingDelay);\n  }\n}\n\n/**\n * Attach all socket attributes helping managing server connexion\n * @param {WebSocket} websocket Current WebSocket\n * @param {RecognizerContext} recognizerContext\n */\nfunction addWebsocketAttributes(websocket, recognizerContext) {\n  const websocketConfiguration = recognizerContext.editor.configuration.recognitionParams.server.websocket;\n  const socket = websocket;\n  socket.start = new Date();\n  socket.autoReconnect = websocketConfiguration.autoReconnect;\n  socket.maxRetryCount = websocketConfiguration.maxRetryCount;\n  socket.pingEnabled = websocketConfiguration.pingEnabled;\n  socket.pingDelay = websocketConfiguration.pingDelay;\n  socket.maxPingLost = websocketConfiguration.maxPingLostCount;\n  socket.pingLostCount = 0;\n  socket.recognizerContext = recognizerContext;\n}\n\n/**\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @return {WebSocket} Opened WebSocket\n */\nexport function openWebSocket(recognizerContext) {\n  let socket;\n  try {\n    // eslint-disable-next-line no-undef\n    socket = new WebSocket(recognizerContext.url);\n  } catch (error) {\n    logger.error('Unable to open websocket, Check the host and your connectivity');\n  }\n  addWebsocketAttributes(socket, recognizerContext);\n  if (socket.pingEnabled) {\n    infinitePing(socket);\n  }\n\n  socket.onopen = (e) => {\n    logger.trace('onOpen');\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onclose = (e) => {\n    logger.trace('onClose', new Date() - socket.start);\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onerror = (e) => {\n    logger.trace('onError');\n    recognizerContext.websocketCallback(e);\n  };\n\n  socket.onmessage = (e) => {\n    logger.trace('onMessage');\n    socket.pingLostCount = 0;\n    const parsedMessage = JSON.parse(e.data);\n    if (parsedMessage.type !== 'pong') {\n      const callBackParam = {\n        type: e.type,\n        data: JSON.parse(e.data)\n      };\n      recognizerContext.websocketCallback(callBackParam);\n    }\n  };\n\n  return socket;\n}\n\n/**\n * Send data message\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Object} message Data message\n */\nexport function send(recognizerContext, message) {\n  const recognizerContextRef = recognizerContext;\n  recognizerContextRef.idle = false;\n\n  const websocket = recognizerContextRef.websocket;\n  if (websocket.readyState <= 1) {\n    websocket.send(JSON.stringify(message));\n    logger.debug(`${message.type} message sent`, message);\n  } else {\n    throw RecognizerContext.LOST_CONNEXION_MESSAGE;\n  }\n}\n\n/**\n * Close the websocket\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Number} code Exit code\n * @param {String} reason Exit reason\n */\nexport function close(recognizerContext, code, reason) {\n  const websocket = recognizerContext.websocket;\n  if (websocket && websocket.readyState < 2) {\n    websocket.close(code, reason);\n  }\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport * as CryptoHelper from '../CryptoHelper';\nimport * as NetworkWSInterface from './networkWSInterface';\nimport * as RecognizerContext from '../../model/RecognizerContext';\n\nimport {\n  buildNewContentPackageInput,\n  buildRestoreIInkSessionInput,\n  buildNewContentPart,\n  buildOpenContentPart,\n  buildConfiguration,\n  buildSetTheme,\n  buildSetPenStyle,\n  buildSetPenStyleClasses\n} from './IInkWsRecognizer';\n\n/**\n * A websocket dialog have this sequence :\n * ---------- Client ------------------------------------- Server ----------------------------------\n * init (send the new content package) ================>\n *                                       <=========== hmacChallenge\n * answerToHmacChallenge (send the hmac) =========>\n * newPart (send the parameters ) ===============>\n *                                       <=========== update\n * addStrokes (send the strokes ) ============>\n *                                       <=========== update\n */\n\nfunction buildHmacMessage(configuration, message) {\n  return {\n    type: 'hmac',\n    hmac: CryptoHelper.computeHmac(message.data.hmacChallenge, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey)\n  };\n}\n\n/**\n * This function bind the right behaviour when a message is receive by the websocket.\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @return {function} Callback to handle WebSocket results\n */\nexport function buildWebSocketCallback(recognizerContext) {\n  return (message) => {\n    const recognizerContextRef = recognizerContext;\n    // Handle websocket messages\n    logger.trace(`${message.type} websocket callback`, message);\n    const recognitionContext = recognizerContext.recognitionContexts[recognizerContext.recognitionContexts.length - 1];\n    logger.debug('Current recognition context', recognitionContext);\n\n    switch (message.type) {\n      case 'open':\n        if (recognizerContext.sessionId) {\n          NetworkWSInterface.send(recognizerContext, buildRestoreIInkSessionInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement, recognizerContext.sessionId));\n        } else {\n          NetworkWSInterface.send(recognizerContext, buildNewContentPackageInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement));\n        }\n        break;\n      case 'message':\n        logger.debug(`Receiving ${message.data.type} message`, message);\n        switch (message.data.type) {\n          case 'ack':\n            if (message.data.hmacChallenge) {\n              NetworkWSInterface.send(recognizerContext, buildHmacMessage(recognizerContext.editor.configuration, message));\n            }\n            if (message.data.iinkSessionId) {\n              recognizerContextRef.sessionId = message.data.iinkSessionId;\n            }\n            break;\n          case 'newPart':\n            break;\n          case 'contentPackageDescription':\n            recognizerContextRef.currentReconnectionCount = 0;\n            recognizerContextRef.contentPartCount = message.data.contentPartCount;\n            NetworkWSInterface.send(recognizerContext, buildConfiguration(recognizerContext.editor.configuration));\n            if (recognizerContextRef.currentPartId) { // FIXME: Ugly hack to resolve init promise after opening part\n              NetworkWSInterface.send(recognizerContext, buildOpenContentPart(recognizerContext.editor.configuration, recognizerContext.currentPartId));\n            } else {\n              NetworkWSInterface.send(recognizerContext, buildNewContentPart(recognizerContext.editor.configuration));\n            }\n            break;\n          case 'partChanged':\n            if (message.data.partId) {\n              recognizerContextRef.currentPartId = message.data.partId;\n            }\n            recognizerContextRef.initialized = true;\n            NetworkWSInterface.send(recognizerContext, buildSetTheme(recognizerContext.editor.theme));\n            NetworkWSInterface.send(recognizerContext, buildSetPenStyle(recognizerContext.editor.penStyle));\n            NetworkWSInterface.send(recognizerContext, buildSetPenStyleClasses(recognizerContext.editor.penStyleClasses));\n            recognitionContext.partChange.resolve([undefined, message.data]);\n            break;\n          case 'contentChanged':\n            if (message.data.canUndo !== undefined) {\n              recognizerContextRef.canUndo = message.data.canUndo;\n            }\n            if (message.data.canRedo !== undefined) {\n              recognizerContextRef.canRedo = message.data.canRedo;\n            }\n            if (message.data.empty !== undefined) {\n              recognizerContextRef.isEmpty = message.data.empty;\n            }\n            if (message.data.possibleUndoCount !== undefined) {\n              recognizerContextRef.possibleUndoCount = message.data.possibleUndoCount;\n            }\n            if (message.data.undoStackIndex !== undefined) {\n              recognizerContextRef.undoStackIndex = message.data.undoStackIndex;\n            }\n            recognitionContext.contentChange.resolve([undefined, message.data]);\n            break;\n          case 'exported':\n            recognitionContext.response.resolve([undefined, message.data]);\n            break;\n          case 'svgPatch':\n            recognitionContext.patch(undefined, message.data);\n            break;\n          case 'supportedImportMimeTypes':\n            recognizerContextRef.supportedImportMimeTypes = message.data.mimeTypes;\n            recognitionContext.response.resolve([undefined, message.data]);\n            break;\n          case 'fileChunkAck':\n            recognitionContext.response.resolve([undefined, message.data]);\n            break;\n          case 'idle':\n            recognizerContextRef.idle = true;\n            recognitionContext.response.resolve([undefined, message.data]);\n            break;\n          case 'error':\n            logger.debug('Error detected stopping all recognition', message);\n            if (recognitionContext) {\n              recognitionContext.patch(message.data);\n            } else {\n              recognitionContext.initPromise.reject(Object.assign({}, message.data, { recoverable: false }));\n            }\n            break;\n          default :\n            logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n        }\n        break;\n      case 'error':\n        logger.debug('Error detected stopping all recognition', message);\n        if (recognitionContext) {\n          recognitionContext.initPromise.resolve(Object.assign({}, message, { recoverable: false }));\n        } else {\n          recognitionContext.initPromise.reject(Object.assign({}, message, { recoverable: false }));\n        }\n        break;\n      case 'close':\n        logger.debug('Close detected stopping all recognition', message);\n        recognizerContextRef.initialized = false;\n        recognizerContextRef.canRedo = false;\n        recognizerContextRef.canUndo = false;\n        if (recognitionContext) {\n          recognitionContext.initPromise.resolve(message);\n        } else {\n          recognitionContext.initPromise.reject(message);\n        }\n        break;\n      default :\n        logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message);\n    }\n  };\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport Constants from '../../configuration/Constants';\nimport * as NetworkWSInterface from './networkWSInterface';\nimport * as PromiseHelper from '../../util/PromiseHelper';\nimport * as InkModel from '../../model/InkModel';\nimport * as RecognizerContext from '../../model/RecognizerContext';\n\nfunction buildUrl(configuration, suffixUrl) {\n  const scheme = (configuration.recognitionParams.server.scheme === 'https') ? 'wss' : 'ws';\n  return `${scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`;\n}\n\n/**\n * Build websocket function\n * @typedef {function} BuildWebSocketFunction\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext\n * @return {Callback}\n */\n\n/**\n * Init the websocket recognizer.\n * Open the connexion and proceed to the hmac challenge.\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {BuildWebSocketFunction} buildWebSocketCallback\n * @param {function} reconnect\n * @return {Promise} Fulfilled when the init phase is over.\n */\nexport function init(suffixUrl, recognizerContext, buildWebSocketCallback, reconnect) {\n  const recognitionContext = recognizerContext.recognitionContexts[0];\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, recognitionContext.model.lastPositions);\n  recognizerContextReference.url = buildUrl(recognizerContext.editor.configuration, suffixUrl);\n  recognizerContextReference.reconnect = reconnect;\n\n  recognizerContextReference.initPromise = recognitionContext.initPromise.promise;\n\n  logger.debug('Opening the websocket for context ', recognizerContext);\n  recognizerContextReference.websocketCallback = buildWebSocketCallback(recognizerContextReference);\n  recognizerContextReference.websocket = NetworkWSInterface.openWebSocket(recognizerContextReference);\n  return recognizerContextReference.initPromise;\n}\n\nexport function retry(func, recognizerContext, model, callback, ...params) {\n  if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n    logger.info('Attempting a retry', recognizerContext.currentReconnectionCount);\n    recognizerContext.reconnect(recognizerContext, model, (err, res) => {\n      if (!err) {\n        func(recognizerContext, res, callback, ...params);\n      } else {\n        logger.error('Failed retry', err);\n        retry(func, recognizerContext, model, callback, ...params);\n      }\n    });\n  } else {\n    callback('Unable to reconnect', model);\n  }\n}\n\n/**\n * @param {RecognizerContext} recognizerContext\n * @param {function} buildMessage\n * @param {...Object} params\n * @return {Promise}\n */\nexport function sendMessage(recognizerContext, buildMessage, ...params) {\n  return recognizerContext.initPromise\n    .then(() => {\n      logger.trace('Init was done. Sending message');\n      const message = buildMessage(...params);\n      if (message) {\n        NetworkWSInterface.send(recognizerContext, message);\n        const positions = recognizerContext.recognitionContexts[0].model.lastPositions;\n        if (positions) {\n          RecognizerContext.updateRecognitionPositions(recognizerContext, positions);\n        }\n      } else {\n        logger.warn('empty message');\n      }\n    });\n}\n\n/**\n * Do what is needed to clean the server context.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear(recognizerContext, model, callback) {\n  const modelRef = InkModel.clearModel(model);\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions);\n  if (recognizerContextReference && recognizerContextReference.websocket) {\n    // We have to send again all strokes after a clear.\n    delete recognizerContextReference.instanceId;\n    try {\n      NetworkWSInterface.send(recognizerContextReference, { type: 'reset' });\n    } catch (sendFailedException) {\n      // To force failure without breaking the flow\n      // FIXME not working at all\n      recognizerContextReference.websocketCallback(PromiseHelper.destructurePromise(), recognizerContextReference, model);\n    }\n  }\n  // We do not keep track of the success of clear.\n  callback(undefined, modelRef);\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n */\nexport function close(recognizerContext, model) {\n  const initPromise = PromiseHelper.destructurePromise();\n  const recognitionContext = {\n    model,\n    initPromise\n  };\n  const recognizerContextRef = recognizerContext;\n\n  return recognizerContext.initPromise\n    .then(() => {\n      recognizerContextRef.recognitionContexts[0] = recognitionContext;\n      return recognizerContextRef;\n    })\n    .then((context) => {\n      NetworkWSInterface.close(context, 1000, RecognizerContext.CLOSE_RECOGNIZER_MESSAGE);\n      return recognitionContext.model;\n    });\n}\n","import uuid from 'uuid-js';\nimport { recognizerLogger as logger } from '../../configuration/LoggerConfig';\nimport Constants from '../../configuration/Constants';\nimport * as DefaultTheme from '../../configuration/DefaultTheme';\nimport * as DefaultPenStyle from '../../configuration/DefaultPenStyle';\nimport * as InkModel from '../../model/InkModel';\nimport * as RecognizerContext from '../../model/RecognizerContext';\nimport * as DefaultRecognizer from '../DefaultRecognizer';\nimport * as WsBuilder from './WsBuilder';\nimport * as WsRecognizerUtil from './WsRecognizerUtil';\nimport * as PromiseHelper from '../../util/PromiseHelper';\nimport { handleError, handleSuccess } from '../RecognizerService';\n\nexport { close } from './WsRecognizerUtil';\n\nfunction readBlob(blob) {\n  const fileReader = new FileReader();\n  return new Promise((resolve, reject) => {\n    fileReader.onload = event => resolve(event.target.result);\n    fileReader.onerror = () => reject(this);\n    fileReader.readAsText(blob);\n  });\n}\n\n\nfunction getDPI(element) {\n  // const startDpi = 56;\n  // for (let dpi = startDpi; dpi < 2000; dpi++) {\n  //   if (window.matchMedia(`(max-resolution: ${dpi}dpi)`).matches === true) {\n  //     return dpi;\n  //   }\n  // }\n  // return startDpi;\n  return 96;\n}\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const IinkWsConfiguration = {\n  types: [Constants.RecognitionType.MATH, Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.NEBO],\n  protocol: Constants.Protocol.WEBSOCKET,\n  availableTriggers: {\n    exportContent: [Constants.Trigger.POINTER_UP, Constants.Trigger.DEMAND],\n    addStrokes: [Constants.Trigger.POINTER_UP]\n  }\n};\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo() {\n  return IinkWsConfiguration;\n}\n\nexport function buildNewContentPackageInput(configuration, element) {\n  return {\n    type: 'newContentPackage',\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  };\n}\n\nexport function buildRestoreIInkSessionInput(configuration, element, sessionId) {\n  return {\n    type: 'restoreIInkSession',\n    iinkSessionId: sessionId,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  };\n}\n\nexport function buildNewContentPart(configuration) {\n  return {\n    type: 'newContentPart',\n    contentType: configuration.recognitionParams.type,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND) ?\n      configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  };\n}\n\nexport function buildOpenContentPart(configuration, partId) {\n  return {\n    type: 'openContentPart',\n    id: partId,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND) ?\n      configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  };\n}\n\nexport function buildConfiguration(configuration) {\n  return Object.assign({ type: 'configuration' }, configuration.recognitionParams.iink);\n}\n\nfunction buildAddStrokes(recognizerContext, model) {\n  const strokes = InkModel.extractPendingStrokes(model, recognizerContext.lastPositions.lastSentPosition + 1);\n  if (strokes.length > 0) {\n    InkModel.updateModelSentPosition(model);\n    return {\n      type: 'addStrokes',\n      strokes: strokes.map(stroke => Object.assign({}, {\n        id: stroke.id,\n        pointerType: stroke.pointerType,\n        pointerId: stroke.pointerId,\n        x: stroke.x,\n        y: stroke.y,\n        t: stroke.t,\n        p: stroke.p\n      }))\n    };\n  }\n  return undefined;\n}\n\nfunction buildUndo() {\n  return {\n    type: 'undo'\n  };\n}\n\nfunction buildRedo() {\n  return {\n    type: 'redo'\n  };\n}\n\nfunction buildClear() {\n  return {\n    type: 'clear'\n  };\n}\n\nfunction buildConvert(state) {\n  return {\n    type: 'convert',\n    conversionState: state\n  };\n}\n\nfunction buildZoom(value) {\n  return {\n    type: 'zoom',\n    zoom: value\n  };\n}\n\nfunction buildResize(element, minHeight = 0, minWidth = 0) {\n  return {\n    type: 'changeViewSize',\n    height: element.clientHeight < minHeight ? minHeight : element.clientHeight,\n    width: element.clientWidth < minWidth ? minWidth : element.clientWidth\n  };\n}\n\nfunction buildExport(configuration, partId, requestedMimeType) {\n  let usedMimeType;\n  if (requestedMimeType && Object.keys(requestedMimeType).length !== 0) {\n    usedMimeType = requestedMimeType;\n  } else {\n    usedMimeType = configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes;\n  }\n\n  return {\n    type: 'export',\n    partId,\n    mimeTypes: usedMimeType\n  };\n}\n\nfunction buildImportFile(id, mimetype) {\n  return {\n    type: 'importFile',\n    importFileId: id,\n    mimeType: mimetype\n  };\n}\n\nfunction buildImportChunk(id, data, lastChunk) {\n  return {\n    type: 'fileChunk',\n    importFileId: id,\n    data,\n    lastChunk\n  };\n}\n\nfunction buildPointerEvents(events) {\n  return Object.assign({ type: 'pointerEvents' }, events);\n}\n\nfunction buildWaitForIdle() {\n  return {\n    type: 'waitForIdle'\n  };\n}\n\nfunction buildGetSupportedImportMimeTypes() {\n  return {\n    type: 'getSupportedImportMimeTypes'\n  };\n}\n\nexport function buildSetPenStyle(penStyle) {\n  return {\n    type: 'setPenStyle',\n    style: penStyle ? DefaultPenStyle.toCSS(penStyle) : ''\n  };\n}\n\nexport function buildSetPenStyleClasses(penStyleClasses) {\n  return {\n    type: 'setPenStyleClasses',\n    styleClasses: penStyleClasses\n  };\n}\n\nexport function buildSetTheme(theme) {\n  return {\n    type: 'setTheme',\n    theme: DefaultTheme.toCSS(theme)\n  };\n}\n\nconst responseCallback = (model, err, res, recognizerContext) => {\n  const modelReference = InkModel.updateModelReceivedPosition(model);\n  if (res) {\n    let event = '';\n    if (res.updates !== undefined) {\n      if (modelReference.recognizedSymbols) {\n        modelReference.recognizedSymbols.push(res);\n      } else {\n        modelReference.recognizedSymbols = [res];\n      }\n      event = Constants.EventType.RENDERED;\n    }\n    if (res.exports !== undefined) {\n      modelReference.rawResults.exports = res;\n      modelReference.exports = res.exports;\n      event = Constants.EventType.EXPORTED;\n    }\n\n    if ((res.canUndo !== undefined) || (res.canRedo !== undefined)) {\n      event = Constants.EventType.CHANGED;\n    }\n\n    if (res.type === 'supportedImportMimeTypes') {\n      event = Constants.EventType.SUPPORTED_IMPORT_MIMETYPES;\n    }\n\n    if (res.type === 'partChanged') {\n      event = Constants.EventType.LOADED;\n    }\n\n    if (res.type === 'idle') {\n      event = Constants.EventType.IDLE;\n    }\n\n    if (res.type === 'close') {\n      event = Constants.EventType.CHANGED;\n    }\n    return handleSuccess(recognizerContext.editor, model, event);\n  }\n  return handleError(recognizerContext.editor, err);\n};\n\n/**\n * Initialize recognition\n * The init process is in multiple part :\n * - partChange\n * - contentChange\n * - initPromise: resolved only if partChange & contentChange resolved except for MATH recognition\n *\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n */\nexport async function init(recognizerContext, model) {\n  const contentChange = PromiseHelper.destructurePromise();\n  const partChange = PromiseHelper.destructurePromise();\n  const initPromise = PromiseHelper.destructurePromise();\n\n  let recognizerContextRef;\n  let contentChanged = null;\n\n  if (recognizerContext.editor.innerConfiguration.recognitionParams.type === 'MATH' ||\n    recognizerContext.editor.innerConfiguration.recognitionParams.type === 'DIAGRAM') {\n    recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n      model: InkModel.updateModelSentPosition(model, model.lastPositions.lastReceivedPosition),\n      partChange,\n      initPromise,\n      patch: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n    });\n  } else {\n    recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n      model: InkModel.updateModelSentPosition(model, model.lastPositions.lastReceivedPosition),\n      contentChange,\n      partChange,\n      initPromise,\n      patch: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n    });\n    contentChanged = recognizerContextRef.recognitionContexts[0].contentChange.promise;\n  }\n\n  WsRecognizerUtil.init('/api/v4.0/iink/document', recognizerContextRef, WsBuilder.buildWebSocketCallback, init)\n    .catch((err) => {\n      if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n        logger.info('Attempting a reconnect', recognizerContext.currentReconnectionCount);\n        recognizerContext.reconnect(recognizerContext, model);\n      } else {\n        logger.error('Unable to reconnect', err);\n        responseCallback(model, err, undefined, recognizerContext);\n      }\n    });\n\n  const [errPartChanged, resPartChanged] = await recognizerContextRef.recognitionContexts[0].partChange.promise;\n  if (resPartChanged) {\n    responseCallback(model, errPartChanged, resPartChanged, recognizerContext);\n    if (contentChanged !== null) {\n      const [errContentChanged, resContentChanged] = await contentChanged;\n      if (resContentChanged) {\n        responseCallback(model, errContentChanged, resContentChanged, recognizerContext);\n      }\n    }\n    recognizerContextRef.recognitionContexts[0].initPromise.resolve(true);\n  }\n\n  return recognizerContextRef.recognitionContexts[0].initPromise;\n}\n\n/**\n *\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Function} buildFunction build the websocket message\n * @param {...Object} params spread parameters, will be passed to buildFunction\n * @private\n */\n// eslint-disable-next-line no-underscore-dangle\nasync function _prepareMessage(recognizerContext, model, buildFunction, ...params) {\n  logger.info(`-- Prepare message for ${buildFunction.name} --`);\n  const response = PromiseHelper.destructurePromise();\n  const contentChange = PromiseHelper.destructurePromise();\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    response,\n    contentChange,\n    patch: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n  });\n  WsRecognizerUtil.sendMessage(recognizerContextRef, buildFunction, ...params)\n    .catch((err) => {\n      logger.error(err);\n      WsRecognizerUtil.retry(_prepareMessage, recognizerContext, model, buildFunction, ...params);\n    });\n\n  const resp = await recognizerContextRef.recognitionContexts[0].response.promise;\n\n  if (resp) {\n    responseCallback(model, resp[0], resp[1], recognizerContextRef);\n  }\n\n  const contentChanged = await recognizerContextRef.recognitionContexts[0].contentChange.promise;\n\n  if (contentChanged) {\n    responseCallback(model, contentChanged[0], contentChanged[1], recognizerContextRef);\n    return {\n      res: model,\n      types: []\n    };\n  }\n\n  return null;\n}\n\n/**\n * Create a new content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function newContentPart(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildNewContentPart, recognizerContext.editor.configuration);\n}\n\n/**\n * Open the recognizer context content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function openContentPart(recognizerContext, model) {\n  const params = [recognizerContext.editor.configuration, recognizerContext.currentPartId];\n  return _prepareMessage(recognizerContext, model, buildOpenContentPart, params);\n}\n\n/**\n * Send the recognizer configuration\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function sendConfiguration(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildConfiguration, recognizerContext.editor.configuration);\n}\n\n/**\n * Pointer Events\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PointerEvents} events to be imported\n */\nexport function pointerEvents(recognizerContext, model, events) {\n  return _prepareMessage(recognizerContext, model, buildPointerEvents, events);\n}\n\n/**\n * Add strokes to the model\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function addStrokes(recognizerContext, model) {\n  const params = [recognizerContext, model];\n  return _prepareMessage(recognizerContext, model, buildAddStrokes, ...params);\n}\n\n/**\n * Undo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function undo(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildUndo);\n}\n\n/**\n * Redo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function redo(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildRedo);\n}\n\n/**\n * Clear action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport async function clear(recognizerContext, model) {\n  const response = PromiseHelper.destructurePromise();\n  const contentChange = PromiseHelper.destructurePromise();\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    response,\n    contentChange,\n    patch: async (error, result) => {\n      const { err, res, events } = await DefaultRecognizer.clear(recognizerContext, model);\n      responseCallback(res, err, result, recognizerContextRef);\n    }\n  });\n  WsRecognizerUtil.sendMessage(recognizerContextRef, buildClear)\n    .catch(exception => WsRecognizerUtil.retry(clear, recognizerContext, model));\n\n  const resp = await recognizerContextRef.recognitionContexts[0].response.promise;\n  const contentChanged = await recognizerContextRef.recognitionContexts[0].contentChange.promise;\n\n  if (resp) {\n    responseCallback(model, resp[0], resp[1], recognizerContextRef);\n  }\n\n  if (contentChanged) {\n    responseCallback(model, contentChanged[0], contentChanged[1], recognizerContextRef);\n    return {\n      err: undefined,\n      res: recognizerContextRef.recognitionContexts[0].model,\n      events: []\n    };\n  }\n\n  return null;\n}\n\n/**\n * Convert action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {String} conversionState Conversion State, by default DigitalEdit\n */\nexport function convert(recognizerContext, model, conversionState) {\n  return _prepareMessage(recognizerContext, model, buildConvert, conversionState);\n}\n\n/**\n * Export action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Array} requestedMimeTypes\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function export_(recognizerContext, model, requestedMimeTypes) {\n  const params = [recognizerContext.editor.configuration, recognizerContext.currentPartId, requestedMimeTypes];\n  return _prepareMessage(recognizerContext, model, buildExport, ...params);\n}\n\n/**\n * Import action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Blob} data Import data\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function import_(recognizerContext, model, data) {\n  const recognitionContext = {\n    model,\n    response: (err, res) => responseCallback(model, err, res, recognizerContext),\n    importFileId: uuid.create(4).toString()\n  };\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, recognitionContext);\n\n  const chunkSize = recognizerContext.editor.configuration.recognitionParams.server.websocket.fileChunkSize;\n\n  const messages = [];\n  for (let i = 0; i < data.size; i += chunkSize) {\n    if (i === 0) {\n      messages.push(_prepareMessage(recognizerContextRef, model, buildImportFile, recognitionContext.importFileId, data.type));\n    }\n    const blobPart = data.slice(i, chunkSize, data.type);\n    readBlob(blobPart).then((res) => {\n      const params = [recognitionContext.importFileId, res, i + chunkSize > data.size];\n      messages.push(_prepareMessage(recognizerContextRef, model, buildImportChunk, ...params));\n    });\n  }\n\n  return Promise.all(messages);\n}\n\n/**\n * Ask for the supported mimetypes\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function getSupportedImportMimeTypes(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildGetSupportedImportMimeTypes);\n}\n\n/**\n * WaitForIdle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function waitForIdle(recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildWaitForIdle);\n}\n\n/**\n * Resize\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Element} element Current element\n */\nexport function resize(recognizerContext, model, element) {\n  const params = [element, recognizerContext.editor.configuration.renderingParams.minHeight, recognizerContext.editor.configuration.renderingParams.minWidth];\n  return _prepareMessage(recognizerContext, model, buildResize, ...params);\n}\n\n/**\n * Zoom action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Number} value=10 Zoom value\n */\nexport function zoom(recognizerContext, model, value = 10) {\n  return _prepareMessage(recognizerContext, model, buildZoom, value);\n}\n\n/**\n * SetPenStyle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PenStyle} penStyle Current penStyle\n */\nexport function setPenStyle(recognizerContext, model, penStyle) {\n  return _prepareMessage(recognizerContext, model, buildSetPenStyle, penStyle);\n}\n\n/**\n * setPenStyleClasses action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {String} penStyleClasses Current penStyleClasses\n */\nexport function setPenStyleClasses(recognizerContext, model, penStyleClasses) {\n  return _prepareMessage(recognizerContext, model, buildSetPenStyleClasses, penStyleClasses);\n}\n\n/**\n * SetTheme action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Theme} theme Current theme\n */\nexport function setTheme(recognizerContext, model, theme) {\n  return _prepareMessage(recognizerContext, model, buildSetTheme, theme);\n}\n","import { eventLogger as logger } from '../configuration/LoggerConfig';\n\n/**\n * Emits an event when the editor state change\n * @param {String} type\n * @param {Object} data\n * @emits {Event}\n */\nexport default function emit(type, data) {\n  logger.info(`emitting ${type} event`, data);\n  // We are making usage of a browser provided class\n  // eslint-disable-next-line no-undef\n  this.dispatchEvent(new CustomEvent(type, Object.assign({ bubbles: true, composed: true }, data ? { detail: data } : undefined)));\n}\n","import * as languagesJson from './configuration/languages.json';\nimport { editorLogger as logger } from './configuration/LoggerConfig';\nimport { Editor } from './Editor';\n\n/**\n * Attach an Editor to a DOMElement\n * @param {Element} element DOM element to attach an editor\n * @param {Configuration} [configuration] Configuration to apply\n * @param {PenStyle} [penStyle] Pen style to apply\n * @param {Theme} [theme] Theme to apply\n * @param {Behaviors} [behaviors] Custom behaviors to apply\n * @return {Editor} New editor\n */\nexport function register(element, configuration, penStyle, theme, behaviors) {\n  logger.debug('Registering a new editor');\n  return new Editor(element, configuration, penStyle, theme, behaviors);\n}\n\n/**\n * Return the list of available recognition languages\n * @param {Configuration} [configuration] Configuration to get the languages\n * @return {JSON} A list of available languages\n */\nexport function getAvailableLanguageList(configuration) {\n  return languagesJson;\n}\n","import Constants from './configuration/Constants';\nimport LoggerConfig from './configuration/LoggerConfig';\nimport DefaultConfiguration from './configuration/DefaultConfiguration';\nimport DefaultPenStyle from './configuration/DefaultPenStyle';\nimport DefaultTheme from './configuration/DefaultTheme';\nimport DefaultBehaviors from './configuration/DefaultBehaviors';\nimport * as InkModel from './model/InkModel';\nimport { Editor } from './Editor';\nimport { register, getAvailableLanguageList } from './EditorFacade';\nimport * as RecognizerContext from './model/RecognizerContext';\n\nconst iink = {\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext,\n};\n\nexport {\n  iink as default,\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext,\n};\n\n"],"names":["Constants","EventType","IDLE","CHANGED","IMPORTED","EXPORTED","CONVERTED","RENDERED","LOADED","UNDO","REDO","CLEAR","IMPORT","SUPPORTED_IMPORT_MIMETYPES","EXPORT","CONVERT","ERROR","RecognitionType","TEXT","MATH","DIAGRAM","RAWCONTENT","Protocol","WEBSOCKET","REST","ModelState","INITIALIZING","INITIALIZED","EXPORTING","PENDING","MODIFIED","Trigger","QUIET_PERIOD","POINTER_UP","DEMAND","Logger","EDITOR","MODEL","GRABBER","RENDERER","RECOGNIZER","EVENT","UTIL","SMARTGUIDE","LogLevel","TRACE","DEBUG","INFO","WARN","Languages","zh_CN","zh_HK","zh_TW","ko_KR","ja_JP","hy_AM","Error","NOT_REACHABLE","WRONG_CREDENTIALS","TOO_OLD","Exports","JIIX","log","loglevel","root","definition","module","exports","this","noop","undefinedType","isIE","window","test","navigator","userAgent","logMethods","bindMethod","obj","methodName","method","bind","Function","prototype","call","e","apply","arguments","traceForIE","console","trace","replaceLoggingMethods","level","loggerName","i","length","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","undefined","realMethod","name","defaultLevel","factory","currentLevel","self","storageKey","getPersistedLevel","storedLevel","localStorage","ignore","cookie","document","location","indexOf","encodeURIComponent","exec","slice","levels","SILENT","getLevel","setLevel","persist","toUpperCase","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","TypeError","logger","_log","noConflict","getLoggers","editorLogger","modelLogger","grabberLogger","rendererLogger","recognizerLogger","eventLogger","LARGE_ARRAY_SIZE","HASH_UNDEFINED","HOT_COUNT","HOT_SPAN","MAX_SAFE_INTEGER","argsTag","asyncTag","funcTag","genTag","nullTag","objectTag","proxyTag","undefinedTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","global","Object","freeSelf","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","func","thisArg","args","uid","transform","arrayProto","Array","funcProto","objectProto","coreJsData","funcToString","toString","hasOwnProperty","maskSrcKey","keys","IE_PROTO","nativeObjectToString","objectCtorString","reIsNative","RegExp","replace","Buffer","Symbol","Uint8Array","allocUnsafe","getPrototype","getPrototypeOf","arg","objectCreate","create","propertyIsEnumerable","splice","symToStringTag","toStringTag","defineProperty","getNative","nativeIsBuffer","isBuffer","nativeMax","Math","max","nativeNow","Date","now","Map","nativeCreate","baseCreate","object","proto","isObject","result","Hash","entries","index","clear","entry","set","ListCache","MapCache","Stack","data","__data__","size","arrayLikeKeys","value","inherited","isArr","isArray","isArg","isArguments","isBuff","isType","skipIndexes","n","iteratee","baseTimes","String","key","isIndex","push","assignMergeValue","eq","baseAssignValue","assignValue","objValue","assocIndexOf","array","configurable","enumerable","writable","has","get","pop","hash","map","string","getMapData","pairs","fromRight","baseFor","keysFunc","iterable","props","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsNative","isMasked","isFunction","toSource","baseKeysIn","nativeKeysIn","isProto","isPrototype","baseMerge","source","srcIndex","customizer","stack","srcValue","mergeFunc","safeGet","stacked","newValue","isCommon","isTyped","isArrayLike","copyArray","buffer","isDeep","constructor","copy","cloneBuffer","typedArray","arrayBuffer","byteLength","cloneArrayBuffer","byteOffset","Ctor","isPlainObject","isNew","copyObject","keysIn","toPlainObject","initCloneObject","baseMergeDeep","baseRest","start","setToString","otherArgs","overRest","identity","type","getValue","count","lastCalled","stamp","remaining","shortOut","other","isLength","baseUnary","assigner","merge","sources","guard","isIterateeCall","defaultConfiguration","recognitionParams","protocol","server","scheme","host","applicationKey","hmacKey","useWindowLocation","websocket","pingEnabled","pingDelay","maxPingLostCount","autoReconnect","maxRetryCount","fileChunkSize","iink","alwaysConnected","lang","jiix","strokes","text","chars","words","renderer","math","mimeTypes","solver","enable","margin","bottom","left","right","top","guides","smartGuide","smartGuideFadeOut","duration","diagram","recognition","shape","listenerOptions","capture","passive","undoRedoMaxStackSize","xyFloatPrecision","timestampFloatPrecision","triggerDelay","processDelay","resizeTriggerDelay","triggers","exportContent","addStrokes","restConversionState","renderingParams","stroker","minHeight","minWidth","t","o","r","l","m","c","d","__esModule","default","p","s","iterator","toJSON","error","u","split","forEach","trim","substring","_trimSemiColon","toCSS","defaultPenStyle","parser","JsonCSS","penStyle","css","defaultTheme","ink","color","theme","floatPrecisionArray","roundFloat","oneFloat","requestedFloatPrecision","floatPrecision","round","extractPoint","event","domElement","configuration","offsetTop","offsetLeft","eventRef","changedTouches","rect","getBoundingClientRect","x","clientX","clientLeft","y","clientY","clientTop","element","editor","mMaxDiffX","unfocus","getSelection","removeAllRanges","hideMenu","evt","moreMenuInDocument","querySelector","target","classList","contains","style","display","hideCandidates","candidatesInDocument","tagName","context","options","listeners","listener","pointerDownOnEditor","id","activePointerId","pointerId","button","buttons","stopPropagation","pointerDown","pointerType","smartGuidePointerDown","downSmartGuidePoint","pointerMove","point","diffX","abs","diffY","smartGuideIds","scrollbarClasses","pointerEnteredSmartGuide","relatedTarget","includes","className","pointerExitedSmartGuide","pointerMovedWords","pointerUp","item","addEventListener","removeEventListener","drawStroke","stroke","ShapeSymbols","table","recognizedShape","ellipse","line","phi","angle","returnedAngle","PI","drawArrowHead","headPoint","alpha","beta","contextReference","save","fillStyle","strokeStyle","moveTo","beginPath","lineTo","cos","sin","fill","restore","drawShapeEllipse","shapeEllipse","points","centerPoint","maxRadius","minRadius","orientation","startAngle","sweepAngle","z1","z3","z2","z4","floor","boundariesPoints","atan2","cosAlpha","sinAlpha","drawEllipseArc","center","beginDecoration","beginTangentAngle","endDecoration","endTangentAngle","drawLine","p1","p2","drawShapeSymbol","symbol","lineWidth","width","elementType","candidates","selectedCandidateIndex","lines","shapeLine","firstPoint","lastPoint","drawShapeLine","primitives","primitive","TextSymbols","inputCharacter","textLine","drawTextLine","label","font","textHeight","textAlign","justificationType","textBaseline","fillText","topLeftPoint","height","drawText","underlineList","underline","delta","firstCharacter","lastCharacter","drawUnderline","computeDistance","xArray","yArray","lastIndexPoint","distance","sqrt","pow","isNaN","computeLength","lArray","createStrokeComponent","properties","assign","addPoint","ret","strokeReference","ratio","pressure","parseFloat","computePressure","end","slicedStroke","getPointByIndex","mergeBounds","boundsA","boundsB","minX","min","maxX","minY","maxY","getLineBounds","getEllipseBounds","getTextLineBounds","getClefBounds","clef","boundingBox","getStrokeBounds","getSymbolsBounds","symbols","boundsRef","Number","MAX_VALUE","MIN_VALUE","filter","reduce","createModel","currentStroke","rawStrokes","strokeGroups","lastPositions","lastSentPosition","lastReceivedPosition","lastRenderedPosition","defaultSymbols","recognizedSymbols","rawResults","convert","creationTime","getTime","modificationTime","clearModel","model","modelReference","needRedraw","addStroke","addStrokeToGroup","strokePenStyle","lastGroup","newStrokeGroup","strokeCopy","extractPendingStrokes","position","initPendingStroke","dpi","pxWidth","StrokeComponent","appendToPendingStroke","endPendingStroke","getBorderCoordinates","modelBounds","updateModelSentPosition","updateModelReceivedPosition","resetModelPositions","updateModelRenderedPosition","extractPendingRecognizedSymbols","cloneModel","clonedModel","JSON","parse","stringify","mergeModels","models","a","b","modelRef","firstStroke","lastStroke","slicedStrokes","detectPixelRatio","canvas","getContext","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getPixelRatio","createElement","createCanvas","add","appendChild","resizeContent","renderingCanvas","capturingCanvas","parentNode","clientWidth","clientHeight","pixelRatio","scale","drawSymbol","drawTextSymbol","warn","drawModel","renderingCanvasContext","clearRect","InkModel","capturingCanvasContext","removeChild","computeLinksPoints","radius","computeMiddlePoint","point1","point2","computeAxeAngle","begin","renderArc","arc","renderLine","linkPoints1","linkPoints2","renderQuadratic","ctrl","linkPoints3","quadraticCurveTo","nbquadratics","linkPoints","newAngle","renderFinal","closePath","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","space","local","creatorInherit","ownerDocument","uri","namespaceURI","documentElement","createElementNS","creatorFixed","fullname","namespace","none","selector","empty","update","EnterNode","parent","datum","_next","_parent","child","insertBefore","next","querySelectorAll","keyPrefix","bindIndex","group","enter","exit","node","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","NaN","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","propertyRemove","propertyConstant","propertyFunction","classArray","ClassList","_node","_names","getAttribute","classedAdd","names","list","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","join","filterEvents","mouseenter","mouseleave","filterContextListener","contextListener","related","compareDocumentPosition","event1","onRemove","typename","on","__on","j","onAdd","wrap","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","Selection","groups","parents","_groups","_parents","insertAdjacentSVG","html","container","toLowerCase","lastChild","select","subgroups","subnode","subgroup","selectAll","selectorAll","match","matches","matcher","each","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","order","selection","groups0","groups1","m0","m1","merges","group0","group1","sort","compare","compareNode","sortgroups","sortgroup","callback","nodes","attr","getAttributeNS","getPropertyValue","getComputedStyle","styleValue","property","classed","creator","insert","before","deep","typenames","parseTypenames","dispatch","elementRef","fontSize","d3","pendingRecognizedSymbols","patch","patchUpdate","updates","svgElementSelector","layer","insertAdjacentHTML","setTimeout","outerHTML","parentId","refId","pendingStrokes","symbolContext","parts","svgPath","CryptoJS","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","instance","propertyName","WordArray","sigBytes","encoder","Hex","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","random","nBytes","rcache","m_w","m_z","mask","_r","C_enc","enc","hexChars","bite","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","offset","_doProcessBlock","processedWords","C_algo","Hasher","cfg","_doReset","messageUpdate","finalize","_doFinalize","_createHelper","hasher","message","_createHmacHelper","HMAC","algo","require$$0","X32WordArray","C_x64","x64","Word","high","low","toX32","x64Words","x64WordsLength","x32Words","x64Word","wordsLength","X64Word","X64WordArray","X64Word_create","K","W","SHA512","_hash","M","H","H0","H1","H2","H3","H4","H5","H6","H7","H0h","H0l","H1h","H1l","H2h","H2l","H3h","H3l","H4h","H4l","H5h","H5l","H6h","H6l","H7h","H7l","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","Wi","Wih","Wil","gamma0x","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1x","gamma1xh","gamma1xl","gamma1h","gamma1l","Wi7","Wi7h","Wi7l","Wi16","Wi16h","Wi16l","t1l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kih","Kil","t1h","t2l","nBitsTotal","nBitsLeft","HmacSHA512","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","computeHmac","input","jsonInput","_typeof","req","responseText","post","recognizerContext","url","apiVersion","mimeType","recognizerContextRef","Promise","resolve","reject","request","XMLHttpRequest","open","withCredentials","setRequestHeader","CryptoHelper","isBlobType","startsWith","responseType","onerror","msg","recoverable","onload","status","response","onreadystatechange","readyState","idle","send","then","res","xhr","createEmptyRecognizerContext","info","recognitionContexts","initPromise","websocketCallback","reconnect","currentReconnectionCount","sessionId","contentPartCount","currentPartId","instanceId","canUndo","canRedo","isEmpty","supportedImportMimeTypes","undoStackIndex","possibleUndoCount","initialized","isResetRequired","updateRecognitionPositions","positions","setRecognitionContext","recognitionContext","canReconnect","shouldAttemptImmediateReconnect","LOST_CONNEXION_MESSAGE","CLOSE_RECOGNIZER_MESSAGE","val","div","elMatches","Element","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","query","queryChildren","children","cls","main","thumb","rail","consuming","state","focus","clicking","active","scrolling","scrollingClassTimeout","addScrollingClass","clearTimeout","removeScrollingClass","isAlive","settings","scrollingThreshold","EventElement","handlers","prototypeAccessors","eventName","handler","unbind","this$1","unbindAll","every","defineProperties","EventManager","eventElements","initCustomEvent","eventElement","ee","once","onceHandler","processScrollDiff","axis","diff","useScrollingClass","forceFireReachEvent","fields","ref","contentHeight","containerHeight","scrollTop","up","down","reach","setScrollingClassInstantly","processScrollDiff$1","toInt","env","isWebKit","supportsTouch","DocumentTouch","supportsIePointer","msMaxTouchPoints","isChrome","updateGeometry","roundedScrollTop","containerWidth","contentWidth","scrollWidth","scrollHeight","scrollbarXRail","scrollbarYRail","suppressScrollX","scrollXMarginOffset","scrollbarXActive","railXWidth","railXMarginWidth","railXRatio","scrollbarXWidth","getThumbSize","scrollbarXLeft","negativeScrollAdjustment","scrollLeft","suppressScrollY","scrollYMarginOffset","scrollbarYActive","railYHeight","railYMarginHeight","railYRatio","scrollbarYHeight","scrollbarYTop","xRailOffset","isRtl","isScrollbarXUsingBottom","scrollbarXBottom","scrollbarXTop","yRailOffset","isScrollbarYUsingRight","scrollbarYRight","scrollbarYOuterWidth","scrollbarYLeft","scrollbarX","railBorderXWidth","scrollbarY","railBorderYWidth","updateCss","thumbSize","minScrollbarLength","maxScrollbarLength","bindMouseScrollHandler","pageY","startingScrollTop","startingMousePageY","scrollBy","mouseMoveHandler","preventDefault","mouseUpHandler","click-rail","direction","pageYOffset","pageX","pageXOffset","drag-thumb","keyboard","isDefaultPrevented","defaultPrevented","activeElement","contentDocument","shadowRoot","deltaX","deltaY","which","metaKey","altKey","shiftKey","wheelPropagation","shouldPreventDefault","wheel","mousewheelHandler","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","getDeltaFromEvent","cursor","overflow","overflowX","overflowY","maxScrollTop","maxScrollLeft","shouldBeConsumedByChild","shouldPrevent","useBothWheelAxes","wheelSpeed","isTop","isBottom","offsetHeight","isLeft","isRight","offsetWidth","ctrlKey","onwheel","onmousewheel","touch","startOffset","startTime","speed","easingLoop","touchStart","touchMove","touchEnd","PointerEvent","MSPointerEvent","applyTouchMove","differenceX","differenceY","getTouch","targetTouches","shouldHandle","MSPOINTER_TYPE_MOUSE","clearInterval","currentOffset","currentTime","timeGap","magnitudeX","magnitudeY","scrollY","swipeEasing","setInterval","isInitialized","PerfectScrollbar","userSettings","nodeName","blur","isNegativeScroll","originalScrollLeft","railXStyle","borderLeftWidth","borderRightWidth","marginLeft","marginRight","railYStyle","styles","paddingLeft","paddingRight","outerWidth","borderTopWidth","borderBottomWidth","marginTop","marginBottom","handlerName","lastScrollTop","lastScrollLeft","onScroll","destroy","removePsClasses","selectedText","isReadOnly","hasAttribute","setSelectionRange","range","createRange","selectNodeContents","addRange","_select","_select2","_createClass","descriptor","Constructor","protoProps","staticProps","ClipboardAction","_classCallCheck","resolveOptions","initSelection","action","emitter","trigger","selectFake","selectTarget","_this","isRTL","removeFake","fakeHandlerCallback","fakeHandler","fakeElem","border","padding","yPosition","copyText","succeeded","execCommand","err","handleResult","emit","clearSelection","_action","_target","E","ctx","fn","off","_","evtArr","len","evts","liveEvents","HTMLElement","DOCUMENT_NODE_TYPE","matchesSelector","oMatchesSelector","delegateTarget","closest","useCapture","listenerFn","is","listenNode","nodeList","listenNodeList","delegate","body","listenSelector","_clipboardAction","_tinyEmitter","_goodListener","_clipboardAction2","_interopRequireDefault","_tinyEmitter2","_goodListener2","Clipboard","_Emitter","ReferenceError","_possibleConstructorReturn","__proto__","listenClick","subClass","superClass","setPrototypeOf","_inherits","defaultAction","defaultTarget","defaultText","_this2","onClick","currentTarget","clipboardAction","getAttributeValue","actions","support","queryCommandSupported","suffix","attribute","require$$1","require$$2","isInShadow","addListeners","elementsRef","elements","textElement","smartGuideRef","randomString","wordToChange","candidatesElement","word","showCandidates","candidate","innerText","jiixToImport","import_","clickCandidate","ellipsisElement","positionActions","menuElement","isMenuInDocument","convertElement","copyElement","deleteElement","showActions","createSmartGuide","smartGuideElement","textContainer","tagElement","createHTMLElements","lastWord","previousLabelExport","perfectScrollbar","smartGuideTimeOutId","MutationObserver","mutations","observe","childList","subtree","attributes","callFadeOutObserver","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","updateUndoRedoState","undoRedoContext","undoRedoContextRef","currentPosition","getModel","modelIndex","findIndex","undoRedoContextReference","maxSize","shift","UndoRedoContext","borderCoordinates","editorParam","delayBetweenStrokes","lastOneDelay","origGrabber","behavior","grabber","detach","setDelay","X","idx","Y","play","actionsArray","delay","currentAction","nextDelay","lastIndexOf","Event","strokeFromGroup","rendererContext","destructurePromise","promise","resolveParam","rejectParam","time","timer","manageResetState","recognizer","RecognizerContext","isTriggerValid","getInfo","availableTriggers","launchExport","requestedMimeTypes","export_","editorRef","exportTimer","timeout","delayer","PromiseHelper","launchConvert","conversionState","launchConfig","sendConfiguration","Editor","behaviors","styleElement","createTextNode","sheet","loader","resizeTimer","notifyTimer","innerBehaviors","currentBehaviors","defaultBehaviors","rendererList","strokerList","recognizerList","events","getBehaviorFromConfiguration","DefaultBehaviors","SmartGuide","localTheme","penStyleClasses","localPenStyle","drawCurrentStroke","handleSuccess","strokeIndex","emitEvents","waitForIdle","undoRedoManager","undo","handleError","manageRecognizedModel","redo","_this3","canClear","_this4","canConvert","canExport","mimetype","launchImport","Blob","getSupportedImportMimeTypes","pointerEvents","launchPointerEvents","resize","maxWidthTextContainer","maxWidth","defaultLang","armenian","fontFamily","lineHeight","grabberContext","innerRenderer","innerConfiguration","currentConfiguration","confRef","DefaultConfiguration","setThemeForFont","currentStyle","innerPenStyle","setPenStyle","innerPenStyleClasses","setPenStyleClasses","innerTheme","currentTheme","DefaultTheme","setTheme","innerBehavior","attach","UndoRedoManager","initialize","_this5","innerRecognizer","close","renderStructure","translate","toDataURL","ImageRenderer","eastereggs","isSmartGuideInDocument","visibility","insertSmartGuideElement","insertTextContainer","insertEllipsis","insertSmartGuide","createWordSpan","span","myFragment","createDocumentFragment","populatePrompter","tempWords","labelWordsArray","tempLabelWordsArray","wordChangedId","getElementById","addAnimationToModifiedWord","code","reason","updateModel","iinkRestConfiguration","postMessage","suffixUrl","buildMessage","NetworkInterface","recognizerContextReference","buildData","dataConf","buildTextConf","buildMathConf","buildDiagramConf","buildRawContentConf","newStrokes","newGroup","DefaultPenStyle","xDPI","yDPI","contentType","extractExports","resultCallback","callPostMessage","all","UUIDjs","getRandomInt","maxFromBits","bits","limitUI04","limitUI06","limitUI08","limitUI12","limitUI14","limitUI16","limitUI32","limitUI40","limitUI48","randomUI04","randomUI06","randomUI08","randomUI12","randomUI14","randomUI16","randomUI32","randomUI40","randomUI48","paddedString","z","fromParts","timeLow","timeMid","timeHiAndVersion","clockSeqHiAndReserved","clockSeqLow","version","hex","toURN","toBytes","ints","intPos","equals","uuid","UUID","getTimeFieldValues","ts","UTC","hm","mid","hi","timestamp","_create4","_create1","sequence","tick","tf","tl","thav","cshar","csl","fromTime","last","firstFromTime","lastFromTime","fromURN","strId","fromBytes","str","pos","octet","fromBinary","binary","new","newTS","openWebSocket","socket","WebSocket","websocketConfiguration","maxPingLost","pingLostCount","addWebsocketAttributes","infinitePing","websocketRef","onopen","onclose","onmessage","callBackParam","buildWebSocketCallback","NetworkWSInterface","buildRestoreIInkSessionInput","buildNewContentPackageInput","hmacChallenge","hmac","buildHmacMessage","iinkSessionId","buildConfiguration","buildOpenContentPart","buildNewContentPart","partId","buildSetTheme","buildSetPenStyle","buildSetPenStyleClasses","partChange","contentChange","buildUrl","retry","sendMessage","sendFailedException","IinkWsConfiguration","NEBO","xDpi","yDpi","viewSizeHeight","viewSizeWidth","buildAddStrokes","buildUndo","buildRedo","buildClear","buildConvert","buildZoom","zoom","buildResize","buildExport","requestedMimeType","buildImportFile","importFileId","buildImportChunk","lastChunk","buildPointerEvents","buildWaitForIdle","buildGetSupportedImportMimeTypes","styleClasses","responseCallback","_prepareMessage","buildFunction","WsRecognizerUtil","resp","contentChanged","WsBuilder","errPartChanged","resPartChanged","errContentChanged","resContentChanged","DefaultRecognizer","chunkSize","messages","blob","fileReader","FileReader","readAsText","readBlob","PointerEventGrabber","QuadraticCanvasStroker","QuadraticSVGStroker","CanvasRenderer","SVGRenderer","iinkRestRecognizer","iinkWsRecognizer","composed","register","getAvailableLanguageList","languagesJson","LoggerConfig"],"mappings":"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"}