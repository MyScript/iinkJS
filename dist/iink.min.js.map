{"version":3,"file":"iink.min.js","sources":["../src/configuration/Constants.js","../node_modules/loglevel/lib/loglevel.js","../src/configuration/LoggerConfig.js","../node_modules/lodash.merge/index.js","../src/configuration/DefaultConfiguration.js","../node_modules/json-css/lib/jsoncss.min.js","../src/configuration/DefaultPenStyle.js","../src/configuration/DefaultTheme.js","../src/grabber/PointerEventGrabber.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../src/renderer/canvas/symbols/StrokeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/ShapeSymbolCanvasRenderer.js","../src/renderer/canvas/symbols/TextSymbolCanvasRenderer.js","../src/model/StrokeComponent.js","../src/model/Symbol.js","../src/model/InkModel.js","../src/renderer/canvas/CanvasRenderer.js","../src/renderer/QuadraticUtils.js","../src/renderer/canvas/stroker/QuadraticCanvasStroker.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../src/renderer/svg/symbols/StrokeSymbolSVGRenderer.js","../src/renderer/svg/SVGRenderer.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/select.js","../src/renderer/svg/stroker/QuadraticSVGStroker.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/crypto-js/core.js","../node_modules/crypto-js/enc-hex.js","../node_modules/crypto-js/x64-core.js","../node_modules/crypto-js/sha512.js","../node_modules/crypto-js/hmac.js","../node_modules/crypto-js/hmac-sha512.js","../src/recognizer/CryptoHelper.js","../src/recognizer/rest/networkInterface.js","../src/model/RecognizerContext.js","../node_modules/perfect-scrollbar/dist/perfect-scrollbar.esm.js","../node_modules/select/src/select.js","../node_modules/clipboard/lib/clipboard-action.js","../node_modules/tiny-emitter/index.js","../node_modules/good-listener/src/is.js","../node_modules/delegate/src/closest.js","../node_modules/delegate/src/delegate.js","../node_modules/good-listener/src/listen.js","../node_modules/clipboard/lib/clipboard.js","../src/smartguide/SmartGuide.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../src/model/UndoRedoContext.js","../src/model/UndoRedoManager.js","../src/renderer/canvas/ImageRenderer.js","../src/eastereggs/InkImporter.js","../src/util/PromiseHelper.js","../src/Editor.js","../src/configuration/DefaultBehaviors.js","../src/recognizer/RecognizerService.js","../src/recognizer/DefaultRecognizer.js","../src/recognizer/rest/iinkRestRecognizer.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/uuid-js/lib/uuid.js","../src/recognizer/websocket/networkWSInterface.js","../src/recognizer/websocket/WsBuilder.js","../src/recognizer/websocket/WsRecognizerUtil.js","../src/recognizer/websocket/iinkWsRecognizer.js","../src/event/Event.js","../src/EditorFacade.js","../src/iink.js"],"sourcesContent":["/**\n * @typedef {Object} Constants\n */\n\nconst Constants = {\n  EventType: {\n    IDLE: 'idle',\n    CHANGED: 'changed',\n    IMPORTED: 'imported',\n    EXPORTED: 'exported',\n    CONVERTED: 'converted',\n    RENDERED: 'rendered', // Internal use only\n    LOADED: 'loaded',\n    UNDO: 'undo',\n    REDO: 'redo',\n    CLEAR: 'clear',\n    IMPORT: 'import',\n    SUPPORTED_IMPORT_MIMETYPES: 'supportedImportMimeTypes',\n    EXPORT: 'export',\n    CONVERT: 'convert',\n    ERROR: 'error'\n  },\n  RecognitionType: {\n    TEXT: 'TEXT',\n    MATH: 'MATH',\n    DIAGRAM: 'DIAGRAM',\n    RAWCONTENT: 'Raw Content'\n  },\n  Protocol: {\n    WEBSOCKET: 'WEBSOCKET',\n    REST: 'REST'\n  },\n  ModelState: {\n    INITIALIZING: 'INITIALIZING',\n    INITIALIZED: 'INITIALIZED',\n    EXPORTING: 'EXPORTING',\n    EXPORTED: 'EXPORTED',\n    PENDING: 'PENDING',\n    MODIFIED: 'MODIFIED',\n    ERROR: 'ERROR'\n  },\n  Trigger: {\n    QUIET_PERIOD: 'QUIET_PERIOD',\n    POINTER_UP: 'POINTER_UP',\n    DEMAND: 'DEMAND'\n  },\n  Logger: {\n    EDITOR: 'editor',\n    MODEL: 'model',\n    GRABBER: 'grabber',\n    RENDERER: 'renderer',\n    RECOGNIZER: 'recognizer',\n    EVENT: 'event',\n    UTIL: 'util',\n    SMARTGUIDE: 'smartguide'\n  },\n  LogLevel: {\n    TRACE: 'TRACE',\n    DEBUG: 'DEBUG',\n    INFO: 'INFO',\n    WARN: 'WARN',\n    ERROR: 'ERROR'\n  },\n  Languages: {\n    zh_CN: 'Noto Sans CJK tc',\n    zh_HK: 'Noto Sans CJK tc',\n    zh_TW: 'Noto Sans CJK tc',\n    ko_KR: 'Noto Sans CJK kr',\n    ja_JP: 'Noto Sans CJK jp',\n    default: 'Open Sans'\n  },\n  Error: {\n    NOT_REACHABLE: 'MyScript recognition server is not reachable. Please reload once you are connected.',\n    WRONG_CREDENTIALS: 'Application credentials are invalid. Please check or regenerate your application key and hmackey.',\n    TOO_OLD: 'Session is too old. Max Session Duration Reached.',\n    NO_ACTIVITY: 'Session closed due to no activity.'\n  },\n  Exports: {\n    JIIX: 'application/vnd.myscript.jiix'\n  }\n}\nexport default Constants\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","import * as loglevel from 'loglevel'\nimport Constants from './Constants'\n\n/**\n * Main log instance\n * @type {Object}\n */\nconst log = loglevel.noConflict()\nexport default log\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const editorLogger = log.getLogger(Constants.Logger.EDITOR)\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log editor events\n * @type {Object}\n */\nexport const smartGuideLogger = log.getLogger(Constants.Logger.SMARTGUIDE)\neditorLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log model events\n * @type {Object}\n */\nexport const modelLogger = log.getLogger(Constants.Logger.MODEL)\nmodelLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const grabberLogger = log.getLogger(Constants.Logger.GRABBER)\ngrabberLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log grabber events\n * @type {Object}\n */\nexport const rendererLogger = log.getLogger(Constants.Logger.RENDERER)\nrendererLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log recognizer events\n * @type {Object}\n */\nexport const recognizerLogger = log.getLogger(Constants.Logger.RECOGNIZER)\nrecognizerLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log callback events\n * @type {Object}\n */\nexport const eventLogger = log.getLogger(Constants.Logger.EVENT)\neventLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log util events\n * @type {Object}\n */\nexport const utilLogger = log.getLogger(Constants.Logger.UTIL)\nutilLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n\n/**\n * Log tests events\n * @type {Object}\n */\nexport const testLogger = log.getLogger('test')\ntestLogger.setDefaultLevel(Constants.LogLevel.ERROR)\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = merge;\n","import merge from 'lodash.merge'\nimport { editorLogger as logger } from './LoggerConfig'\n\n/**\n * Default configuration\n * See https://developer.myscript.com/docs/interactive-ink/latest/reference/web/configuration/ for a full documentation of parameters.\n */\nconst defaultConfiguration = {\n  recognitionParams: {\n    type: 'TEXT',\n    protocol: 'WEBSOCKET',\n    server: {\n      scheme: 'https',\n      host: 'cloud.myscript.com',\n      applicationKey: undefined,\n      hmacKey: undefined,\n      useWindowLocation: false,\n      websocket: {\n        pingEnabled: true,\n        pingDelay: 30000,\n        maxPingLostCount: 10,\n        autoReconnect: true,\n        maxRetryCount: 2,\n        fileChunkSize: 300000\n      }\n    },\n    iink: {\n      alwaysConnected: true,\n      lang: 'en_US',\n      export: {\n        'image-resolution': 300,\n        jiix: {\n          'bounding-box': false,\n          strokes: false,\n          text: {\n            chars: false,\n            words: true\n          }\n        }\n      },\n      renderer: {\n        debug: {\n          'draw-text-boxes': false,\n          'draw-image-boxes': false\n        }\n      },\n      math: {\n        mimeTypes: ['application/x-latex', 'application/mathml+xml'],\n        solver: {\n          enable: true,\n          'fractional-part-digits': 3,\n          'decimal-separator': '.',\n          'rounding-mode': 'half up',\n          'angle-unit': 'deg'\n        },\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        },\n        eraser: {\n          'erase-precisely': false\n        }\n      },\n      text: {\n        guides: {\n          enable: true\n        },\n        smartGuide: true,\n        smartGuideFadeOut: {\n          enable: false,\n          duration: 10000\n        },\n        mimeTypes: ['text/plain', 'application/vnd.myscript.jiix'],\n        margin: {\n          top: 20,\n          left: 10,\n          right: 10\n        },\n        eraser: {\n          'erase-precisely': false\n        }\n      },\n      diagram: {\n        mimeTypes: ['application/vnd.myscript.jiix'],\n        margin: {\n          bottom: 10,\n          left: 15,\n          right: 15,\n          top: 10\n        }\n      },\n      'raw-content': {\n        recognition: {\n          text: false,\n          shape: false\n        }\n      }\n    }\n  },\n  // @see generated documentation on top\n  listenerOptions: {\n    capture: false,\n    passive: true\n  },\n  undoRedoMaxStackSize: 20,\n  xyFloatPrecision: 0,\n  timestampFloatPrecision: 0,\n  triggerDelay: 2000,\n  processDelay: 0,\n  resizeTriggerDelay: 200,\n  // Configure when the action is triggered.\n  // POINTER_UP : Action is triggered on every PenUP. This is the recommended mode for CDK V3 WebSocket recognitions.\n  // QUIET_PERIOD : Action is triggered after a quiet period in milli-seconds on every pointer up. I value is set to 2000 for example the recognition will be fired  when user stop writing 2 seconds. This is the recommended mode for all REST recognitions.\n  triggers: {\n    exportContent: 'POINTER_UP',\n    addStrokes: 'POINTER_UP'\n  },\n  restConversionState: '',\n  renderingParams: {\n    stroker: 'quadratic',\n    minHeight: 100,\n    minWidth: 100\n  }\n}\n\n/**\n * Generate parameters\n * @param {Configuration} configuration Configuration to be used\n * @param {Object} watcher: { update: function, prop: string} function to call when 'prop' is updated\n * @return {Configuration} Overridden configuration\n */\nexport function overrideDefaultConfiguration (configuration) {\n  const confRef = configuration\n  let currentConfiguration\n  if (confRef && confRef.recognitionParams.server && confRef.recognitionParams.server.useWindowLocation) {\n    confRef.recognitionParams.server.scheme = window.location.protocol.slice(0, -1)\n    confRef.recognitionParams.server.host = window.location.host\n    currentConfiguration = merge({}, defaultConfiguration, confRef === undefined ? {} : confRef)\n  } else {\n    currentConfiguration = merge({}, defaultConfiguration, configuration === undefined ? {} : configuration)\n  }\n  logger.debug('Override default configuration', currentConfiguration)\n\n  return currentConfiguration\n}\n\nexport default defaultConfiguration\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.JsonCSS=e():t.JsonCSS=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=1)}([function(t,e,n){\"use strict\";function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=function t(e){var n=this;o(this,t),this.toJSON=function(t){if(\"string\"!=typeof t)return console.error(\"Need a CSS string but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid CSS..!\";var e={},o=void 0,i=void 0,u=void 0;try{t.split(\"{\").forEach(function(t){if(i=t.trim())if(-1===i.indexOf(\"}\"))e[i]={},o=i;else{i.substring(0,i.indexOf(\"}\")).split(\";\").forEach(function(t){(u=t.split(\":\"))&&2===u.length&&(e[o][u[0].trim().replace(/^\\\"|\\\"$/g,\"\")]=n._trimSemiColon(u[1].trim().replace(/^\\\"|\\\"$/g,\"\")))});try{o=i.split(\"}\")[1].trim(),o&&(e[o]={})}catch(t){}}})}catch(t){return\"Not a valid CSS..!\"}return e},this.toCSS=function(t){if(\"object\"!==(void 0===t?\"undefined\":r(t)))return console.error(\"Need a JSON object but given \",void 0===t?\"undefined\":r(t),t),\"Not a valid JSON..!\";var e=\"\";try{for(var n in t)if(t.hasOwnProperty(n)){e+=n+\" {\\n\";for(var o in t[n])t[n].hasOwnProperty(o)&&(e+=o+\": \"+t[n][o]+\";\\n\");e+=\"}\\n\"}}catch(t){return\"Not a valid JSON..!\"}return e},this._trimSemiColon=function(t){return\";\"===t.slice(-1)?t.slice(0,n.length-1):t}};e.default=i},function(t,e,n){\"use strict\";t.exports=n(0).default}])});","import JsonCSS from 'json-css'\nimport merge from 'lodash.merge'\nimport { editorLogger as logger } from './LoggerConfig'\n\n/**\n * @typedef {Object} PenStyle\n * @property {String} color=#000000 Color (supported formats rgb() rgba() hsl() hsla() #rgb #rgba #rrggbb #rrggbbaa)\n * @property {String} -myscript-pen-width=1 Width of strokes and primitives in mm (no other unit is supported yet)\n * @property {String} -myscript-pen-fill-style=none\n * @property {String} -myscript-pen-fill-color=#FFFFFF00 Color filled inside the area delimited by strokes and primitives\n */\n\n/**\n * Default style\n * @type {PenStyle}\n */\nconst defaultPenStyle = undefined\nconst parser = new JsonCSS()\n\n/**\n * Generate style\n * @param {PenStyle} style Custom style to be applied\n * @return {PenStyle} Overridden style\n */\nexport function overrideDefaultPenStyle (style) {\n  const currentStyle = merge({}, defaultPenStyle, style === undefined ? {} : style)\n  logger.debug('Override default pen style', currentStyle)\n  return currentStyle\n}\n\nexport function toCSS (penStyle) { // FIXME Ugly hack to parse JSON to CSS inline\n  const css = parser.toCSS({ css: penStyle })\n  return css.substring(6, css.length - 3)\n}\n\nexport function toJSON (penStyle) { // FIXME Ugly hack to parse CSS inline to JSON\n  return parser.toJSON(`css {${penStyle}}`).css\n}\n\nexport default defaultPenStyle\n","import JsonCSS from 'json-css'\nimport merge from 'lodash.merge'\nimport { editorLogger as logger } from './LoggerConfig'\n\n/**\n * @typedef {PenStyle} InkTheme\n */\n/**\n * @typedef {Object} MathTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n */\n/**\n * @typedef {Object} GeneratedTheme\n * @property {String} font-family=STIXGeneral Font-family to be used\n * @property {String} color=#A8A8A8FF Color to be used\n */\n/**\n * @typedef {Object} TextTheme\n * @property {String} font-family=OpenSans Font-family to be used\n * @property {Number} font-size=10 Font-size to be used\n */\n/**\n * @typedef {Object} Theme\n * @property {InkTheme} ink General settings\n * @property {MathTheme} .math Math theme\n * @property {GeneratedTheme} .math-solver Theme to be used for generated items\n * @property {TextTheme} .text Text theme\n */\n\n/**\n * Default theme\n * @type {Theme}\n */\nconst defaultTheme = {\n  ink: {\n    color: '#000000',\n    '-myscript-pen-width': 1,\n    '-myscript-pen-fill-style': 'none',\n    '-myscript-pen-fill-color': '#FFFFFF00'\n  },\n  '.math': {\n    'font-family': 'STIXGeneral'\n  },\n  '.math-solved': {\n    'font-family': 'STIXGeneral',\n    color: '#A8A8A8FF'\n  },\n  '.text': {\n    'font-family': 'Open Sans',\n    'font-size': 10\n  }\n}\nconst parser = new JsonCSS()\n\n/**\n * Generate theme\n * @param {Theme} theme Custom theme to be applied\n * @return {Theme} Overridden theme\n */\nexport function overrideDefaultTheme (theme) {\n  const currentTheme = merge({}, defaultTheme, theme === undefined ? {} : theme)\n  logger.debug('Override default theme', currentTheme)\n  return currentTheme\n}\n\nexport function toCSS (theme) {\n  return parser.toCSS(theme)\n}\n\nexport function toJSON (theme) {\n  return parser.toJSON(theme)\n}\n\nexport default defaultTheme\n","import { grabberLogger as logger } from '../configuration/LoggerConfig'\n\n/**\n * Grab pointerDown, pointerMove and pointerUp events\n * @typedef {Object} Grabber\n * @property {function} attach Attach events and decide when to call editor pointerDown/Move/Up methods\n * @property {function} detach Detach the grabber\n */\n\n/**\n * Grabber listener\n * @typedef {Object} GrabberListener\n * @property {Array<String>} types Event types to listen\n * @property {function} listener Event listener for these events\n */\n\n/**\n * Grabber context\n * @typedef {Object} GrabberContext\n * @property {Boolean|Object} options Options object that specifies characteristics about the event listener. (@see addEventListener.options for detail)\n * @property {Array<GrabberListener>} listeners Registered listeners\n */\n\nconst floatPrecisionArray = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000]\n\nfunction roundFloat (oneFloat, requestedFloatPrecision) {\n  if (requestedFloatPrecision || requestedFloatPrecision === 0) {\n    let floatPrecision\n    if (requestedFloatPrecision > 10) {\n      floatPrecision = floatPrecisionArray[10]\n    } else {\n      floatPrecision = floatPrecisionArray[requestedFloatPrecision]\n    }\n    return Math.round(oneFloat * floatPrecision) / floatPrecision\n  }\n  return oneFloat\n}\n\nfunction extractPoint (event, domElement, configuration, offsetTop = 0, offsetLeft = 0) {\n  let eventRef = event\n  if (eventRef.changedTouches) {\n    eventRef = eventRef.changedTouches[0]\n  }\n  const rect = domElement.getBoundingClientRect()\n  return {\n    x: roundFloat(eventRef.clientX - rect.left - domElement.clientLeft - offsetLeft, configuration.xyFloatPrecision),\n    y: roundFloat(eventRef.clientY - rect.top - domElement.clientTop - offsetTop, configuration.xyFloatPrecision),\n    t: roundFloat(Date.now(), configuration.timestampFloatPrecision)\n  }\n}\n\nconst prevent = (e) => e.preventDefault()\n/**\n * Listen for the desired events\n * @param {Element} element DOM element to attach events listeners\n * @param {Editor} editor Editor to received down/move/up events\n * @param {Number} [offsetTop=0]\n * @param {Number} [offsetLeft=0]\n * @return {GrabberContext} Grabber context\n * @listens {Event} pointermove: a pointer moves, similar to touchmove or mousemove.\n * @listens {Event} pointerdown: a pointer is activated, or a device button held.\n * @listens {Event} pointerup: a pointer is deactivated, or a device button released.\n * @listens {Event} pointerover: a pointer has moved onto an element.\n * @listens {Event} pointerout: a pointer is no longer on an element it once was.\n * @listens {Event} pointerenter: a pointer enters the bounding box of an element.\n * @listens {Event} pointerleave: a pointer leaves the bounding box of an element.\n * @listens {Event} pointercancel: a pointer will no longer generate events.\n */\nexport function attach (element, editor, offsetTop = 0, offsetLeft = 0) {\n  let mMaxDiffX = 0\n\n  function unfocus () {\n    if (window.getSelection().type !== 'None') {\n      window.getSelection().removeAllRanges()\n    }\n  }\n\n  function hideMenu (evt) {\n    const moreMenuInDocument = document.querySelector('.more-menu')\n    if (!evt.target.classList.contains('ellipsis') && !evt.target.classList.contains('more-menu') && !evt.target.classList.contains('options-label-button') && moreMenuInDocument && moreMenuInDocument.style.display !== 'none') {\n      moreMenuInDocument.style.display = 'none'\n      return true\n    }\n    return false\n  }\n\n  function hideCandidates (evt) {\n    const candidatesInDocument = document.querySelector('.candidates')\n    if (!evt.target.classList.contains('candidates') && !(evt.target.tagName === 'SPAN') && candidatesInDocument && candidatesInDocument.style.display !== 'none') {\n      candidatesInDocument.style.display = 'none'\n      return true\n    }\n    return false\n  }\n\n  function pointerDownHandler (evt) { // Trigger a pointerDown\n    const pointerDownOnEditor = evt.target.id === editor.domElement.id || evt.target.classList.contains('ms-canvas')\n    if (this.activePointerId !== undefined) {\n      if (this.activePointerId === evt.pointerId) {\n        logger.trace(`${evt.type} event with the same id without any pointer up`, evt.pointerId)\n      }\n    } else if ((evt.button !== 2) && (evt.buttons !== 2) && pointerDownOnEditor) { // Ignore right click\n      if (!hideMenu(evt) && !hideCandidates(evt)) {\n        this.activePointerId = evt.pointerId\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId\n        unfocus()\n        evt.stopPropagation()\n        let pointerType = evt.pointerType\n        if (editor.isErasing) {\n          pointerType = 'ERASER'\n        }\n        editor.pointerDown(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft), pointerType, pointerId)\n      }\n    } else if (evt.target.classList.contains('ellipsis') || evt.target.classList.contains('tag-icon')) {\n      hideMenu(evt)\n      hideCandidates(evt)\n    } else { // FIXME add more complete verification to pointer down on smartguide\n      hideMenu(evt)\n      hideCandidates(evt)\n      this.smartGuidePointerDown = true\n      this.downSmartGuidePoint = extractPoint(evt, element, editor.configuration)\n    }\n  }\n\n  function pointerMoveHandler (evt) { // Trigger a pointerMove\n    // Only considering the active pointer\n    if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) {\n      unfocus()\n      editor.pointerMove(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft))\n    } else if (this.smartGuidePointerDown) {\n      const point = extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft)\n      const diffX = Math.abs(this.downSmartGuidePoint.x - point.x)\n      const diffY = Math.abs(this.downSmartGuidePoint.y - point.y)\n      mMaxDiffX = Math.max(diffX, mMaxDiffX)\n      const cond1 = diffX < 5 && diffY > 5 && mMaxDiffX < 15\n      const cond2 = diffX > 5 && diffY > 5 && mMaxDiffX < 15\n      if (cond1 || cond2) {\n        this.activePointerId = evt.pointerId\n        // Hack for iOS 9 Safari : pointerId has to be int so -1 if > max value\n        const pointerId = evt.pointerId > 2147483647 ? -1 : evt.pointerId\n        unfocus()\n        editor.pointerDown(this.downSmartGuidePoint, evt.pointerType, pointerId)\n      }\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId)\n    }\n  }\n\n  function pointerUpHandler (evt) { // Trigger a pointerUp\n    mMaxDiffX = 0\n    this.smartGuidePointerDown = false\n    const smartGuideIds = ['smartguide', 'prompter-text-container', 'prompter-text', 'tag-icon', 'ellipsis']\n    const scrollbarClasses = ['ps__rail-x', 'ps__thumb-x']\n    // Check if pointer entered into any smartguide elements or scrollbar\n    // Use case : when the pointer is entering the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left.\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerEnteredSmartGuide = evt.relatedTarget && (smartGuideIds.includes(evt.relatedTarget.className) || scrollbarClasses.includes(evt.relatedTarget.className))\n    // Check if pointer didn't stay in the smartguide and pointer exited the smartguide or scrollbar\n    // Use case : when the pointer is leaving the smartguide or scrollbar, a pointerout (or leave) is fired.\n    // The related target is then the DOM element that was left (the smart guide)\n    // We are entering again the editor\n    // We don't want this to cause editor.pointerUp because the stroke isn't finished.\n    const pointerExitedSmartGuide = evt.relatedTarget && evt.target && (smartGuideIds.includes(evt.target.className) || scrollbarClasses.includes(evt.target.className))\n    // Check if pointer moved between words in smartguide\n    // Same use case as pointerEnteredSmartGuide but for the words in the smartguide (each word is a span).\n    const pointerMovedWords = evt.relatedTarget && evt.target && (evt.target.tagName === 'SPAN' || evt.relatedTarget.tagName === 'SPAN')\n    if (pointerEnteredSmartGuide || pointerExitedSmartGuide || pointerMovedWords) {\n      evt.stopPropagation()\n    } else if (this.activePointerId !== undefined && this.activePointerId === evt.pointerId) { // Only considering the active pointer\n      this.activePointerId = undefined // Managing the active pointer\n      evt.stopPropagation()\n      editor.pointerUp(extractPoint(evt, element, editor.configuration, offsetTop, offsetLeft))\n    } else {\n      logger.trace(`${evt.type} event from another pointerid (${evt.pointerId})`, this.activePointerId)\n    }\n  }\n\n  const context = {\n    options: editor.configuration.listenerOptions,\n    listeners: [{\n      types: ['pointerdown'],\n      listener: pointerDownHandler\n    }, {\n      types: ['pointermove'],\n      listener: pointerMoveHandler\n    }, {\n      types: ['pointerup', 'pointerout', 'pointerleave', 'pointercancel'],\n      listener: pointerUpHandler\n    }]\n  }\n\n  logger.debug('attaching listeners', context)\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.addEventListener(type, item.listener, context.options))\n  })\n\n  element.addEventListener('touchmove', prevent)\n\n  // FIXME investigate why this is needed for iOS devices\n  document.documentElement.addEventListener('pointerdown', () => {})\n  return context\n}\n\nexport function detach (element, context) {\n  logger.debug('detaching listeners', context)\n  context.listeners.forEach((item) => {\n    item.types.forEach(type => element.removeEventListener(type, item.listener, context.options))\n  })\n  element.removeEventListener('touchmove', prevent)\n  document.documentElement.removeEventListener('pointerdown', () => {})\n}\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke (context, stroke, stroker) {\n  if (stroker && (!stroke || stroke.pointerType !== 'ERASER')) {\n    stroker.drawStroke(context, stroke)\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig'\n\n/**\n * @type {{table: String, shape: String, recognizedShape: String, ellipse: String, line: String}}\n */\nexport const ShapeSymbols = {\n  table: 'table',\n  shape: 'shape',\n  recognizedShape: 'recognizedShape',\n  ellipse: 'ellipse',\n  line: 'line'\n}\n\nfunction phi (angle) {\n  let returnedAngle = ((angle + Math.PI) % (Math.PI * 2)) - Math.PI\n  if (returnedAngle < -Math.PI) {\n    returnedAngle += Math.PI * 2\n  }\n  return returnedAngle\n}\n\nfunction drawEllipseArc (context, centerPoint, maxRadius, minRadius, orientation, startAngle, sweepAngle) {\n  const angleStep = 0.02 // angle delta between interpolated\n\n  let z1 = Math.cos(orientation)\n  let z3 = Math.sin(orientation)\n  let z2 = z1\n  let z4 = z3\n  z1 *= maxRadius\n  z2 *= minRadius\n  z3 *= maxRadius\n  z4 *= minRadius\n\n  const n = Math.floor(Math.abs(sweepAngle) / angleStep)\n\n  const boundariesPoints = []\n\n  context.save()\n  try {\n    context.beginPath()\n\n    for (let i = 0; i <= n; i++) {\n      const angle = startAngle + ((i / n) * sweepAngle) // points on the arc, in radian\n      const alpha = Math.atan2(Math.sin(angle) / minRadius, Math.cos(angle) / maxRadius)\n\n      const cosAlpha = Math.cos(alpha)\n      const sinAlpha = Math.sin(alpha)\n\n      // current point\n      const x = (centerPoint.x + (z1 * cosAlpha)) - (z4 * sinAlpha)\n      const y = (centerPoint.y + (z2 * sinAlpha)) + (z3 * cosAlpha)\n      if (i === 0) {\n        context.moveTo(x, y)\n      } else {\n        context.lineTo(x, y)\n      }\n\n      if (i === 0 || i === n) {\n        boundariesPoints.push({ x, y })\n      }\n    }\n\n    context.stroke()\n  } finally {\n    context.restore()\n  }\n\n  return boundariesPoints\n}\n\nfunction drawArrowHead (context, headPoint, angle, length) {\n  const alpha = phi(angle + (Math.PI * (7 / 8)))\n  const beta = phi(angle - (Math.PI * (7 / 8)))\n\n  const contextReference = context\n  contextReference.save()\n  try {\n    contextReference.fillStyle = contextReference.strokeStyle\n\n    contextReference.moveTo(headPoint.x, headPoint.y)\n    contextReference.beginPath()\n    contextReference.lineTo(headPoint.x + (length * Math.cos(alpha)), headPoint.y + (length * Math.sin(alpha)))\n    contextReference.lineTo(headPoint.x + (length * Math.cos(beta)), headPoint.y + (length * Math.sin(beta)))\n    contextReference.lineTo(headPoint.x, headPoint.y)\n    contextReference.fill()\n  } finally {\n    contextReference.restore()\n  }\n}\n\nfunction drawShapeEllipse (context, shapeEllipse) {\n  const points = drawEllipseArc(\n    context,\n    shapeEllipse.center,\n    shapeEllipse.maxRadius,\n    shapeEllipse.minRadius,\n    shapeEllipse.orientation,\n    shapeEllipse.startAngle,\n    shapeEllipse.sweepAngle)\n\n  if (shapeEllipse.beginDecoration && shapeEllipse.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[0], shapeEllipse.beginTangentAngle, 12.0)\n  }\n  if (shapeEllipse.endDecoration && shapeEllipse.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, points[1], shapeEllipse.endTangentAngle, 12.0)\n  }\n}\n\n/**\n * Draw a line\n * @param {Object} context Current rendering context\n * @param {{x: Number, y: Number}} p1 Origin point\n * @param {{x: Number, y: Number}} p2 Destination point\n */\nexport function drawLine (context, p1, p2) {\n  context.save()\n  try {\n    context.beginPath()\n    context.moveTo(p1.x, p1.y)\n    context.lineTo(p2.x, p2.y)\n    context.stroke()\n  } finally {\n    context.restore()\n  }\n}\n\nfunction drawShapeLine (context, shapeLine) {\n  drawLine(context, shapeLine.firstPoint, shapeLine.lastPoint)\n  if (shapeLine.beginDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.firstPoint, shapeLine.beginTangentAngle, 12.0)\n  }\n  if (shapeLine.endDecoration === 'ARROW_HEAD') {\n    drawArrowHead(context, shapeLine.lastPoint, shapeLine.endTangentAngle, 12.0)\n  }\n}\n\n/**\n * Draw a shape symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawShapeSymbol (context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`)\n  const contextReference = context\n  contextReference.save()\n  try {\n    contextReference.lineWidth = symbol.width\n    contextReference.strokeStyle = symbol.color\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case ShapeSymbols.shape:\n          drawShapeSymbol(contextReference, symbol.candidates[symbol.selectedCandidateIndex])\n          break\n        case ShapeSymbols.table:\n          symbol.lines.forEach(line => drawShapeSymbol(contextReference, line))\n          break\n        case ShapeSymbols.line:\n          drawLine(contextReference, symbol.data.p1, symbol.data.p2)\n          break\n        default:\n          logger.error(`${symbol.elementType} not implemented`)\n          break\n      }\n    } else {\n      switch (symbol.type) {\n        case ShapeSymbols.ellipse:\n          drawShapeEllipse(contextReference, symbol)\n          break\n        case ShapeSymbols.line:\n          drawShapeLine(contextReference, symbol)\n          break\n        case ShapeSymbols.recognizedShape:\n          symbol.primitives.forEach(primitive => drawShapeSymbol(contextReference, primitive))\n          break\n        default:\n          logger.error(`${symbol.type} not implemented`)\n          break\n      }\n    }\n  } finally {\n    contextReference.restore()\n  }\n}\n","import { rendererLogger as logger } from '../../../configuration/LoggerConfig'\nimport { drawLine } from './ShapeSymbolCanvasRenderer'\n\n/**\n * @type {{inputCharacter: String, char: String, string: String, textLine: String}}\n */\nexport const TextSymbols = {\n  inputCharacter: 'inputCharacter',\n  char: 'char',\n  string: 'string',\n  textLine: 'textLine'\n}\n\nfunction drawUnderline (context, underline, label, data) {\n  const delta = data.width / label.length\n  const p1 = {\n    x: data.topLeftPoint.x + (underline.data.firstCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  }\n  const p2 = {\n    x: data.topLeftPoint.x + (underline.data.lastCharacter * delta),\n    y: data.topLeftPoint.y + data.height\n  }\n  drawLine(context, p1, p2)\n}\n\nfunction drawText (context, label, data) {\n  const contextReference = context\n  contextReference.save()\n  try {\n    contextReference.font = `${data.textHeight}px serif`\n    contextReference.textAlign = (data.justificationType === 'CENTER') ? 'center' : 'left'\n    contextReference.textBaseline = 'bottom'\n    contextReference.fillStyle = contextReference.strokeStyle\n    contextReference.fillText(label, data.topLeftPoint.x, (data.topLeftPoint.y + data.height))\n  } finally {\n    contextReference.restore()\n  }\n}\n\nfunction drawTextLine (context, textLine) {\n  drawText(context, textLine.label, textLine.data)\n  textLine.underlineList.forEach((underline) => {\n    drawUnderline(context, underline, textLine.label, textLine.data)\n  })\n}\n\n/**\n * Draw a text symbol\n * @param {Object} context Current rendering context\n * @param {Object} symbol Symbol to draw\n */\nexport function drawTextSymbol (context, symbol) {\n  logger.debug(`draw ${symbol.type} symbol`)\n  const contextReference = context\n  contextReference.save()\n  try {\n    contextReference.lineWidth = symbol.width\n    contextReference.strokeStyle = symbol.color\n\n    if (symbol.elementType) {\n      switch (symbol.elementType) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol)\n          break\n        default:\n          logger.error(`${symbol.elementType} not implemented`)\n          break\n      }\n    } else {\n      switch (symbol.type) {\n        case TextSymbols.textLine:\n          drawTextLine(contextReference, symbol)\n          break\n        default:\n          logger.error(`${symbol.type} not implemented`)\n      }\n    }\n  } finally {\n    contextReference.restore()\n  }\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig'\n\n/**\n * Stroke symbol\n * @typedef {Object} Stroke\n * @property {String} type=stroke Symbol type, 'stroke' for stroke\n * @property {String} pointerType=undefined Pointer type\n * @property {Number} pointerId=undefined Pointer id\n * @property {Array<Number>} x=[] X coordinates\n * @property {Array<Number>} y=[] Y coordinates\n * @property {Array<Number>} t=[] Timestamps matching x,y coordinates\n * @property {Array<Number>} p=[] Pressure\n * @property {Array<Number>} l=[] Length from origin\n * @property {Number} width=0 (for rendering) Pen/brush width\n * @property {String} color=undefined (for rendering) Pen/brush color\n */\n\n/**\n * pointerEvents symbol\n * @typedef {Object} pointerEvents\n * @property {String} type=pointerEvents Symbol type, 'pointerEvents' for pointerEvents\n * @property {Boolean} processGestures=False indicates if the gestures have to be processed\n * @property {Array<Stroke>} events=[] the events to process\n */\n\nfunction computeDistance (x, y, xArray, yArray, lastIndexPoint) {\n  const distance = Math.sqrt(Math.pow((y - yArray[lastIndexPoint - 1]), 2) + Math.pow((x - xArray[lastIndexPoint - 1]), 2))\n  return isNaN(distance) ? 0 : distance\n}\n\nfunction computeLength (x, y, xArray, yArray, lArray, lastIndexPoint) {\n  const length = lArray[lastIndexPoint - 1] + computeDistance(x, y, xArray, yArray, lastIndexPoint)\n  return isNaN(length) ? 0 : length\n}\n\nfunction computePressure (x, y, xArray, yArray, lArray, lastIndexPoint) {\n  let ratio = 1.0\n  const distance = computeDistance(x, y, xArray, yArray, lastIndexPoint)\n  const length = computeLength(x, y, xArray, yArray, lArray, lastIndexPoint)\n\n  if (length === 0) {\n    ratio = 0.5\n  } else if (distance === length) {\n    ratio = 1.0\n  } else if (distance < 10) {\n    ratio = 0.2 + Math.pow(0.1 * distance, 0.4)\n  } else if (distance > length - 10) {\n    ratio = 0.2 + Math.pow(0.1 * (length - distance), 0.4)\n  }\n  const pressure = ratio * Math.max(0.1, 1.0 - (0.1 * Math.sqrt(distance)))\n  return isNaN(parseFloat(pressure)) ? 0.5 : pressure\n}\n\nfunction filterPointByAcquisitionDelta (x, y, xArray, yArray, width) {\n  const delta = (2 + (width / 4))\n  let ret = false\n  if (xArray.length === 0 || yArray.length === 0 || Math.abs(xArray[xArray.length - 1] - x) >= delta || Math.abs(yArray[yArray.length - 1] - y) >= delta) {\n    ret = true\n  }\n  return ret\n}\n\n/**\n * Create a new stroke\n * @param {Object} properties Properties to be applied to the stroke.\n * @return {Stroke} New stroke with properties for quadratics draw\n */\nexport function createStrokeComponent (properties) {\n  const defaultStroke = {\n    type: 'stroke',\n    x: [],\n    y: [],\n    t: [],\n    p: [],\n    l: [],\n    width: 0\n  }\n  return Object.assign({}, defaultStroke, properties)\n}\n\n/**\n * Get a JSON copy of a stroke by filtering its properties\n * @param {Stroke} stroke Current stroke\n * @return {{x: Array<Number>, y: Array<Number>, t: Array<Number>}} Simplified stroke object\n */\nexport function toJSON (stroke) {\n  return { x: stroke.x, y: stroke.y, t: stroke.t, pointerType: stroke.pointerType }\n}\n\n/**\n * Mutate a stroke by adding a point to it.\n * @param {Stroke} stroke Current stroke\n * @param {{x: Number, y: Number, t: Number}} point Point to add\n * @return {Stroke} Updated stroke\n */\nexport function addPoint (stroke, point) {\n  const strokeReference = stroke\n  if (filterPointByAcquisitionDelta(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.width)) {\n    strokeReference.x.push(point.x)\n    strokeReference.y.push(point.y)\n    strokeReference.t.push(point.t)\n    strokeReference.p.push(computePressure(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1))\n    strokeReference.l.push(computeLength(point.x, point.y, strokeReference.x, strokeReference.y, strokeReference.l, strokeReference.x.length - 1))\n  } else {\n    logger.trace('ignore filtered point', point)\n  }\n  return strokeReference\n}\n\n/**\n * Slice a stroke and return the sliced part of it\n * @param {Stroke} stroke Current stroke\n * @param {Number} [start=0] Zero-based index at which to begin extraction\n * @param {Number} [end=length] Zero-based index at which to end extraction\n * @return {Stroke} Sliced stroke\n */\nexport function slice (stroke, start = 0, end = stroke.x.length) {\n  const slicedStroke = createStrokeComponent({ color: stroke.color, width: stroke.width })\n  for (let i = start; i < end; i++) {\n    addPoint(slicedStroke, {\n      x: stroke.x[i],\n      y: stroke.y[i],\n      t: stroke.t[i]\n    })\n  }\n  return slicedStroke\n}\n\n/**\n * Extract point by index\n * @param {Stroke} stroke Current stroke\n * @param {Number} index Zero-based index\n * @return {{x: Number, y: Number, t: Number, p: Number, l: Number}} Point with properties for quadratics draw\n */\nexport function getPointByIndex (stroke, index) {\n  let point\n  if (index !== undefined && index >= 0 && index < stroke.x.length) {\n    point = {\n      x: stroke.x[index],\n      y: stroke.y[index],\n      t: stroke.t[index],\n      p: stroke.p[index],\n      l: stroke.l[index]\n    }\n  }\n  return point\n}\n","function mergeBounds (boundsA, boundsB) {\n  return {\n    minX: Math.min(boundsA.minX, boundsB.minX),\n    maxX: Math.max(boundsA.maxX, boundsB.maxX),\n    minY: Math.min(boundsA.minY, boundsB.minY),\n    maxY: Math.max(boundsA.maxY, boundsB.maxY)\n  }\n}\n\nfunction getLineBounds (line) {\n  return {\n    minX: Math.min(line.firstPoint.x, line.lastPoint.x),\n    maxX: Math.max(line.firstPoint.x, line.lastPoint.x),\n    minY: Math.min(line.firstPoint.y, line.lastPoint.y),\n    maxY: Math.max(line.firstPoint.y, line.lastPoint.y)\n  }\n}\n\nfunction getEllipseBounds (ellipse) {\n  const angleStep = 0.02 // angle delta between interpolated points on the arc, in radian\n\n  let z1 = Math.cos(ellipse.orientation)\n  let z3 = Math.sin(ellipse.orientation)\n  let z2 = z1\n  let z4 = z3\n  z1 *= ellipse.maxRadius\n  z2 *= ellipse.minRadius\n  z3 *= ellipse.maxRadius\n  z4 *= ellipse.minRadius\n\n  const n = Math.abs(ellipse.sweepAngle) / angleStep\n\n  const x = []\n  const y = []\n\n  for (let i = 0; i <= n; i++) {\n    const angle = ellipse.startAngle + ((i / n) * ellipse.sweepAngle)\n    const alpha = Math.atan2(Math.sin(angle) / ellipse.minRadius, Math.cos(angle) / ellipse.maxRadius)\n\n    const cosAlpha = Math.cos(alpha)\n    const sinAlpha = Math.sin(alpha)\n\n    x.push(ellipse.center.x + ((z1 * cosAlpha) - (z4 * sinAlpha)))\n    y.push(ellipse.center.y + ((z2 * sinAlpha) + (z3 * cosAlpha)))\n  }\n\n  return {\n    minX: Math.min(...x),\n    maxX: Math.max(...x),\n    minY: Math.min(...y),\n    maxY: Math.max(...y)\n  }\n}\n\nfunction getTextLineBounds (textLine) {\n  return {\n    minX: textLine.data.topLeftPoint.x,\n    maxX: textLine.data.topLeftPoint.x + textLine.data.width,\n    minY: textLine.data.topLeftPoint.y,\n    maxY: textLine.data.topLeftPoint.y + textLine.data.height\n  }\n}\n\nfunction getClefBounds (clef) {\n  return {\n    minX: clef.boundingBox.x,\n    maxX: clef.boundingBox.x + clef.boundingBox.width,\n    minY: clef.boundingBox.y,\n    maxY: clef.boundingBox.y + clef.boundingBox.height\n  }\n}\n\nfunction getStrokeBounds (stroke) {\n  return {\n    minX: Math.min(...stroke.x),\n    maxX: Math.max(...stroke.x),\n    minY: Math.min(...stroke.y),\n    maxY: Math.max(...stroke.y)\n  }\n}\n\n/**\n * Get the box enclosing the given symbols\n * @param {Array} symbols Symbols to extract bounds from\n * @param {Bounds} [bounds] Starting bounds for recursion\n * @return {Bounds} Bounding box enclosing symbols\n */\nexport function getSymbolsBounds (symbols, bounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE }) {\n  let boundsRef = bounds\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'stroke')\n    .map(getStrokeBounds)\n    .reduce(mergeBounds, boundsRef)\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'clef')\n    .map(getClefBounds)\n    .reduce(mergeBounds, boundsRef)\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'line')\n    .map(getLineBounds)\n    .reduce(mergeBounds, boundsRef)\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'ellipse')\n    .map(getEllipseBounds)\n    .reduce(mergeBounds, boundsRef)\n  boundsRef = symbols\n    .filter(symbol => symbol.type === 'textLine')\n    .map(getTextLineBounds)\n    .reduce(mergeBounds, boundsRef)\n  return boundsRef\n}\n","import { modelLogger as logger } from '../configuration/LoggerConfig'\nimport * as StrokeComponent from './StrokeComponent'\nimport { getSymbolsBounds } from './Symbol'\n\n/**\n * Recognition positions\n * @typedef {Object} RecognitionPositions\n * @property {Number} [lastSentPosition=-1] Index of the last sent stroke.\n * @property {Number} [lastReceivedPosition=-1] Index of the last received stroke.\n * @property {Number} [lastRenderedPosition=-1] Last rendered recognized symbol position\n */\n\n/**\n * Raw results\n * @typedef {Object} RawResults\n * @property {Object} convert=undefined The convert result\n * @property {Object} exports=undefined The exports output as return by the recognition service.\n */\n\n/**\n * Editor model\n * @typedef {Object} Model\n * @property {Stroke} currentStroke=undefined Stroke in building process.\n * @property {Array<Stroke>} rawStrokes=[] List of captured strokes.\n * @property {Array} strokeGroups=[] Group of strokes with same pen style.\n * @property {RecognitionPositions} lastPositions Last recognition sent/received stroke indexes.\n * @property {Array<Object>} defaultSymbols=[] Default symbols, relative to the current recognition type.\n * @property {Array<Object>} recognizedSymbols=undefined Symbols to render (e.g. stroke, shape primitives, string, characters...).\n * @property {Object} exports=undefined Result of the export (e.g. mathml, latex, text...).\n * @property {RawResults} rawResults The recognition output as return by the recognition service.\n * @property {Number} creationTime Date of creation timestamp.\n * @property {Number} modificationTime=undefined Date of lastModification.\n */\n\n/**\n * Bounding box\n * @typedef {Object} Bounds\n * @property {Number} minX Minimal x coordinate\n * @property {Number} maxX Maximal x coordinate\n * @property {Number} minY Minimal y coordinate\n * @property {Number} maxY Maximal y coordinate\n */\n\n/**\n * Create a new model\n * @param {Configuration} [configuration] Parameters to use to populate default recognition symbols\n * @return {Model} New model\n */\nexport function createModel (configuration) {\n  // see @typedef documentation on top\n  return {\n    currentStroke: undefined,\n    rawStrokes: [],\n    strokeGroups: [],\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1,\n      lastRenderedPosition: -1\n    },\n    defaultSymbols: [],\n    recognizedSymbols: undefined,\n    exports: undefined,\n    rawResults: {\n      convert: undefined,\n      exports: undefined\n    },\n    creationTime: new Date().getTime(),\n    modificationTime: undefined\n  }\n}\n\n/**\n * Clear the model.\n * @param {Model} model Current model\n * @return {Model} Cleared model\n */\nexport function clearModel (model) {\n  const modelReference = model\n  modelReference.currentStroke = undefined\n  modelReference.rawStrokes = []\n  modelReference.strokeGroups = []\n  modelReference.lastPositions.lastSentPosition = -1\n  modelReference.lastPositions.lastReceivedPosition = -1\n  modelReference.lastPositions.lastRenderedPosition = -1\n  modelReference.recognizedSymbols = undefined\n  modelReference.exports = undefined\n  modelReference.rawResults.convert = undefined\n  modelReference.rawResults.exports = undefined\n  return modelReference\n}\n\n/**\n * Check if the model needs to be redrawn.\n * @param {Model} model Current model\n * @return {Boolean} True if the model needs to be redrawn, false otherwise\n */\nexport function needRedraw (model) {\n  return model.recognizedSymbols ? (model.rawStrokes.length !== model.recognizedSymbols.filter(symbol => symbol.type === 'stroke').length) : false\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @return {Model} Updated model\n */\nexport function addStroke (model, stroke) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model\n  logger.debug('addStroke', stroke)\n  modelReference.rawStrokes.push(stroke)\n  return modelReference\n}\n\n/**\n * Mutate the model given in parameter by adding the new strokeToAdd and the penstyle. Used for iink REST.\n * @param {Model} model Current model\n * @param {Stroke} stroke Stroke to be added to pending ones\n * @param {PenStyle} strokePenStyle\n * @return {Model} Updated model\n */\nexport function addStrokeToGroup (model, stroke, strokePenStyle) {\n  // We use a reference to the model. The purpose here is to update the pending stroke only.\n  const modelReference = model\n  logger.debug('addStroke', stroke)\n  const lastGroup = modelReference.strokeGroups.length - 1\n  if (modelReference.strokeGroups[lastGroup] && modelReference.strokeGroups[lastGroup].penStyle === strokePenStyle) {\n    modelReference.strokeGroups[lastGroup].strokes.push(stroke)\n  } else {\n    const newStrokeGroup = {\n      penStyle: strokePenStyle,\n      strokes: []\n    }\n    const strokeCopy = {}\n    Object.assign(strokeCopy, stroke)\n    newStrokeGroup.strokes.push(strokeCopy)\n    modelReference.strokeGroups.push(newStrokeGroup)\n  }\n  return modelReference\n}\n\n/**\n * Get the strokes that needs to be recognized\n * @param {Model} model Current model\n * @param {Number} [position=lastReceived] Index from where to extract strokes\n * @return {Array<Stroke>} Pending strokes\n */\nexport function extractPendingStrokes (model, position = model.lastPositions.lastReceivedPosition + 1) {\n  return model.rawStrokes.slice(position)\n}\n\n/**\n * Mutate the model by adding a point and close the current stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to create current stroke\n * @param {Object} properties Properties to be applied to the current stroke\n * @param {Number} [dpi=96] The screen dpi resolution\n * @return {Model} Updated model\n */\nexport function initPendingStroke (model, point, properties, dpi = 96) {\n  if (properties && properties['-myscript-pen-width']) {\n    const pxWidth = (properties['-myscript-pen-width'] * dpi) / 25.4\n    Object.assign(properties, { width: pxWidth / 2 }) // FIXME hack to get better render\n  }\n  const modelReference = model\n  logger.trace('initPendingStroke', point)\n  // Setting the current stroke to an empty one\n  modelReference.currentStroke = StrokeComponent.createStrokeComponent(properties)\n  modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point)\n  return modelReference\n}\n\n/**\n * Mutate the model by adding a point to the current pending stroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @return {Model} Updated model\n */\nexport function appendToPendingStroke (model, point) {\n  const modelReference = model\n  if (modelReference.currentStroke) {\n    logger.trace('appendToPendingStroke', point)\n    modelReference.currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point)\n  }\n  return modelReference\n}\n\n/**\n * Mutate the model by adding the new point on a initPendingStroke.\n * @param {Model} model Current model\n * @param {{x: Number, y: Number, t: Number}} point Captured point to be append to the current stroke\n * @param {PenStyle} penStyle\n * @return {Model} Updated model\n */\nexport function endPendingStroke (model, point, penStyle) {\n  const modelReference = model\n  if (modelReference.currentStroke) {\n    logger.trace('endPendingStroke', point)\n    const currentStroke = StrokeComponent.addPoint(modelReference.currentStroke, point)\n    // Mutating pending strokes\n    addStroke(modelReference, currentStroke)\n    addStrokeToGroup(modelReference, currentStroke, penStyle)\n    // Resetting the current stroke to an undefined one\n    delete modelReference.currentStroke\n  }\n  return modelReference\n}\n\n/**\n * Get the bounds of the current model.\n * @param {Model} model Current model\n * @return {Bounds} Bounding box enclosing the current drawn model\n */\nexport function getBorderCoordinates (model) {\n  let modelBounds = { minX: Number.MAX_VALUE, maxX: Number.MIN_VALUE, minY: Number.MAX_VALUE, maxY: Number.MIN_VALUE }\n\n  // Default symbols\n  if (model.defaultSymbols && model.defaultSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.defaultSymbols, modelBounds)\n  }\n  // Recognized symbols\n  if (model.recognizedSymbols && model.recognizedSymbols.length > 0) {\n    modelBounds = getSymbolsBounds(model.recognizedSymbols, modelBounds)\n    // Pending strokes\n    modelBounds = getSymbolsBounds(extractPendingStrokes(model), modelBounds)\n  } else {\n    modelBounds = getSymbolsBounds(model.rawStrokes, modelBounds)\n  }\n  return modelBounds\n}\n\n/**\n * Extract strokes from an ink range\n * @param {Model} model Current model\n * @param {Number} firstStroke First stroke index to extract\n * @param {Number} lastStroke Last stroke index to extract\n * @param {Number} firstPoint First point index to extract\n * @param {Number} lastPoint Last point index to extract\n * @return {Array<Stroke>} The extracted strokes\n */\nexport function extractStrokesFromInkRange (model, firstStroke, lastStroke, firstPoint, lastPoint) {\n  return model.rawStrokes.slice(firstStroke, lastStroke + 1).map((stroke, index, slicedStrokes) => {\n    if (slicedStrokes.length < 2) {\n      return StrokeComponent.slice(stroke, firstPoint, lastPoint + 1)\n    }\n    if (index === 0) {\n      return StrokeComponent.slice(stroke, firstPoint)\n    }\n    if (index === (slicedStrokes.length - 1)) {\n      return StrokeComponent.slice(stroke, 0, lastPoint + 1)\n    }\n    return stroke\n  })\n}\n\n/**\n * Update model lastSentPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelSentPosition (model, position = model.rawStrokes.length - 1) {\n  const modelReference = model\n  modelReference.lastPositions.lastSentPosition = position\n  return modelReference\n}\n\n/**\n * Update model lastReceivedPosition regarding to lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function updateModelReceivedPosition (model) {\n  const modelReference = model\n  modelReference.lastPositions.lastReceivedPosition = modelReference.lastPositions.lastSentPosition\n  return modelReference\n}\n\n/**\n * Reset model lastReceivedPosition and lastSentPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelPositions (model) {\n  const modelReference = model\n  modelReference.lastPositions.lastSentPosition = -1\n  modelReference.lastPositions.lastReceivedPosition = -1\n  return modelReference\n}\n\n/**\n * Reset model lastRenderedPosition\n * @param {Model} model\n * @return {Model}\n */\nexport function resetModelRendererPosition (model) {\n  const modelReference = model\n  modelReference.lastPositions.lastRenderedPosition = -1\n  return modelReference\n}\n\n/**\n * Update model lastRenderedPosition\n * @param {Model} model\n * @param {Number} [position]\n * @return {Model}\n */\nexport function updateModelRenderedPosition (model, position = model.recognizedSymbols ? model.recognizedSymbols.length - 1 : -1) {\n  const modelReference = model\n  modelReference.lastPositions.lastRenderedPosition = position\n  return modelReference\n}\n\n/**\n * Get the symbols that needs to be rendered\n * @param {Model} model Current model\n * @param {Number} [position=lastRendered] Index from where to extract symbols\n * @return {Array<Object>}\n */\nexport function extractPendingRecognizedSymbols (model, position = model.lastPositions.lastRenderedPosition + 1) {\n  return model.recognizedSymbols ? model.recognizedSymbols.slice(position) : []\n}\n\n/**\n * Clone model\n * @param {Model} model Current model\n * @return {Model} Clone of the current model\n */\nexport function cloneModel (model) {\n  const clonedModel = Object.assign({}, model)\n  // We clone the properties that need to be. Take care of arrays.\n  clonedModel.defaultSymbols = [...model.defaultSymbols]\n  clonedModel.currentStroke = model.currentStroke ? Object.assign({}, model.currentStroke) : undefined\n  clonedModel.rawStrokes = [...model.rawStrokes]\n  clonedModel.strokeGroups = JSON.parse(JSON.stringify(model.strokeGroups))\n  clonedModel.lastPositions = Object.assign({}, model.lastPositions)\n  clonedModel.exports = model.exports ? Object.assign({}, model.exports) : undefined\n  clonedModel.rawResults = Object.assign({}, model.rawResults)\n  clonedModel.recognizedSymbols = model.recognizedSymbols ? [...model.recognizedSymbols] : undefined\n  return clonedModel\n}\n\n/**\n * Merge models\n * @param {...Model} models Models to merge (ordered)\n * @return {Model} Updated model\n */\nexport function mergeModels (...models) {\n  return models.reduce((a, b) => {\n    const modelRef = a\n    modelRef.recognizedSymbols = b.recognizedSymbols\n    modelRef.lastPositions.lastSentPosition = b.lastPositions.lastSentPosition\n    modelRef.lastPositions.lastReceivedPosition = b.lastPositions.lastReceivedPosition\n    modelRef.lastPositions.lastRenderedPosition = b.lastPositions.lastRenderedPosition\n    modelRef.rawResults = b.rawResults\n    modelRef.exports = b.exports\n    return modelRef\n  })\n}\n","import { rendererLogger as logger } from '../../configuration/LoggerConfig'\nimport { drawStroke } from './symbols/StrokeSymbolCanvasRenderer'\nimport { drawTextSymbol, TextSymbols } from './symbols/TextSymbolCanvasRenderer'\nimport { drawShapeSymbol, ShapeSymbols } from './symbols/ShapeSymbolCanvasRenderer'\nimport * as InkModel from '../../model/InkModel'\n\n/**\n * Renderer info\n * @typedef {Object} RendererInfo\n * @property {String} type Renderer type.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Default renderer\n * @typedef {Object} Renderer\n * @property {function} getInfo Get some information about this renderer\n * @property {function} attach Populate the DOM element to create rendering area.\n * @property {function} detach Remove rendering area from the DOM element.\n * @property {function} resize Explicitly resize the rendering area.\n * @property {function} drawCurrentStroke Draw the model currentStroke.\n * @property {function} drawModel Draw the model defaultSymbols and recognizedSymbols.\n */\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo () {\n  return {\n    type: 'canvas'\n  }\n}\n\nfunction getPixelRatio (canvas) {\n  if (canvas) {\n    const context = canvas.getContext('2d')\n    // we are using a browser object\n    // eslint-disable-next-line no-undef\n    const devicePixelRatio = window.devicePixelRatio || 1\n    const backingStoreRatio = context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio || 1\n    return devicePixelRatio / backingStoreRatio\n  }\n  return 1\n}\n\nfunction detectPixelRatio (element) {\n  // we are using a browser object\n  // eslint-disable-next-line no-undef\n  const tempCanvas = document.createElement('canvas')\n  const canvasRatio = getPixelRatio(tempCanvas)\n  // document.removeChild(tempCanvas);\n  return canvasRatio\n}\n\nfunction createCanvas (element, type) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document\n  const canvas = browserDocument.createElement('canvas')\n  canvas.classList.add(type)\n  canvas.classList.add('ms-canvas')\n  element.appendChild(canvas)\n  logger.debug('canvas created', canvas)\n  return canvas\n}\n\nfunction resizeContent (context) {\n  const elements = [context.renderingCanvas, context.capturingCanvas]\n  elements.forEach((canvas) => {\n    const domElement = canvas.parentNode\n    const width = domElement.clientWidth < context.minWidth ? context.minWidth : domElement.clientWidth\n    const height = domElement.clientHeight < context.minHeight ? context.minHeight : domElement.clientHeight\n    /* eslint-disable no-param-reassign */\n    canvas.width = width * context.pixelRatio\n    canvas.height = height * context.pixelRatio\n    canvas.style.width = `${width}px`\n    canvas.style.height = `${height}px`\n    /* eslint-enable no-param-reassign */\n    canvas.getContext('2d').scale(context.pixelRatio, context.pixelRatio)\n    logger.debug('canvas size changed', canvas)\n  })\n  return context\n}\n\n/**\n * Attach the renderer to the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Number} [minHeight=0] Minimal height of the editor\n * @param {Number} [minWidth=0] Minimal width of the editor\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach (element, minHeight = 0, minWidth = 0) {\n  logger.debug('attach renderer', element)\n  const pixelRatio = detectPixelRatio(element)\n\n  const renderingCanvas = createCanvas(element, 'ms-rendering-canvas')\n  const capturingCanvas = createCanvas(element, 'ms-capture-canvas')\n\n  const context = {\n    pixelRatio,\n    minHeight,\n    minWidth,\n    renderingCanvas,\n    renderingCanvasContext: renderingCanvas.getContext('2d'),\n    capturingCanvas,\n    capturingCanvasContext: capturingCanvas.getContext('2d')\n  }\n\n  return resizeContent(context)\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach (element, context) {\n  logger.debug('detach renderer', element)\n  element.removeChild(context.renderingCanvas)\n  element.removeChild(context.capturingCanvas)\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function resize (context, model, stroker) {\n  return this.drawModel(resizeContent(context), model, stroker)\n}\n\nfunction drawSymbol (context, symbol, stroker) {\n  const type = symbol.elementType ? symbol.elementType : symbol.type\n  logger.trace(`attempting to draw ${type} symbol`)\n  if (type === 'stroke') {\n    drawStroke(context, symbol, stroker)\n  } else if (TextSymbols[type]) {\n    drawTextSymbol(context, symbol)\n  } else if (ShapeSymbols[type]) {\n    drawShapeSymbol(context, symbol)\n  } else {\n    logger.warn(`impossible to draw ${type} symbol`)\n  }\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke (context, model, stroker) {\n  // Render the current stroke\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height)\n  logger.trace('drawing current stroke ', model.currentStroke)\n  drawStroke(context.capturingCanvasContext, model.currentStroke, stroker)\n  return model\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel (context, model, stroker) {\n  context.renderingCanvasContext.clearRect(0, 0, context.renderingCanvas.width, context.renderingCanvas.height)\n  // Displaying the default symbols and pending strokes\n  const symbols = [...model.defaultSymbols]\n  // Displaying the recognition symbols or raw strokes\n  if (model.recognizedSymbols) {\n    symbols.push(...model.recognizedSymbols)\n    symbols.push(...InkModel.extractPendingStrokes(model))\n  } else {\n    symbols.push(...model.rawStrokes)\n  }\n  symbols.forEach(symbol => drawSymbol(context.renderingCanvasContext, symbol, stroker))\n  context.capturingCanvasContext.clearRect(0, 0, context.capturingCanvas.width, context.capturingCanvas.height)\n  return model\n}\n","/** ===============================================================================================\n * Compute quadratics control points\n * ============================================================================================= */\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point\n * @param angle\n * @param width\n * @return {({x: number, y: *}|{x: *, y: number})}\n */\nexport function computeLinksPoints (point, angle, width) {\n  const radius = point.p * width\n  return [{\n    x: (point.x - (Math.sin(angle) * radius)),\n    y: (point.y + (Math.cos(angle) * radius))\n  }, {\n    x: (point.x + (Math.sin(angle) * radius)),\n    y: (point.y - (Math.cos(angle) * radius))\n  }]\n}\n\n/**\n *\n * @param {{x: Number, y: Number, p: Number}} point1\n * @param {{x: Number, y: Number, p: Number}} point2\n * @return {{x: Number, y: Number, p: Number}}\n */\nexport function computeMiddlePoint (point1, point2) {\n  return {\n    x: ((point2.x + point1.x) / 2),\n    y: ((point2.y + point1.y) / 2),\n    p: ((point2.p + point1.p) / 2)\n  }\n}\n\n/**\n *\n * @param {{x: Number, y: Number}} begin\n * @param {{x: Number, y: Number}} end\n * @return {Number}\n */\nexport function computeAxeAngle (begin, end) {\n  return Math.atan2(end.y - begin.y, end.x - begin.x)\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent'\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils'\n\n/**\n * Stroker info\n * @typedef {Object} StrokerInfo\n * @property {String} type Renderer type.\n * @property {String} name Stroker name.\n * @property {String} apiVersion Supported api version.\n */\n\n/**\n * Define how a stroke should be drawn\n * @typedef {Object} Stroker\n * @property {function} getInfo Get some information about this stroker\n * @property {function} drawStroke Render a stroke on the current context.\n */\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo () {\n  return {\n    type: 'canvas',\n    name: 'quadratic'\n  }\n}\n\nfunction renderArc (context, center, radius) {\n  context.arc(center.x, center.y, radius, 0, Math.PI * 2, true)\n}\n\nfunction renderLine (context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width)\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width)\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y)\n  context.lineTo(linkPoints2[0].x, linkPoints2[0].y)\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y)\n  context.lineTo(linkPoints1[1].x, linkPoints1[1].y)\n}\n\nfunction renderFinal (context, begin, end, width) {\n  const ARCSPLIT = 6\n  const angle = computeAxeAngle(begin, end)\n  const linkPoints = computeLinksPoints(end, angle, width)\n  context.moveTo(linkPoints[0].x, linkPoints[0].y)\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - ((i * Math.PI) / ARCSPLIT)\n    context.lineTo(end.x - ((end.p * width) * Math.sin(newAngle)), end.y + (end.p * width * Math.cos(newAngle)))\n  }\n}\n\nfunction renderQuadratic (context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width)\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width)\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width)\n\n  context.moveTo(linkPoints1[0].x, linkPoints1[0].y)\n  context.quadraticCurveTo(linkPoints3[0].x, linkPoints3[0].y, linkPoints2[0].x, linkPoints2[0].y)\n  context.lineTo(linkPoints2[1].x, linkPoints2[1].y)\n  context.quadraticCurveTo(linkPoints3[1].x, linkPoints3[1].y, linkPoints1[1].x, linkPoints1[1].y)\n}\n\n/**\n * Draw a stroke on a canvas, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke (context, stroke) {\n  const contextReference = context\n  const length = stroke.x.length\n  const width = stroke.width > 0 ? stroke.width : contextReference.lineWidth\n  const color = stroke.color ? stroke.color : contextReference.strokeStyle\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0)\n  const nbquadratics = length - 2\n\n  contextReference.save()\n  try {\n    contextReference.beginPath()\n    if (length < 3) {\n      renderArc(contextReference, firstPoint, width * 0.6)\n    } else {\n      renderArc(contextReference, firstPoint, width * firstPoint.p)\n      renderLine(contextReference, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width)\n\n      // Possibility to try this (the start looks better when the ink is large)\n      // var first = computeMiddlePoint(stroke[0], stroke[1]);\n      // contextReference.arc(first.x, first.y, width * first.p, 0, Math.PI * 2, true);\n\n      for (let i = 0; i < nbquadratics; i++) {\n        renderQuadratic(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width)\n      }\n      renderLine(contextReference, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width)\n      renderFinal(contextReference, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width)\n    }\n    contextReference.closePath()\n    if (color !== undefined) {\n      contextReference.fillStyle = color\n      contextReference.fill()\n    }\n  } finally {\n    contextReference.restore()\n  }\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","/**\n * Draw a stroke symbol\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Stroke to be drawn\n * @param {Stroker} stroker Stroker to use to render a stroke\n */\nexport function drawStroke (context, stroke, stroker) {\n  if (stroker) {\n    stroker.drawStroke(context, stroke)\n  }\n}\n","import * as d3 from 'd3-selection'\nimport { rendererLogger as logger } from '../../configuration/LoggerConfig'\nimport { drawStroke } from './symbols/StrokeSymbolSVGRenderer'\nimport * as InkModel from '../../model/InkModel'\n\n/**\n * Get info\n * @return {RendererInfo} Information about this renderer\n */\nexport function getInfo () {\n  return {\n    type: 'svg'\n  }\n}\n\n/**\n * Populate the dom element\n * @param {Element} element DOM element to attach the rendering elements\n * @return {Object} The renderer context to give as parameter when a draw model will be call\n */\nexport function attach (element) {\n  const elementRef = element\n  logger.debug('populate root element', elementRef)\n  elementRef.style.fontSize = '10px'\n  return d3.select(elementRef)\n}\n\n/**\n * Detach the renderer from the DOM element\n * @param {Element} element DOM element to attach the rendering elements\n * @param {Object} context Current rendering context\n */\nexport function detach (element, context) {\n  logger.debug('detach renderer', element)\n  context.select('svg').remove()\n}\n\n/**\n * Update the rendering context size\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} minHeight Minimal height for resize\n * @param {Number} minWidth Minimal Width for resize\n * @return {Model}\n */\nexport function resize (context, model, stroker, minHeight, minWidth) {\n  const rect = context.node().getBoundingClientRect()\n  const svg = context.selectAll('svg')\n  const width = rect.width < minWidth ? minWidth : rect.width\n  const height = rect.height < minHeight ? minHeight : rect.height\n  svg.attr('viewBox', `0 0 ${width}, ${height}`)\n  svg.attr('width', `${width}px`)\n  svg.attr('height', `${height}px`)\n  logger.debug('svg viewBox changed', svg)\n  return model\n}\n\n/**\n * Draw the current stroke from the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawCurrentStroke (context, model, stroker) {\n  const modelRef = model\n  // Add a pending id for pending strokes rendering\n  modelRef.currentStroke.id = `pendingStroke-${model.rawStrokes.length}`\n  // Render the current stroke\n  logger.trace('drawing current stroke ', model.currentStroke)\n  context.select(`#pendingStrokes #${modelRef.currentStroke.id}`).remove()\n  drawStroke(context.select('#pendingStrokes').append('path').attr('id', model.currentStroke.id), model.currentStroke, stroker)\n  return modelRef\n}\n\nfunction insertAdjacentSVG (element, position, html) {\n  const container = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', '_')\n  container.innerHTML = html\n\n  switch (position.toLowerCase()) {\n    case 'beforebegin':\n      element.parentNode.insertBefore(container.firstChild, element)\n      break\n    case 'afterbegin':\n      element.insertBefore(container.lastChild, element.firstChild)\n      break\n    case 'beforeend':\n      element.appendChild(container.firstChild)\n      break\n    case 'afterend':\n      element.parentNode.insertBefore(container.lastChild, element.nextSibling)\n      break\n    default:\n      logger.warn('Invalid insertAdjacentHTML position')\n      break\n  }\n}\n\n/**\n * Draw all symbols contained into the model\n * @param {Object} context Current rendering context\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @return {Model}\n */\nexport function drawModel (context, model, stroker) {\n  const drawSymbol = (symbol, symbolContext) => {\n    logger.trace(`attempting to draw ${symbol.type} symbol`)\n    if (symbol.type === 'stroke' && !symbolContext.select('id', symbol.id)) {\n      drawStroke(symbolContext.append('path').attr('id', symbol.id), symbol, stroker)\n    } else {\n      logger.warn(`impossible to draw ${symbol.type} symbol`)\n    }\n  }\n\n  const updateView = (patchUpdate) => {\n    // We only add in the stack patch with updates\n    patchUpdate.updates.forEach((update) => {\n      try {\n        const svgElementSelector = 'svg[data-layer=\"' + patchUpdate.layer + '\"]'\n        switch (update.type) {\n          case 'REPLACE_ALL': {\n            context.select(svgElementSelector).remove()\n            const parent = context.node()\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg)\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg)\n            }\n            if (patchUpdate.layer === 'MODEL') {\n              context.select(svgElementSelector).append('g').attr('id', 'pendingStrokes')\n            }\n          }\n            break\n          case 'REMOVE_ELEMENT': {\n            if (update.id.includes('s') || update.id.includes('MODEL')) {\n              context.select(`#${update.id}`).remove()\n            } else {\n              context.select(`#${update.id}`).attr('class', 'removed-stroke')\n              context.select(`#${update.id}`).remove()\n            }\n            break\n          }\n          case 'REPLACE_ELEMENT': {\n            const parent = context.select(`#${update.id}`).node().parentNode\n            context.select(`#${update.id}`).remove()\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg)\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg)\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML)\n            }\n          }\n            break\n          case 'REMOVE_CHILD':\n            context.select(`#${update.parentId} > *:nth-child(${update.index + 1})`).remove()\n            break\n          case 'APPEND_CHILD': {\n            const parent = context.select(update.parentId ? `#${update.parentId}` : svgElementSelector).node()\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeEnd', update.svg)\n            } else {\n              insertAdjacentSVG(parent, 'beforeEnd', update.svg)\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML)\n            }\n          }\n            break\n          case 'INSERT_BEFORE': {\n            const parent = context.select(`#${update.refId}`).node()\n            if (parent.insertAdjacentHTML) {\n              parent.insertAdjacentHTML('beforeBegin', update.svg)\n            } else {\n              insertAdjacentSVG(parent, 'beforeBegin', update.svg)\n              context.node().insertAdjacentHTML('beforeEnd', context.select(svgElementSelector).remove().node().outerHTML)\n            }\n          }\n            break\n          case 'REMOVE_ATTRIBUTE':\n            context.selectAll(update.id ? `#${update.id}` : 'svg').attr(update.name, null)\n            break\n          case 'SET_ATTRIBUTE': {\n            // We ignore setAttributes on the svg element because we handle the resize elsewhere to prevent a blink effect\n            // that occurs if we are waiting for the server to resize.\n            if (update.id) {\n              context.selectAll(`#${update.id}`).attr(update.name, update.value)\n            }\n            break\n          }\n          default:\n            logger.debug(`unknown update ${update.type} action`)\n            break\n        }\n      } catch (e) {\n        logger.error(`Invalid update ${update.type}`, update)\n        logger.error('Error on svg patch', e)\n      }\n    })\n  }\n\n  const pendingRecognizedSymbols = InkModel.extractPendingRecognizedSymbols(model)\n  if (pendingRecognizedSymbols) {\n    pendingRecognizedSymbols.forEach(patch => updateView(patch))\n    InkModel.updateModelRenderedPosition(model)\n  }\n\n  const pendingStrokes = InkModel.extractPendingStrokes(model)\n  if (pendingStrokes) {\n    pendingStrokes.forEach(stroke => drawSymbol(stroke, context.select('#pendingStrokes')))\n  }\n  return model\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import * as StrokeComponent from '../../../model/StrokeComponent'\nimport { computeLinksPoints, computeMiddlePoint, computeAxeAngle } from '../../QuadraticUtils'\n\n/**\n * Get info\n * @return {StrokerInfo} Information about this stroker\n */\nexport function getInfo () {\n  return {\n    type: 'svg',\n    name: 'quadratic'\n  }\n}\n\nfunction renderArc (context, center, radius) {\n  const svgPath = [\n    `M ${center.x},${center.y}`,\n    `m ${-radius},0`,\n    `a ${radius},${radius} 0 1 0 ${radius * 2},0`,\n    `a ${radius},${radius} 0 1 0 ${-(radius * 2)},0`\n  ].join(' ')\n  return svgPath\n}\n\nfunction renderLine (context, begin, end, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, end), width)\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(begin, end), width)\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `L ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `L ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ')\n  return svgPath\n}\n\nfunction renderFinal (context, begin, end, width) {\n  const ARCSPLIT = 6\n  const angle = computeAxeAngle(begin, end)\n  const linkPoints = computeLinksPoints(end, angle, width)\n\n  const parts = [`M ${linkPoints[0].x},${linkPoints[0].y}`]\n  for (let i = 1; i <= ARCSPLIT; i++) {\n    const newAngle = angle - (i * (Math.PI / ARCSPLIT))\n    parts.push(`L ${end.x - (end.p * width * Math.sin(newAngle))},${end.y + (end.p * width * Math.cos(newAngle))}`)\n  }\n  const svgPath = parts.join(' ')\n  return svgPath\n}\n\nfunction renderQuadratic (context, begin, end, ctrl, width) {\n  const linkPoints1 = computeLinksPoints(begin, computeAxeAngle(begin, ctrl), width)\n  const linkPoints2 = computeLinksPoints(end, computeAxeAngle(ctrl, end), width)\n  const linkPoints3 = computeLinksPoints(ctrl, computeAxeAngle(begin, end), width)\n\n  const svgPath = [\n    `M ${linkPoints1[0].x},${linkPoints1[0].y}`,\n    `Q ${linkPoints3[0].x},${linkPoints3[0].y} ${linkPoints2[0].x},${linkPoints2[0].y}`,\n    `L ${linkPoints2[1].x},${linkPoints2[1].y}`,\n    `Q ${linkPoints3[1].x},${linkPoints3[1].y} ${linkPoints1[1].x},${linkPoints1[1].y}`\n  ].join(' ')\n  return svgPath\n}\n\n/**\n * Draw a stroke on a svg tag, using quadratics\n * @param {Object} context Current rendering context\n * @param {Stroke} stroke Current stroke to be drawn\n */\nexport function drawStroke (context, stroke) {\n  const length = stroke.x.length\n  const width = stroke.width\n  const firstPoint = StrokeComponent.getPointByIndex(stroke, 0)\n  const nbquadratics = length - 2\n\n  const parts = []\n  if (length < 3) {\n    parts.push(renderArc(context, firstPoint, width * 0.6))\n  } else {\n    parts.push(renderArc(context, firstPoint, width * firstPoint.p))\n    parts.push(renderLine(context, firstPoint, computeMiddlePoint(firstPoint, StrokeComponent.getPointByIndex(stroke, 1)), width))\n\n    for (let i = 0; i < nbquadratics; i++) {\n      parts.push(renderQuadratic(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i), StrokeComponent.getPointByIndex(stroke, i + 1)), computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, i + 1), StrokeComponent.getPointByIndex(stroke, i + 2)), StrokeComponent.getPointByIndex(stroke, i + 1), width))\n    }\n    parts.push(renderLine(context, computeMiddlePoint(StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1)), StrokeComponent.getPointByIndex(stroke, length - 1), width))\n    parts.push(renderFinal(context, StrokeComponent.getPointByIndex(stroke, length - 2), StrokeComponent.getPointByIndex(stroke, length - 1), width))\n  }\n  const svgPath = parts.join(' ')\n\n  context\n    .attr('color', stroke.color)\n    .style('fill', stroke.color)\n    .style('stroke', 'transparent')\n    .classed('pending-stroke', true)\n    .attr('d', `${svgPath}Z`)\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Hex;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (undefined) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var X32WordArray = C_lib.WordArray;\n\n\t    /**\n\t     * x64 namespace.\n\t     */\n\t    var C_x64 = C.x64 = {};\n\n\t    /**\n\t     * A 64-bit word.\n\t     */\n\t    var X64Word = C_x64.Word = Base.extend({\n\t        /**\n\t         * Initializes a newly created 64-bit word.\n\t         *\n\t         * @param {number} high The high 32 bits.\n\t         * @param {number} low The low 32 bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);\n\t         */\n\t        init: function (high, low) {\n\t            this.high = high;\n\t            this.low = low;\n\t        }\n\n\t        /**\n\t         * Bitwise NOTs this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after negating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var negated = x64Word.not();\n\t         */\n\t        // not: function () {\n\t            // var high = ~this.high;\n\t            // var low = ~this.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ANDs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to AND with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ANDing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var anded = x64Word.and(anotherX64Word);\n\t         */\n\t        // and: function (word) {\n\t            // var high = this.high & word.high;\n\t            // var low = this.low & word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise ORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to OR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after ORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var ored = x64Word.or(anotherX64Word);\n\t         */\n\t        // or: function (word) {\n\t            // var high = this.high | word.high;\n\t            // var low = this.low | word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Bitwise XORs this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to XOR with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after XORing.\n\t         *\n\t         * @example\n\t         *\n\t         *     var xored = x64Word.xor(anotherX64Word);\n\t         */\n\t        // xor: function (word) {\n\t            // var high = this.high ^ word.high;\n\t            // var low = this.low ^ word.low;\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftL(25);\n\t         */\n\t        // shiftL: function (n) {\n\t            // if (n < 32) {\n\t                // var high = (this.high << n) | (this.low >>> (32 - n));\n\t                // var low = this.low << n;\n\t            // } else {\n\t                // var high = this.low << (n - 32);\n\t                // var low = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Shifts this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to shift.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after shifting.\n\t         *\n\t         * @example\n\t         *\n\t         *     var shifted = x64Word.shiftR(7);\n\t         */\n\t        // shiftR: function (n) {\n\t            // if (n < 32) {\n\t                // var low = (this.low >>> n) | (this.high << (32 - n));\n\t                // var high = this.high >>> n;\n\t            // } else {\n\t                // var low = this.high >>> (n - 32);\n\t                // var high = 0;\n\t            // }\n\n\t            // return X64Word.create(high, low);\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the left.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotL(25);\n\t         */\n\t        // rotL: function (n) {\n\t            // return this.shiftL(n).or(this.shiftR(64 - n));\n\t        // },\n\n\t        /**\n\t         * Rotates this word n bits to the right.\n\t         *\n\t         * @param {number} n The number of bits to rotate.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after rotating.\n\t         *\n\t         * @example\n\t         *\n\t         *     var rotated = x64Word.rotR(7);\n\t         */\n\t        // rotR: function (n) {\n\t            // return this.shiftR(n).or(this.shiftL(64 - n));\n\t        // },\n\n\t        /**\n\t         * Adds this word with the passed word.\n\t         *\n\t         * @param {X64Word} word The x64-Word to add with this word.\n\t         *\n\t         * @return {X64Word} A new x64-Word object after adding.\n\t         *\n\t         * @example\n\t         *\n\t         *     var added = x64Word.add(anotherX64Word);\n\t         */\n\t        // add: function (word) {\n\t            // var low = (this.low + word.low) | 0;\n\t            // var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;\n\t            // var high = (this.high + word.high + carry) | 0;\n\n\t            // return X64Word.create(high, low);\n\t        // }\n\t    });\n\n\t    /**\n\t     * An array of 64-bit words.\n\t     *\n\t     * @property {Array} words The array of CryptoJS.x64.Word objects.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var X64WordArray = C_x64.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create();\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ]);\n\t         *\n\t         *     var wordArray = CryptoJS.x64.WordArray.create([\n\t         *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),\n\t         *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)\n\t         *     ], 10);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 8;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this 64-bit word array to a 32-bit word array.\n\t         *\n\t         * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var x32WordArray = x64WordArray.toX32();\n\t         */\n\t        toX32: function () {\n\t            // Shortcuts\n\t            var x64Words = this.words;\n\t            var x64WordsLength = x64Words.length;\n\n\t            // Convert\n\t            var x32Words = [];\n\t            for (var i = 0; i < x64WordsLength; i++) {\n\t                var x64Word = x64Words[i];\n\t                x32Words.push(x64Word.high);\n\t                x32Words.push(x64Word.low);\n\t            }\n\n\t            return X32WordArray.create(x32Words, this.sigBytes);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {X64WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = x64WordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\n\t            // Clone \"words\" array\n\t            var words = clone.words = this.words.slice(0);\n\n\t            // Clone each X64Word object\n\t            var wordsLength = words.length;\n\t            for (var i = 0; i < wordsLength; i++) {\n\t                words[i] = words[i].clone();\n\t            }\n\n\t            return clone;\n\t        }\n\t    });\n\t}());\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_x64 = C.x64;\n\t    var X64Word = C_x64.Word;\n\t    var X64WordArray = C_x64.WordArray;\n\t    var C_algo = C.algo;\n\n\t    function X64Word_create() {\n\t        return X64Word.create.apply(X64Word, arguments);\n\t    }\n\n\t    // Constants\n\t    var K = [\n\t        X64Word_create(0x428a2f98, 0xd728ae22), X64Word_create(0x71374491, 0x23ef65cd),\n\t        X64Word_create(0xb5c0fbcf, 0xec4d3b2f), X64Word_create(0xe9b5dba5, 0x8189dbbc),\n\t        X64Word_create(0x3956c25b, 0xf348b538), X64Word_create(0x59f111f1, 0xb605d019),\n\t        X64Word_create(0x923f82a4, 0xaf194f9b), X64Word_create(0xab1c5ed5, 0xda6d8118),\n\t        X64Word_create(0xd807aa98, 0xa3030242), X64Word_create(0x12835b01, 0x45706fbe),\n\t        X64Word_create(0x243185be, 0x4ee4b28c), X64Word_create(0x550c7dc3, 0xd5ffb4e2),\n\t        X64Word_create(0x72be5d74, 0xf27b896f), X64Word_create(0x80deb1fe, 0x3b1696b1),\n\t        X64Word_create(0x9bdc06a7, 0x25c71235), X64Word_create(0xc19bf174, 0xcf692694),\n\t        X64Word_create(0xe49b69c1, 0x9ef14ad2), X64Word_create(0xefbe4786, 0x384f25e3),\n\t        X64Word_create(0x0fc19dc6, 0x8b8cd5b5), X64Word_create(0x240ca1cc, 0x77ac9c65),\n\t        X64Word_create(0x2de92c6f, 0x592b0275), X64Word_create(0x4a7484aa, 0x6ea6e483),\n\t        X64Word_create(0x5cb0a9dc, 0xbd41fbd4), X64Word_create(0x76f988da, 0x831153b5),\n\t        X64Word_create(0x983e5152, 0xee66dfab), X64Word_create(0xa831c66d, 0x2db43210),\n\t        X64Word_create(0xb00327c8, 0x98fb213f), X64Word_create(0xbf597fc7, 0xbeef0ee4),\n\t        X64Word_create(0xc6e00bf3, 0x3da88fc2), X64Word_create(0xd5a79147, 0x930aa725),\n\t        X64Word_create(0x06ca6351, 0xe003826f), X64Word_create(0x14292967, 0x0a0e6e70),\n\t        X64Word_create(0x27b70a85, 0x46d22ffc), X64Word_create(0x2e1b2138, 0x5c26c926),\n\t        X64Word_create(0x4d2c6dfc, 0x5ac42aed), X64Word_create(0x53380d13, 0x9d95b3df),\n\t        X64Word_create(0x650a7354, 0x8baf63de), X64Word_create(0x766a0abb, 0x3c77b2a8),\n\t        X64Word_create(0x81c2c92e, 0x47edaee6), X64Word_create(0x92722c85, 0x1482353b),\n\t        X64Word_create(0xa2bfe8a1, 0x4cf10364), X64Word_create(0xa81a664b, 0xbc423001),\n\t        X64Word_create(0xc24b8b70, 0xd0f89791), X64Word_create(0xc76c51a3, 0x0654be30),\n\t        X64Word_create(0xd192e819, 0xd6ef5218), X64Word_create(0xd6990624, 0x5565a910),\n\t        X64Word_create(0xf40e3585, 0x5771202a), X64Word_create(0x106aa070, 0x32bbd1b8),\n\t        X64Word_create(0x19a4c116, 0xb8d2d0c8), X64Word_create(0x1e376c08, 0x5141ab53),\n\t        X64Word_create(0x2748774c, 0xdf8eeb99), X64Word_create(0x34b0bcb5, 0xe19b48a8),\n\t        X64Word_create(0x391c0cb3, 0xc5c95a63), X64Word_create(0x4ed8aa4a, 0xe3418acb),\n\t        X64Word_create(0x5b9cca4f, 0x7763e373), X64Word_create(0x682e6ff3, 0xd6b2b8a3),\n\t        X64Word_create(0x748f82ee, 0x5defb2fc), X64Word_create(0x78a5636f, 0x43172f60),\n\t        X64Word_create(0x84c87814, 0xa1f0ab72), X64Word_create(0x8cc70208, 0x1a6439ec),\n\t        X64Word_create(0x90befffa, 0x23631e28), X64Word_create(0xa4506ceb, 0xde82bde9),\n\t        X64Word_create(0xbef9a3f7, 0xb2c67915), X64Word_create(0xc67178f2, 0xe372532b),\n\t        X64Word_create(0xca273ece, 0xea26619c), X64Word_create(0xd186b8c7, 0x21c0c207),\n\t        X64Word_create(0xeada7dd6, 0xcde0eb1e), X64Word_create(0xf57d4f7f, 0xee6ed178),\n\t        X64Word_create(0x06f067aa, 0x72176fba), X64Word_create(0x0a637dc5, 0xa2c898a6),\n\t        X64Word_create(0x113f9804, 0xbef90dae), X64Word_create(0x1b710b35, 0x131c471b),\n\t        X64Word_create(0x28db77f5, 0x23047d84), X64Word_create(0x32caab7b, 0x40c72493),\n\t        X64Word_create(0x3c9ebe0a, 0x15c9bebc), X64Word_create(0x431d67c4, 0x9c100d4c),\n\t        X64Word_create(0x4cc5d4be, 0xcb3e42b6), X64Word_create(0x597f299c, 0xfc657e2a),\n\t        X64Word_create(0x5fcb6fab, 0x3ad6faec), X64Word_create(0x6c44198c, 0x4a475817)\n\t    ];\n\n\t    // Reusable objects\n\t    var W = [];\n\t    (function () {\n\t        for (var i = 0; i < 80; i++) {\n\t            W[i] = X64Word_create();\n\t        }\n\t    }());\n\n\t    /**\n\t     * SHA-512 hash algorithm.\n\t     */\n\t    var SHA512 = C_algo.SHA512 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new X64WordArray.init([\n\t                new X64Word.init(0x6a09e667, 0xf3bcc908), new X64Word.init(0xbb67ae85, 0x84caa73b),\n\t                new X64Word.init(0x3c6ef372, 0xfe94f82b), new X64Word.init(0xa54ff53a, 0x5f1d36f1),\n\t                new X64Word.init(0x510e527f, 0xade682d1), new X64Word.init(0x9b05688c, 0x2b3e6c1f),\n\t                new X64Word.init(0x1f83d9ab, 0xfb41bd6b), new X64Word.init(0x5be0cd19, 0x137e2179)\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var H0 = H[0];\n\t            var H1 = H[1];\n\t            var H2 = H[2];\n\t            var H3 = H[3];\n\t            var H4 = H[4];\n\t            var H5 = H[5];\n\t            var H6 = H[6];\n\t            var H7 = H[7];\n\n\t            var H0h = H0.high;\n\t            var H0l = H0.low;\n\t            var H1h = H1.high;\n\t            var H1l = H1.low;\n\t            var H2h = H2.high;\n\t            var H2l = H2.low;\n\t            var H3h = H3.high;\n\t            var H3l = H3.low;\n\t            var H4h = H4.high;\n\t            var H4l = H4.low;\n\t            var H5h = H5.high;\n\t            var H5l = H5.low;\n\t            var H6h = H6.high;\n\t            var H6l = H6.low;\n\t            var H7h = H7.high;\n\t            var H7l = H7.low;\n\n\t            // Working variables\n\t            var ah = H0h;\n\t            var al = H0l;\n\t            var bh = H1h;\n\t            var bl = H1l;\n\t            var ch = H2h;\n\t            var cl = H2l;\n\t            var dh = H3h;\n\t            var dl = H3l;\n\t            var eh = H4h;\n\t            var el = H4l;\n\t            var fh = H5h;\n\t            var fl = H5l;\n\t            var gh = H6h;\n\t            var gl = H6l;\n\t            var hh = H7h;\n\t            var hl = H7l;\n\n\t            // Rounds\n\t            for (var i = 0; i < 80; i++) {\n\t                // Shortcut\n\t                var Wi = W[i];\n\n\t                // Extend message\n\t                if (i < 16) {\n\t                    var Wih = Wi.high = M[offset + i * 2]     | 0;\n\t                    var Wil = Wi.low  = M[offset + i * 2 + 1] | 0;\n\t                } else {\n\t                    // Gamma0\n\t                    var gamma0x  = W[i - 15];\n\t                    var gamma0xh = gamma0x.high;\n\t                    var gamma0xl = gamma0x.low;\n\t                    var gamma0h  = ((gamma0xh >>> 1) | (gamma0xl << 31)) ^ ((gamma0xh >>> 8) | (gamma0xl << 24)) ^ (gamma0xh >>> 7);\n\t                    var gamma0l  = ((gamma0xl >>> 1) | (gamma0xh << 31)) ^ ((gamma0xl >>> 8) | (gamma0xh << 24)) ^ ((gamma0xl >>> 7) | (gamma0xh << 25));\n\n\t                    // Gamma1\n\t                    var gamma1x  = W[i - 2];\n\t                    var gamma1xh = gamma1x.high;\n\t                    var gamma1xl = gamma1x.low;\n\t                    var gamma1h  = ((gamma1xh >>> 19) | (gamma1xl << 13)) ^ ((gamma1xh << 3) | (gamma1xl >>> 29)) ^ (gamma1xh >>> 6);\n\t                    var gamma1l  = ((gamma1xl >>> 19) | (gamma1xh << 13)) ^ ((gamma1xl << 3) | (gamma1xh >>> 29)) ^ ((gamma1xl >>> 6) | (gamma1xh << 26));\n\n\t                    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t                    var Wi7  = W[i - 7];\n\t                    var Wi7h = Wi7.high;\n\t                    var Wi7l = Wi7.low;\n\n\t                    var Wi16  = W[i - 16];\n\t                    var Wi16h = Wi16.high;\n\t                    var Wi16l = Wi16.low;\n\n\t                    var Wil = gamma0l + Wi7l;\n\t                    var Wih = gamma0h + Wi7h + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + gamma1l;\n\t                    var Wih = Wih + gamma1h + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n\t                    var Wil = Wil + Wi16l;\n\t                    var Wih = Wih + Wi16h + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0);\n\n\t                    Wi.high = Wih;\n\t                    Wi.low  = Wil;\n\t                }\n\n\t                var chh  = (eh & fh) ^ (~eh & gh);\n\t                var chl  = (el & fl) ^ (~el & gl);\n\t                var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n\t                var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n\t                var sigma0h = ((ah >>> 28) | (al << 4))  ^ ((ah << 30)  | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n\t                var sigma0l = ((al >>> 28) | (ah << 4))  ^ ((al << 30)  | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\t                var sigma1h = ((eh >>> 14) | (el << 18)) ^ ((eh >>> 18) | (el << 14)) ^ ((eh << 23) | (el >>> 9));\n\t                var sigma1l = ((el >>> 14) | (eh << 18)) ^ ((el >>> 18) | (eh << 14)) ^ ((el << 23) | (eh >>> 9));\n\n\t                // t1 = h + sigma1 + ch + K[i] + W[i]\n\t                var Ki  = K[i];\n\t                var Kih = Ki.high;\n\t                var Kil = Ki.low;\n\n\t                var t1l = hl + sigma1l;\n\t                var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + chl;\n\t                var t1h = t1h + chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Kil;\n\t                var t1h = t1h + Kih + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0);\n\t                var t1l = t1l + Wil;\n\t                var t1h = t1h + Wih + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0);\n\n\t                // t2 = sigma0 + maj\n\t                var t2l = sigma0l + majl;\n\t                var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n\t                // Update working variables\n\t                hh = gh;\n\t                hl = gl;\n\t                gh = fh;\n\t                gl = fl;\n\t                fh = eh;\n\t                fl = el;\n\t                el = (dl + t1l) | 0;\n\t                eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n\t                dh = ch;\n\t                dl = cl;\n\t                ch = bh;\n\t                cl = bl;\n\t                bh = ah;\n\t                bl = al;\n\t                al = (t1l + t2l) | 0;\n\t                ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H0l = H0.low  = (H0l + al);\n\t            H0.high = (H0h + ah + ((H0l >>> 0) < (al >>> 0) ? 1 : 0));\n\t            H1l = H1.low  = (H1l + bl);\n\t            H1.high = (H1h + bh + ((H1l >>> 0) < (bl >>> 0) ? 1 : 0));\n\t            H2l = H2.low  = (H2l + cl);\n\t            H2.high = (H2h + ch + ((H2l >>> 0) < (cl >>> 0) ? 1 : 0));\n\t            H3l = H3.low  = (H3l + dl);\n\t            H3.high = (H3h + dh + ((H3l >>> 0) < (dl >>> 0) ? 1 : 0));\n\t            H4l = H4.low  = (H4l + el);\n\t            H4.high = (H4h + eh + ((H4l >>> 0) < (el >>> 0) ? 1 : 0));\n\t            H5l = H5.low  = (H5l + fl);\n\t            H5.high = (H5h + fh + ((H5l >>> 0) < (fl >>> 0) ? 1 : 0));\n\t            H6l = H6.low  = (H6l + gl);\n\t            H6.high = (H6h + gh + ((H6l >>> 0) < (gl >>> 0) ? 1 : 0));\n\t            H7l = H7.low  = (H7l + hl);\n\t            H7.high = (H7h + hh + ((H7l >>> 0) < (hl >>> 0) ? 1 : 0));\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 30] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 128) >>> 10) << 5) + 31] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Convert hash to 32-bit word array before returning\n\t            var hash = this._hash.toX32();\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        },\n\n\t        blockSize: 1024/32\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA512('message');\n\t     *     var hash = CryptoJS.SHA512(wordArray);\n\t     */\n\t    C.SHA512 = Hasher._createHelper(SHA512);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA512(message, key);\n\t     */\n\t    C.HmacSHA512 = Hasher._createHmacHelper(SHA512);\n\t}());\n\n\n\treturn CryptoJS.SHA512;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./x64-core\"), require(\"./sha512\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./x64-core\", \"./sha512\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA512;\n\n}));","import Hex from 'crypto-js/enc-hex'\nimport HmacSHA512 from 'crypto-js/hmac-sha512'\nimport { recognizerLogger as logger } from '../configuration/LoggerConfig'\n\n/**\n * Compute HMAC signature for server authentication\n *\n * @param {Object} input Input data to compute HMAC\n * @param {String} applicationKey Current applicationKey\n * @param {String} hmacKey Current hmacKey\n * @return {String} Signature\n */\nexport function computeHmac (input, applicationKey, hmacKey) {\n  const jsonInput = (typeof input === 'object') ? JSON.stringify(input) : input\n  logger.debug('The HmacSHA512 function is loaded', HmacSHA512)\n  return new HmacSHA512(jsonInput, applicationKey + hmacKey).toString(Hex)\n}\n","/* eslint-disable no-unused-expressions */\nimport * as CryptoHelper from '../CryptoHelper'\n\n/**\n * Post request\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @param {String} url URL\n * @param {Object} data Data to be sent\n * @param {String} apiVersion api version\n * @param {String} mimeType MimeType to be used\n * @return {Promise}\n */\nexport async function post (recognizerContext, url, data, apiVersion, mimeType) {\n  const configuration = recognizerContext.editor.configuration\n  const recognizerContextRef = recognizerContext\n  if (recognizerContextRef) {\n    recognizerContextRef.idle = true\n  }\n  try {\n    const headers = new Headers()\n    headers.append('Accept', 'application/json,' + mimeType)\n    headers.append('applicationKey', configuration.recognitionParams.server.applicationKey)\n    headers.append('hmac', CryptoHelper.computeHmac(JSON.stringify(data), configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey))\n    headers.append('Content-Type', 'application/json')\n    const reqInit = {\n      method: 'POST',\n      headers,\n      credentials: 'include',\n      body: JSON.stringify(data)\n    }\n    const request = new Request(url, reqInit)\n    const response = await fetch(request)\n    const contentType = response.headers.get('content-type')\n    let result = ''\n    switch (contentType) {\n      case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':\n      case 'image/png':\n      case 'image/jpeg':\n        result = await response.blob()\n        break\n      case 'application/json':\n        result = await response.json()\n        break\n      case 'application/vnd.myscript.jiix':\n        result = await response.clone().json().catch(async () => await response.text())\n        break\n      default:\n        result = await response.text()\n        break\n    }\n    return result\n  } catch (error) {\n    throw new Error({ msg: `Could not connect to ${url} connection error`, recoverable: false })\n  }\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig'\n\n/**\n * Recognition context\n * @typedef {Object} RecognitionContext\n * @property {Model} model\n * @property {Callback} callback\n */\n\n/**\n * Recognizer context\n * @typedef {Object} RecognizerContext\n * @property {Editor} editor Get a reference to the current editor\n * @property {Array<RecognitionContext>} recognitionContexts=[]\n * @property {Promise} initPromise=undefined\n * @property {RecognitionPositions} lastPositions  Last recognition sent/received stroke indexes.\n * @property {String} url=undefined\n * @property {WebSocket} websocket=undefined\n * @property {function} websocketCallback=undefined\n * @property {function} reconnect=undefined\n * @property {Number} currentReconnectionCount=0\n * @property {String} sessionId=undefined\n * @property {Number} contentPartCount=0\n * @property {String} currentPartId=undefined\n * @property {String} instanceId=undefined\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n * @property {Boolean} isEmpty=false\n * @property {Array} supportedImportMimeTypes=[]\n * @property {Number} undoStackIndex=0\n * @property {Number} possibleUndoCount=0\n * @property {Boolean} idle=true\n * @property {Boolean} initialized=false\n */\n/**\n * Create a new recognizer context\n * @param {Editor} editor\n * @return {RecognizerContext} An object that contains all recognizer context\n */\nexport function createEmptyRecognizerContext (editor) {\n  const id = Date.now()\n  logger.info('Create empty recognizer context with ID: ' + id)\n  return {\n    id,\n    editor,\n    // websocket\n    recognitionContexts: [],\n    initPromise: undefined,\n    lastPositions: {\n      lastSentPosition: -1,\n      lastReceivedPosition: -1\n    },\n    url: undefined,\n    websocket: undefined,\n    websocketCallback: undefined,\n    reconnect: undefined,\n    currentReconnectionCount: 0,\n    sessionId: undefined,\n    contentPartCount: 0,\n    currentPartId: undefined,\n    instanceId: undefined,\n    canUndo: false,\n    canRedo: false,\n    isEmpty: undefined,\n    supportedImportMimeTypes: [],\n    undoStackIndex: 0,\n    possibleUndoCount: 0,\n    idle: true,\n    initialized: false\n  }\n}\n\n/**\n * Return true if a reset is required, false otherwise\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @return {Boolean}\n */\nexport function isResetRequired (recognizerContext, model) {\n  if (recognizerContext.lastPositions) {\n    return recognizerContext.lastPositions.lastSentPosition >= model.rawStrokes.length - 1\n  }\n  return false\n}\n\n/**\n * Update the recognition context positions\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionPositions} positions Current recognition positions\n * @return {RecognizerContext}\n */\nexport function updateRecognitionPositions (recognizerContext, positions) {\n  const recognizerContextRef = recognizerContext\n  if (positions) {\n    recognizerContextRef.lastPositions.lastSentPosition = positions.lastSentPosition\n    recognizerContextRef.lastPositions.lastReceivedPosition = positions.lastReceivedPosition\n  }\n  if (recognizerContextRef.lastPositions.lastSentPosition === recognizerContextRef.lastPositions.lastReceivedPosition === -1) {\n    delete recognizerContextRef.instanceId\n  }\n  return recognizerContextRef\n}\n\n/**\n * Set the recognition context\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {RecognitionContext} recognitionContext\n * @return {RecognizerContext}\n */\nexport function setRecognitionContext (recognizerContext, recognitionContext) {\n  const recognizerContextRef = recognizerContext\n  recognizerContextRef.recognitionContexts[0] = recognitionContext\n  return recognizerContextRef\n}\n\n/**\n * Test if it is possible to reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if possible, false otherwise\n */\nexport function canReconnect (recognizerContext) {\n  return recognizerContext.websocket.autoReconnect === true && recognizerContext.currentReconnectionCount <= recognizerContext.websocket.maxRetryCount\n}\n\n/**\n * Test if it should attempt immediate reconnect\n * @param {RecognizerContext} recognizerContext\n * @return {Boolean} True if should attempt reconnect, false otherwise\n */\nexport function shouldAttemptImmediateReconnect (recognizerContext) {\n  const recognizerContextRef = recognizerContext\n  return recognizerContextRef.websocket.autoReconnect === true && recognizerContextRef.currentReconnectionCount++ <= recognizerContextRef.websocket.maxRetryCount\n}\n\n/**\n * Lost connection message\n * @type {{type: string}}\n */\nexport const LOST_CONNEXION_MESSAGE = { type: 'LOST_CONNECTION' }\n\n/**\n * Explicit close message\n * @type {String}\n */\nexport const CLOSE_RECOGNIZER_MESSAGE = 'CLOSE_RECOGNIZER'\n","/*!\r\n * perfect-scrollbar v1.5.3\r\n * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors\r\n * Licensed under MIT\r\n */\r\n\r\nfunction get(element) {\r\n  return getComputedStyle(element);\r\n}\r\n\r\nfunction set(element, obj) {\r\n  for (var key in obj) {\r\n    var val = obj[key];\r\n    if (typeof val === 'number') {\r\n      val = val + \"px\";\r\n    }\r\n    element.style[key] = val;\r\n  }\r\n  return element;\r\n}\r\n\r\nfunction div(className) {\r\n  var div = document.createElement('div');\r\n  div.className = className;\r\n  return div;\r\n}\r\n\r\nvar elMatches =\r\n  typeof Element !== 'undefined' &&\r\n  (Element.prototype.matches ||\r\n    Element.prototype.webkitMatchesSelector ||\r\n    Element.prototype.mozMatchesSelector ||\r\n    Element.prototype.msMatchesSelector);\r\n\r\nfunction matches(element, query) {\r\n  if (!elMatches) {\r\n    throw new Error('No element matching method supported');\r\n  }\r\n\r\n  return elMatches.call(element, query);\r\n}\r\n\r\nfunction remove(element) {\r\n  if (element.remove) {\r\n    element.remove();\r\n  } else {\r\n    if (element.parentNode) {\r\n      element.parentNode.removeChild(element);\r\n    }\r\n  }\r\n}\r\n\r\nfunction queryChildren(element, selector) {\r\n  return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\r\n  );\r\n}\r\n\r\nvar cls = {\r\n  main: 'ps',\r\n  rtl: 'ps__rtl',\r\n  element: {\r\n    thumb: function (x) { return (\"ps__thumb-\" + x); },\r\n    rail: function (x) { return (\"ps__rail-\" + x); },\r\n    consuming: 'ps__child--consume',\r\n  },\r\n  state: {\r\n    focus: 'ps--focus',\r\n    clicking: 'ps--clicking',\r\n    active: function (x) { return (\"ps--active-\" + x); },\r\n    scrolling: function (x) { return (\"ps--scrolling-\" + x); },\r\n  },\r\n};\r\n\r\n/*\r\n * Helper methods\r\n */\r\nvar scrollingClassTimeout = { x: null, y: null };\r\n\r\nfunction addScrollingClass(i, x) {\r\n  var classList = i.element.classList;\r\n  var className = cls.state.scrolling(x);\r\n\r\n  if (classList.contains(className)) {\r\n    clearTimeout(scrollingClassTimeout[x]);\r\n  } else {\r\n    classList.add(className);\r\n  }\r\n}\r\n\r\nfunction removeScrollingClass(i, x) {\r\n  scrollingClassTimeout[x] = setTimeout(\r\n    function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\r\n    i.settings.scrollingThreshold\r\n  );\r\n}\r\n\r\nfunction setScrollingClassInstantly(i, x) {\r\n  addScrollingClass(i, x);\r\n  removeScrollingClass(i, x);\r\n}\r\n\r\nvar EventElement = function EventElement(element) {\r\n  this.element = element;\r\n  this.handlers = {};\r\n};\r\n\r\nvar prototypeAccessors = { isEmpty: { configurable: true } };\r\n\r\nEventElement.prototype.bind = function bind (eventName, handler) {\r\n  if (typeof this.handlers[eventName] === 'undefined') {\r\n    this.handlers[eventName] = [];\r\n  }\r\n  this.handlers[eventName].push(handler);\r\n  this.element.addEventListener(eventName, handler, false);\r\n};\r\n\r\nEventElement.prototype.unbind = function unbind (eventName, target) {\r\n    var this$1 = this;\r\n\r\n  this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\r\n    if (target && handler !== target) {\r\n      return true;\r\n    }\r\n    this$1.element.removeEventListener(eventName, handler, false);\r\n    return false;\r\n  });\r\n};\r\n\r\nEventElement.prototype.unbindAll = function unbindAll () {\r\n  for (var name in this.handlers) {\r\n    this.unbind(name);\r\n  }\r\n};\r\n\r\nprototypeAccessors.isEmpty.get = function () {\r\n    var this$1 = this;\r\n\r\n  return Object.keys(this.handlers).every(\r\n    function (key) { return this$1.handlers[key].length === 0; }\r\n  );\r\n};\r\n\r\nObject.defineProperties( EventElement.prototype, prototypeAccessors );\r\n\r\nvar EventManager = function EventManager() {\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.eventElement = function eventElement (element) {\r\n  var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\r\n  if (!ee) {\r\n    ee = new EventElement(element);\r\n    this.eventElements.push(ee);\r\n  }\r\n  return ee;\r\n};\r\n\r\nEventManager.prototype.bind = function bind (element, eventName, handler) {\r\n  this.eventElement(element).bind(eventName, handler);\r\n};\r\n\r\nEventManager.prototype.unbind = function unbind (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  ee.unbind(eventName, handler);\r\n\r\n  if (ee.isEmpty) {\r\n    // remove\r\n    this.eventElements.splice(this.eventElements.indexOf(ee), 1);\r\n  }\r\n};\r\n\r\nEventManager.prototype.unbindAll = function unbindAll () {\r\n  this.eventElements.forEach(function (e) { return e.unbindAll(); });\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.once = function once (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  var onceHandler = function (evt) {\r\n    ee.unbind(eventName, onceHandler);\r\n    handler(evt);\r\n  };\r\n  ee.bind(eventName, onceHandler);\r\n};\r\n\r\nfunction createEvent(name) {\r\n  if (typeof window.CustomEvent === 'function') {\r\n    return new CustomEvent(name);\r\n  } else {\r\n    var evt = document.createEvent('CustomEvent');\r\n    evt.initCustomEvent(name, false, false, undefined);\r\n    return evt;\r\n  }\r\n}\r\n\r\nfunction processScrollDiff(\r\n  i,\r\n  axis,\r\n  diff,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var fields;\r\n  if (axis === 'top') {\r\n    fields = [\r\n      'contentHeight',\r\n      'containerHeight',\r\n      'scrollTop',\r\n      'y',\r\n      'up',\r\n      'down' ];\r\n  } else if (axis === 'left') {\r\n    fields = [\r\n      'contentWidth',\r\n      'containerWidth',\r\n      'scrollLeft',\r\n      'x',\r\n      'left',\r\n      'right' ];\r\n  } else {\r\n    throw new Error('A proper axis should be provided');\r\n  }\r\n\r\n  processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\r\n}\r\n\r\nfunction processScrollDiff$1(\r\n  i,\r\n  diff,\r\n  ref,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  var contentHeight = ref[0];\r\n  var containerHeight = ref[1];\r\n  var scrollTop = ref[2];\r\n  var y = ref[3];\r\n  var up = ref[4];\r\n  var down = ref[5];\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var element = i.element;\r\n\r\n  // reset reach\r\n  i.reach[y] = null;\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] < 1) {\r\n    i.reach[y] = 'start';\r\n  }\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\r\n    i.reach[y] = 'end';\r\n  }\r\n\r\n  if (diff) {\r\n    element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\r\n\r\n    if (diff < 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\r\n    } else if (diff > 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\r\n    }\r\n\r\n    if (useScrollingClass) {\r\n      setScrollingClassInstantly(i, y);\r\n    }\r\n  }\r\n\r\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\r\n    element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\r\n  }\r\n}\r\n\r\nfunction toInt(x) {\r\n  return parseInt(x, 10) || 0;\r\n}\r\n\r\nfunction isEditable(el) {\r\n  return (\r\n    matches(el, 'input,[contenteditable]') ||\r\n    matches(el, 'select,[contenteditable]') ||\r\n    matches(el, 'textarea,[contenteditable]') ||\r\n    matches(el, 'button,[contenteditable]')\r\n  );\r\n}\r\n\r\nfunction outerWidth(element) {\r\n  var styles = get(element);\r\n  return (\r\n    toInt(styles.width) +\r\n    toInt(styles.paddingLeft) +\r\n    toInt(styles.paddingRight) +\r\n    toInt(styles.borderLeftWidth) +\r\n    toInt(styles.borderRightWidth)\r\n  );\r\n}\r\n\r\nvar env = {\r\n  isWebKit:\r\n    typeof document !== 'undefined' &&\r\n    'WebkitAppearance' in document.documentElement.style,\r\n  supportsTouch:\r\n    typeof window !== 'undefined' &&\r\n    ('ontouchstart' in window ||\r\n      ('maxTouchPoints' in window.navigator &&\r\n        window.navigator.maxTouchPoints > 0) ||\r\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\r\n  supportsIePointer:\r\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\r\n  isChrome:\r\n    typeof navigator !== 'undefined' &&\r\n    /Chrome/i.test(navigator && navigator.userAgent),\r\n};\r\n\r\nfunction updateGeometry(i) {\r\n  var element = i.element;\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n  var rect = element.getBoundingClientRect();\r\n\r\n  i.containerWidth = Math.round(rect.width);\r\n  i.containerHeight = Math.round(rect.height);\r\n\r\n  i.contentWidth = element.scrollWidth;\r\n  i.contentHeight = element.scrollHeight;\r\n\r\n  if (!element.contains(i.scrollbarXRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarXRail);\r\n  }\r\n  if (!element.contains(i.scrollbarYRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarYRail);\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollX &&\r\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\r\n  ) {\r\n    i.scrollbarXActive = true;\r\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\r\n    i.railXRatio = i.containerWidth / i.railXWidth;\r\n    i.scrollbarXWidth = getThumbSize(\r\n      i,\r\n      toInt((i.railXWidth * i.containerWidth) / i.contentWidth)\r\n    );\r\n    i.scrollbarXLeft = toInt(\r\n      ((i.negativeScrollAdjustment + element.scrollLeft) *\r\n        (i.railXWidth - i.scrollbarXWidth)) /\r\n        (i.contentWidth - i.containerWidth)\r\n    );\r\n  } else {\r\n    i.scrollbarXActive = false;\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollY &&\r\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\r\n  ) {\r\n    i.scrollbarYActive = true;\r\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\r\n    i.railYRatio = i.containerHeight / i.railYHeight;\r\n    i.scrollbarYHeight = getThumbSize(\r\n      i,\r\n      toInt((i.railYHeight * i.containerHeight) / i.contentHeight)\r\n    );\r\n    i.scrollbarYTop = toInt(\r\n      (roundedScrollTop * (i.railYHeight - i.scrollbarYHeight)) /\r\n        (i.contentHeight - i.containerHeight)\r\n    );\r\n  } else {\r\n    i.scrollbarYActive = false;\r\n  }\r\n\r\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\r\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\r\n  }\r\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\r\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\r\n  }\r\n\r\n  updateCss(element, i);\r\n\r\n  if (i.scrollbarXActive) {\r\n    element.classList.add(cls.state.active('x'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('x'));\r\n    i.scrollbarXWidth = 0;\r\n    i.scrollbarXLeft = 0;\r\n    element.scrollLeft = i.isRtl === true ? i.contentWidth : 0;\r\n  }\r\n  if (i.scrollbarYActive) {\r\n    element.classList.add(cls.state.active('y'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('y'));\r\n    i.scrollbarYHeight = 0;\r\n    i.scrollbarYTop = 0;\r\n    element.scrollTop = 0;\r\n  }\r\n}\r\n\r\nfunction getThumbSize(i, thumbSize) {\r\n  if (i.settings.minScrollbarLength) {\r\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\r\n  }\r\n  if (i.settings.maxScrollbarLength) {\r\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\r\n  }\r\n  return thumbSize;\r\n}\r\n\r\nfunction updateCss(element, i) {\r\n  var xRailOffset = { width: i.railXWidth };\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n\r\n  if (i.isRtl) {\r\n    xRailOffset.left =\r\n      i.negativeScrollAdjustment +\r\n      element.scrollLeft +\r\n      i.containerWidth -\r\n      i.contentWidth;\r\n  } else {\r\n    xRailOffset.left = element.scrollLeft;\r\n  }\r\n  if (i.isScrollbarXUsingBottom) {\r\n    xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\r\n  } else {\r\n    xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\r\n  }\r\n  set(i.scrollbarXRail, xRailOffset);\r\n\r\n  var yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\r\n  if (i.isScrollbarYUsingRight) {\r\n    if (i.isRtl) {\r\n      yRailOffset.right =\r\n        i.contentWidth -\r\n        (i.negativeScrollAdjustment + element.scrollLeft) -\r\n        i.scrollbarYRight -\r\n        i.scrollbarYOuterWidth -\r\n        9;\r\n    } else {\r\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\r\n    }\r\n  } else {\r\n    if (i.isRtl) {\r\n      yRailOffset.left =\r\n        i.negativeScrollAdjustment +\r\n        element.scrollLeft +\r\n        i.containerWidth * 2 -\r\n        i.contentWidth -\r\n        i.scrollbarYLeft -\r\n        i.scrollbarYOuterWidth;\r\n    } else {\r\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\r\n    }\r\n  }\r\n  set(i.scrollbarYRail, yRailOffset);\r\n\r\n  set(i.scrollbarX, {\r\n    left: i.scrollbarXLeft,\r\n    width: i.scrollbarXWidth - i.railBorderXWidth,\r\n  });\r\n  set(i.scrollbarY, {\r\n    top: i.scrollbarYTop,\r\n    height: i.scrollbarYHeight - i.railBorderYWidth,\r\n  });\r\n}\r\n\r\nfunction clickRail(i) {\r\n  var element = i.element;\r\n\r\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\r\n    var positionTop =\r\n      e.pageY -\r\n      window.pageYOffset -\r\n      i.scrollbarYRail.getBoundingClientRect().top;\r\n    var direction = positionTop > i.scrollbarYTop ? 1 : -1;\r\n\r\n    i.element.scrollTop += direction * i.containerHeight;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n\r\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\r\n    var positionLeft =\r\n      e.pageX -\r\n      window.pageXOffset -\r\n      i.scrollbarXRail.getBoundingClientRect().left;\r\n    var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\r\n\r\n    i.element.scrollLeft += direction * i.containerWidth;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n}\r\n\r\nfunction dragThumb(i) {\r\n  bindMouseScrollHandler(i, [\r\n    'containerWidth',\r\n    'contentWidth',\r\n    'pageX',\r\n    'railXWidth',\r\n    'scrollbarX',\r\n    'scrollbarXWidth',\r\n    'scrollLeft',\r\n    'x',\r\n    'scrollbarXRail' ]);\r\n  bindMouseScrollHandler(i, [\r\n    'containerHeight',\r\n    'contentHeight',\r\n    'pageY',\r\n    'railYHeight',\r\n    'scrollbarY',\r\n    'scrollbarYHeight',\r\n    'scrollTop',\r\n    'y',\r\n    'scrollbarYRail' ]);\r\n}\r\n\r\nfunction bindMouseScrollHandler(\r\n  i,\r\n  ref\r\n) {\r\n  var containerHeight = ref[0];\r\n  var contentHeight = ref[1];\r\n  var pageY = ref[2];\r\n  var railYHeight = ref[3];\r\n  var scrollbarY = ref[4];\r\n  var scrollbarYHeight = ref[5];\r\n  var scrollTop = ref[6];\r\n  var y = ref[7];\r\n  var scrollbarYRail = ref[8];\r\n\r\n  var element = i.element;\r\n\r\n  var startingScrollTop = null;\r\n  var startingMousePageY = null;\r\n  var scrollBy = null;\r\n\r\n  function mouseMoveHandler(e) {\r\n    if (e.touches && e.touches[0]) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    element[scrollTop] =\r\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\r\n    addScrollingClass(i, y);\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n    if (e.type.startsWith('touch') && e.changedTouches.length > 1) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function mouseUpHandler() {\r\n    removeScrollingClass(i, y);\r\n    i[scrollbarYRail].classList.remove(cls.state.clicking);\r\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n  }\r\n\r\n  function bindMoves(e, touchMode) {\r\n    startingScrollTop = element[scrollTop];\r\n    if (touchMode && e.touches) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    startingMousePageY = e[pageY];\r\n    scrollBy =\r\n      (i[contentHeight] - i[containerHeight]) /\r\n      (i[railYHeight] - i[scrollbarYHeight]);\r\n    if (!touchMode) {\r\n      i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n      i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\r\n      e.preventDefault();\r\n    } else {\r\n      i.event.bind(i.ownerDocument, 'touchmove', mouseMoveHandler);\r\n    }\r\n\r\n    i[scrollbarYRail].classList.add(cls.state.clicking);\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  i.event.bind(i[scrollbarY], 'mousedown', function (e) {\r\n    bindMoves(e);\r\n  });\r\n  i.event.bind(i[scrollbarY], 'touchstart', function (e) {\r\n    bindMoves(e, true);\r\n  });\r\n}\r\n\r\nfunction keyboard(i) {\r\n  var element = i.element;\r\n\r\n  var elementHovered = function () { return matches(element, ':hover'); };\r\n  var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    if (deltaX === 0) {\r\n      if (!i.scrollbarYActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollTop === 0 && deltaY > 0) ||\r\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n\r\n    var scrollLeft = element.scrollLeft;\r\n    if (deltaY === 0) {\r\n      if (!i.scrollbarXActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollLeft === 0 && deltaX < 0) ||\r\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\r\n    if (\r\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\r\n      e.defaultPrevented\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!elementHovered() && !scrollbarFocused()) {\r\n      return;\r\n    }\r\n\r\n    var activeElement = document.activeElement\r\n      ? document.activeElement\r\n      : i.ownerDocument.activeElement;\r\n    if (activeElement) {\r\n      if (activeElement.tagName === 'IFRAME') {\r\n        activeElement = activeElement.contentDocument.activeElement;\r\n      } else {\r\n        // go deeper if element is a webcomponent\r\n        while (activeElement.shadowRoot) {\r\n          activeElement = activeElement.shadowRoot.activeElement;\r\n        }\r\n      }\r\n      if (isEditable(activeElement)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var deltaX = 0;\r\n    var deltaY = 0;\r\n\r\n    switch (e.which) {\r\n      case 37: // left\r\n        if (e.metaKey) {\r\n          deltaX = -i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = -i.containerWidth;\r\n        } else {\r\n          deltaX = -30;\r\n        }\r\n        break;\r\n      case 38: // up\r\n        if (e.metaKey) {\r\n          deltaY = i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = 30;\r\n        }\r\n        break;\r\n      case 39: // right\r\n        if (e.metaKey) {\r\n          deltaX = i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = i.containerWidth;\r\n        } else {\r\n          deltaX = 30;\r\n        }\r\n        break;\r\n      case 40: // down\r\n        if (e.metaKey) {\r\n          deltaY = -i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = -i.containerHeight;\r\n        } else {\r\n          deltaY = -30;\r\n        }\r\n        break;\r\n      case 32: // space bar\r\n        if (e.shiftKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = -i.containerHeight;\r\n        }\r\n        break;\r\n      case 33: // page up\r\n        deltaY = i.containerHeight;\r\n        break;\r\n      case 34: // page down\r\n        deltaY = -i.containerHeight;\r\n        break;\r\n      case 36: // home\r\n        deltaY = i.contentHeight;\r\n        break;\r\n      case 35: // end\r\n        deltaY = -i.contentHeight;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    if (i.settings.suppressScrollX && deltaX !== 0) {\r\n      return;\r\n    }\r\n    if (i.settings.suppressScrollY && deltaY !== 0) {\r\n      return;\r\n    }\r\n\r\n    element.scrollTop -= deltaY;\r\n    element.scrollLeft += deltaX;\r\n    updateGeometry(i);\r\n\r\n    if (shouldPreventDefault(deltaX, deltaY)) {\r\n      e.preventDefault();\r\n    }\r\n  });\r\n}\r\n\r\nfunction wheel(i) {\r\n  var element = i.element;\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var roundedScrollTop = Math.floor(element.scrollTop);\r\n    var isTop = element.scrollTop === 0;\r\n    var isBottom =\r\n      roundedScrollTop + element.offsetHeight === element.scrollHeight;\r\n    var isLeft = element.scrollLeft === 0;\r\n    var isRight =\r\n      element.scrollLeft + element.offsetWidth === element.scrollWidth;\r\n\r\n    var hitsBound;\r\n\r\n    // pick axis with primary direction\r\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n      hitsBound = isTop || isBottom;\r\n    } else {\r\n      hitsBound = isLeft || isRight;\r\n    }\r\n\r\n    return hitsBound ? !i.settings.wheelPropagation : true;\r\n  }\r\n\r\n  function getDeltaFromEvent(e) {\r\n    var deltaX = e.deltaX;\r\n    var deltaY = -1 * e.deltaY;\r\n\r\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\r\n      // OS X Safari\r\n      deltaX = (-1 * e.wheelDeltaX) / 6;\r\n      deltaY = e.wheelDeltaY / 6;\r\n    }\r\n\r\n    if (e.deltaMode && e.deltaMode === 1) {\r\n      // Firefox in deltaMode 1: Line scrolling\r\n      deltaX *= 10;\r\n      deltaY *= 10;\r\n    }\r\n\r\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\r\n      // IE in some mouse drivers\r\n      deltaX = 0;\r\n      deltaY = e.wheelDelta;\r\n    }\r\n\r\n    if (e.shiftKey) {\r\n      // reverse axis with shift key\r\n      return [-deltaY, -deltaX];\r\n    }\r\n    return [deltaX, deltaY];\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\r\n    if (!env.isWebKit && element.querySelector('select:focus')) {\r\n      return true;\r\n    }\r\n\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function mousewheelHandler(e) {\r\n    var ref = getDeltaFromEvent(e);\r\n    var deltaX = ref[0];\r\n    var deltaY = ref[1];\r\n\r\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\r\n      return;\r\n    }\r\n\r\n    var shouldPrevent = false;\r\n    if (!i.settings.useBothWheelAxes) {\r\n      // deltaX will only be used for horizontal scrolling and deltaY will\r\n      // only be used for vertical scrolling - this is the default\r\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\r\n      // only vertical scrollbar is active and useBothWheelAxes option is\r\n      // active, so let's scroll vertical bar using both mouse wheel axes\r\n      if (deltaY) {\r\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\r\n      // useBothWheelAxes and only horizontal bar is active, so use both\r\n      // wheel axes for horizontal bar\r\n      if (deltaX) {\r\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    }\r\n\r\n    updateGeometry(i);\r\n\r\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\r\n    if (shouldPrevent && !e.ctrlKey) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  if (typeof window.onwheel !== 'undefined') {\r\n    i.event.bind(element, 'wheel', mousewheelHandler);\r\n  } else if (typeof window.onmousewheel !== 'undefined') {\r\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\r\n  }\r\n}\r\n\r\nfunction touch(i) {\r\n  if (!env.supportsTouch && !env.supportsIePointer) {\r\n    return;\r\n  }\r\n\r\n  var element = i.element;\r\n\r\n  function shouldPrevent(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    var scrollLeft = element.scrollLeft;\r\n    var magnitudeX = Math.abs(deltaX);\r\n    var magnitudeY = Math.abs(deltaY);\r\n\r\n    if (magnitudeY > magnitudeX) {\r\n      // user is perhaps trying to swipe up/down the page\r\n\r\n      if (\r\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\r\n        (deltaY > 0 && scrollTop === 0)\r\n      ) {\r\n        // set prevent for mobile Chrome refresh\r\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\r\n      }\r\n    } else if (magnitudeX > magnitudeY) {\r\n      // user is perhaps trying to swipe left/right across the page\r\n\r\n      if (\r\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\r\n        (deltaX > 0 && scrollLeft === 0)\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function applyTouchMove(differenceX, differenceY) {\r\n    element.scrollTop -= differenceY;\r\n    element.scrollLeft -= differenceX;\r\n\r\n    updateGeometry(i);\r\n  }\r\n\r\n  var startOffset = {};\r\n  var startTime = 0;\r\n  var speed = {};\r\n  var easingLoop = null;\r\n\r\n  function getTouch(e) {\r\n    if (e.targetTouches) {\r\n      return e.targetTouches[0];\r\n    } else {\r\n      // Maybe IE pointer\r\n      return e;\r\n    }\r\n  }\r\n\r\n  function shouldHandle(e) {\r\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\r\n      return false;\r\n    }\r\n    if (e.targetTouches && e.targetTouches.length === 1) {\r\n      return true;\r\n    }\r\n    if (\r\n      e.pointerType &&\r\n      e.pointerType !== 'mouse' &&\r\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function touchStart(e) {\r\n    if (!shouldHandle(e)) {\r\n      return;\r\n    }\r\n\r\n    var touch = getTouch(e);\r\n\r\n    startOffset.pageX = touch.pageX;\r\n    startOffset.pageY = touch.pageY;\r\n\r\n    startTime = new Date().getTime();\r\n\r\n    if (easingLoop !== null) {\r\n      clearInterval(easingLoop);\r\n    }\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function touchMove(e) {\r\n    if (shouldHandle(e)) {\r\n      var touch = getTouch(e);\r\n\r\n      var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\r\n\r\n      var differenceX = currentOffset.pageX - startOffset.pageX;\r\n      var differenceY = currentOffset.pageY - startOffset.pageY;\r\n\r\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\r\n        return;\r\n      }\r\n\r\n      applyTouchMove(differenceX, differenceY);\r\n      startOffset = currentOffset;\r\n\r\n      var currentTime = new Date().getTime();\r\n\r\n      var timeGap = currentTime - startTime;\r\n      if (timeGap > 0) {\r\n        speed.x = differenceX / timeGap;\r\n        speed.y = differenceY / timeGap;\r\n        startTime = currentTime;\r\n      }\r\n\r\n      if (shouldPrevent(differenceX, differenceY)) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  }\r\n  function touchEnd() {\r\n    if (i.settings.swipeEasing) {\r\n      clearInterval(easingLoop);\r\n      easingLoop = setInterval(function() {\r\n        if (i.isInitialized) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (!speed.x && !speed.y) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (!i.element) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        applyTouchMove(speed.x * 30, speed.y * 30);\r\n\r\n        speed.x *= 0.8;\r\n        speed.y *= 0.8;\r\n      }, 10);\r\n    }\r\n  }\r\n\r\n  if (env.supportsTouch) {\r\n    i.event.bind(element, 'touchstart', touchStart);\r\n    i.event.bind(element, 'touchmove', touchMove);\r\n    i.event.bind(element, 'touchend', touchEnd);\r\n  } else if (env.supportsIePointer) {\r\n    if (window.PointerEvent) {\r\n      i.event.bind(element, 'pointerdown', touchStart);\r\n      i.event.bind(element, 'pointermove', touchMove);\r\n      i.event.bind(element, 'pointerup', touchEnd);\r\n    } else if (window.MSPointerEvent) {\r\n      i.event.bind(element, 'MSPointerDown', touchStart);\r\n      i.event.bind(element, 'MSPointerMove', touchMove);\r\n      i.event.bind(element, 'MSPointerUp', touchEnd);\r\n    }\r\n  }\r\n}\r\n\r\nvar defaultSettings = function () { return ({\r\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\r\n  maxScrollbarLength: null,\r\n  minScrollbarLength: null,\r\n  scrollingThreshold: 1000,\r\n  scrollXMarginOffset: 0,\r\n  scrollYMarginOffset: 0,\r\n  suppressScrollX: false,\r\n  suppressScrollY: false,\r\n  swipeEasing: true,\r\n  useBothWheelAxes: false,\r\n  wheelPropagation: true,\r\n  wheelSpeed: 1,\r\n}); };\r\n\r\nvar handlers = {\r\n  'click-rail': clickRail,\r\n  'drag-thumb': dragThumb,\r\n  keyboard: keyboard,\r\n  wheel: wheel,\r\n  touch: touch,\r\n};\r\n\r\nvar PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\r\n  var this$1 = this;\r\n  if ( userSettings === void 0 ) userSettings = {};\r\n\r\n  if (typeof element === 'string') {\r\n    element = document.querySelector(element);\r\n  }\r\n\r\n  if (!element || !element.nodeName) {\r\n    throw new Error('no element is specified to initialize PerfectScrollbar');\r\n  }\r\n\r\n  this.element = element;\r\n\r\n  element.classList.add(cls.main);\r\n\r\n  this.settings = defaultSettings();\r\n  for (var key in userSettings) {\r\n    this.settings[key] = userSettings[key];\r\n  }\r\n\r\n  this.containerWidth = null;\r\n  this.containerHeight = null;\r\n  this.contentWidth = null;\r\n  this.contentHeight = null;\r\n\r\n  var focus = function () { return element.classList.add(cls.state.focus); };\r\n  var blur = function () { return element.classList.remove(cls.state.focus); };\r\n\r\n  this.isRtl = get(element).direction === 'rtl';\r\n  if (this.isRtl === true) {\r\n    element.classList.add(cls.rtl);\r\n  }\r\n  this.isNegativeScroll = (function () {\r\n    var originalScrollLeft = element.scrollLeft;\r\n    var result = null;\r\n    element.scrollLeft = -1;\r\n    result = element.scrollLeft < 0;\r\n    element.scrollLeft = originalScrollLeft;\r\n    return result;\r\n  })();\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? element.scrollWidth - element.clientWidth\r\n    : 0;\r\n  this.event = new EventManager();\r\n  this.ownerDocument = element.ownerDocument || document;\r\n\r\n  this.scrollbarXRail = div(cls.element.rail('x'));\r\n  element.appendChild(this.scrollbarXRail);\r\n  this.scrollbarX = div(cls.element.thumb('x'));\r\n  this.scrollbarXRail.appendChild(this.scrollbarX);\r\n  this.scrollbarX.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarX, 'focus', focus);\r\n  this.event.bind(this.scrollbarX, 'blur', blur);\r\n  this.scrollbarXActive = null;\r\n  this.scrollbarXWidth = null;\r\n  this.scrollbarXLeft = null;\r\n  var railXStyle = get(this.scrollbarXRail);\r\n  this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\r\n  if (isNaN(this.scrollbarXBottom)) {\r\n    this.isScrollbarXUsingBottom = false;\r\n    this.scrollbarXTop = toInt(railXStyle.top);\r\n  } else {\r\n    this.isScrollbarXUsingBottom = true;\r\n  }\r\n  this.railBorderXWidth =\r\n    toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\r\n  // Set rail to display:block to calculate margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\r\n  set(this.scrollbarXRail, { display: '' });\r\n  this.railXWidth = null;\r\n  this.railXRatio = null;\r\n\r\n  this.scrollbarYRail = div(cls.element.rail('y'));\r\n  element.appendChild(this.scrollbarYRail);\r\n  this.scrollbarY = div(cls.element.thumb('y'));\r\n  this.scrollbarYRail.appendChild(this.scrollbarY);\r\n  this.scrollbarY.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarY, 'focus', focus);\r\n  this.event.bind(this.scrollbarY, 'blur', blur);\r\n  this.scrollbarYActive = null;\r\n  this.scrollbarYHeight = null;\r\n  this.scrollbarYTop = null;\r\n  var railYStyle = get(this.scrollbarYRail);\r\n  this.scrollbarYRight = parseInt(railYStyle.right, 10);\r\n  if (isNaN(this.scrollbarYRight)) {\r\n    this.isScrollbarYUsingRight = false;\r\n    this.scrollbarYLeft = toInt(railYStyle.left);\r\n  } else {\r\n    this.isScrollbarYUsingRight = true;\r\n  }\r\n  this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\r\n  this.railBorderYWidth =\r\n    toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railYMarginHeight =\r\n    toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\r\n  set(this.scrollbarYRail, { display: '' });\r\n  this.railYHeight = null;\r\n  this.railYRatio = null;\r\n\r\n  this.reach = {\r\n    x:\r\n      element.scrollLeft <= 0\r\n        ? 'start'\r\n        : element.scrollLeft >= this.contentWidth - this.containerWidth\r\n        ? 'end'\r\n        : null,\r\n    y:\r\n      element.scrollTop <= 0\r\n        ? 'start'\r\n        : element.scrollTop >= this.contentHeight - this.containerHeight\r\n        ? 'end'\r\n        : null,\r\n  };\r\n\r\n  this.isAlive = true;\r\n\r\n  this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\r\n\r\n  this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\r\n  this.lastScrollLeft = element.scrollLeft; // for onScroll only\r\n  this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\r\n  updateGeometry(this);\r\n};\r\n\r\nPerfectScrollbar.prototype.update = function update () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  // Recalcuate negative scrollLeft adjustment\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? this.element.scrollWidth - this.element.clientWidth\r\n    : 0;\r\n\r\n  // Recalculate rail margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(get(this.scrollbarXRail).marginLeft) +\r\n    toInt(get(this.scrollbarXRail).marginRight);\r\n  this.railYMarginHeight =\r\n    toInt(get(this.scrollbarYRail).marginTop) +\r\n    toInt(get(this.scrollbarYRail).marginBottom);\r\n\r\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\r\n  set(this.scrollbarXRail, { display: 'none' });\r\n  set(this.scrollbarYRail, { display: 'none' });\r\n\r\n  updateGeometry(this);\r\n\r\n  processScrollDiff(this, 'top', 0, false, true);\r\n  processScrollDiff(this, 'left', 0, false, true);\r\n\r\n  set(this.scrollbarXRail, { display: '' });\r\n  set(this.scrollbarYRail, { display: '' });\r\n};\r\n\r\nPerfectScrollbar.prototype.onScroll = function onScroll (e) {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  updateGeometry(this);\r\n  processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\r\n  processScrollDiff(\r\n    this,\r\n    'left',\r\n    this.element.scrollLeft - this.lastScrollLeft\r\n  );\r\n\r\n  this.lastScrollTop = Math.floor(this.element.scrollTop);\r\n  this.lastScrollLeft = this.element.scrollLeft;\r\n};\r\n\r\nPerfectScrollbar.prototype.destroy = function destroy () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  this.event.unbindAll();\r\n  remove(this.scrollbarX);\r\n  remove(this.scrollbarY);\r\n  remove(this.scrollbarXRail);\r\n  remove(this.scrollbarYRail);\r\n  this.removePsClasses();\r\n\r\n  // unset elements\r\n  this.element = null;\r\n  this.scrollbarX = null;\r\n  this.scrollbarY = null;\r\n  this.scrollbarXRail = null;\r\n  this.scrollbarYRail = null;\r\n\r\n  this.isAlive = false;\r\n};\r\n\r\nPerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\r\n  this.element.className = this.element.className\r\n    .split(' ')\r\n    .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\r\n    .join(' ');\r\n};\r\n\r\nexport default PerfectScrollbar;\r\n//# sourceMappingURL=perfect-scrollbar.esm.js.map\r\n","function select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.container = options.container;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                this.container.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    this.container.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    this.container.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.trigger) {\n                    this.trigger.focus();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","var is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n                this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    container: this.container,\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});","import PerfectScrollbar from 'perfect-scrollbar'\nimport Clipboard from 'clipboard'\nimport Constants from '../configuration/Constants'\n\n/**\n * Smart guide\n * @typedef {Object} SmartGuide\n * @property {Editor} editor - A reference to the current editor.\n * @property {String} wordToChange - Word to change following a click on a word.\n * @property {String} lastWord - Keep the last word of the previous export to compare with the new and scroll if it's different.\n * @property {String} previousLabelExport - Keep the previous label export to know if we should repopulate the prompter text.\n * @property {PerfectScrollbar} perfectScrollbar - Perfect Scrollbar used to get gestures from smart guide using touch-action none anyway and get scrolling too.\n * @property {Object} elements - All the HTML elements of the smart guide.\n * @property {Number} smartGuideTimeOutId - Id of the setTimeOut from fade out animation to clear.\n * @property {String} randomString - Random string used in case of multiple smart guide.\n */\n\n/**\n * Create all the smart guide HTML elements.\n */\nfunction createHTMLElements (randomString) {\n  /**\n   * The smart guide element.\n   * @type {HTMLDivElement}\n   */\n  const smartGuideElement = document.createElement('div')\n  smartGuideElement.id = 'smartguide' + randomString\n  smartGuideElement.classList.add('smartguide')\n\n  /**\n   * The prompter text element that contains the text to get the overflow working.\n   * @type {HTMLDivElement}\n   */\n  const textElement = document.createElement('div')\n  textElement.id = 'prompter-text' + randomString\n  textElement.classList.add('prompter-text')\n  textElement.setAttribute('touch-action', 'none')\n\n  /**\n   * The text container element that contains the text element.\n   * @type {HTMLDivElement}\n   */\n  const textContainer = document.createElement('div')\n  textContainer.id = 'prompter-text-container' + randomString\n  textContainer.classList.add('prompter-text-container')\n  textContainer.appendChild(textElement)\n\n  /**\n   * The actions menu represented by the ellipsis character.\n   * @type {HTMLDivElement}\n   */\n  const ellipsisElement = document.createElement('div')\n  ellipsisElement.id = 'ellipsis' + randomString\n  ellipsisElement.classList.add('ellipsis')\n  ellipsisElement.innerHTML = '...'\n\n  /**\n   * The tag element.\n   * @type {HTMLDivElement}\n   */\n  const tagElement = document.createElement('div')\n  tagElement.id = 'tag-icon' + randomString\n  tagElement.classList.add('tag-icon')\n  tagElement.innerHTML = '&#182;'\n\n  /**\n   * The candidates element that contains the candidates for a word.\n   * @type {HTMLDivElement}\n   */\n  const candidatesElement = document.createElement('div')\n  candidatesElement.id = 'candidates' + randomString\n  candidatesElement.classList.add('candidates')\n\n  /**\n   * The menu element that contains the actions.\n   * @type {HTMLDivElement}\n   */\n  const menuElement = document.createElement('div')\n  menuElement.id = 'more-menu' + randomString\n  menuElement.classList.add('more-menu')\n\n  /**\n   * The convert button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const convertElement = document.createElement('button')\n  convertElement.classList.add('options-label-button')\n  convertElement.id = 'convert' + randomString\n  convertElement.innerHTML = 'Convert'\n\n  /**\n   * The copy button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const copyElement = document.createElement('button')\n  copyElement.classList.add('options-label-button')\n  copyElement.id = 'copy' + randomString\n  copyElement.innerHTML = 'Copy'\n\n  /**\n   * The delete button from actions menu.\n   * @type {HTMLButtonElement}\n   */\n  const deleteElement = document.createElement('button')\n  deleteElement.classList.add('options-label-button')\n  deleteElement.id = 'delete' + randomString\n  deleteElement.innerHTML = 'Delete'\n\n  return {\n    smartGuideElement,\n    textElement,\n    textContainer,\n    candidatesElement,\n    menuElement,\n    tagElement,\n    ellipsisElement,\n    convertElement,\n    copyElement,\n    deleteElement\n  }\n}\n\n/**\n * Check if node is in shadow dom\n * @param {Node} node - A node element.\n * @returns {boolean} true if is in shadow dom, false otherwise.\n */\nfunction isInShadow (node) {\n  let parent = (node && node.parentNode)\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true\n    }\n    parent = parent.parentNode\n  }\n  return false\n}\n\n/**\n * Show the actions of the action menu.\n * @param {Event} evt - Event used to insert the option div using the event's target.\n * @param {Object} elements - All the elements of the smart guide.\n * @param {SmartGuide} smartGuide\n */\nfunction showActions (evt, elements) {\n  const elementsRef = elements\n\n  const insertActions = () => {\n    elementsRef.menuElement.appendChild(elementsRef.convertElement)\n    elementsRef.menuElement.appendChild(elementsRef.copyElement)\n    elementsRef.menuElement.appendChild(elementsRef.deleteElement)\n\n    const parent = evt.target.parentNode\n    parent.insertBefore(elementsRef.menuElement, evt.target)\n  }\n\n  const positionActions = () => {\n    // 48 to get the boundary of smart guide element.\n    const left = evt.target.offsetLeft - 68\n    elementsRef.menuElement.style.left = `${left}px`\n  }\n\n  const isMenuInDocument = document.contains(elementsRef.menuElement)\n  if (!isInShadow(elementsRef.menuElement) && !isMenuInDocument) {\n    elementsRef.menuElement.style.display = 'flex'\n    positionActions()\n    insertActions()\n  } else if (elementsRef.menuElement.style.display === 'none') {\n    positionActions()\n    elementsRef.menuElement.style.display = 'flex'\n  }\n}\n\n/**\n * Show the candidates of the clicked word.\n * @param {Event} evt - Event used to determine the clicked word.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction showCandidates (evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n\n  if (evt.target.id !== `prompter-text${smartGuide.randomString}`) {\n    const id = evt.target.id.replace('word-', '').replace(smartGuide.randomString, '')\n    const words = JSON.parse(editor.exports[Constants.Exports.JIIX]).words\n    smartGuideRef.wordToChange = words[id]\n    smartGuideRef.wordToChange.id = id\n    elementsRef.candidatesElement.innerHTML = ''\n    if (smartGuideRef.wordToChange && smartGuideRef.wordToChange.candidates) {\n      elementsRef.candidatesElement.style.display = 'flex'\n      smartGuideRef.wordToChange.candidates.forEach((word, index) => {\n        if (smartGuideRef.wordToChange.label === word) {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\" class=\"selected-word\">${word}</span>`\n        } else {\n          elementsRef.candidatesElement.innerHTML += `<span id=\"cdt-${index}${smartGuide.randomString}\">${word}</span>`\n        }\n      })\n      // get the parent parent of word to insert just before smart guide, 48 to get the boundary of smart guide element.\n      const top = 48\n      const left = evt.target.getBoundingClientRect().left - 60\n      elementsRef.candidatesElement.style.top = `${top}px`\n      elementsRef.candidatesElement.style.left = `${left}px`\n\n      const parent = evt.target.parentNode.parentNode.parentNode\n      parent.insertBefore(elementsRef.candidatesElement, evt.target.parentNode.parentNode)\n    }\n  }\n}\n\n/**\n * Call the import_ function of the editor to import the modified Jiix with the new label.\n * @param {Event} evt - Event to determine the clicked candidate.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction clickCandidate (evt, editor, smartGuide) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n  const candidate = evt.target.innerText\n\n  if (candidate !== smartGuideRef.wordToChange.label && smartGuideRef.wordToChange.candidates.includes(candidate)) {\n    const jiixToImport = JSON.parse(editor.exports[Constants.Exports.JIIX])\n    jiixToImport.words[smartGuideRef.wordToChange.id].label = candidate\n    // eslint-disable-next-line no-underscore-dangle\n    editor.import_(JSON.stringify(jiixToImport), Constants.Exports.JIIX)\n  }\n  elementsRef.candidatesElement.style.display = 'none'\n}\n\n/**\n * Add the listeners to the smart guide elements.\n * @param {Editor} editor - A reference to the editor.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction addListeners (editor, smartGuide) {\n  const elementsRef = smartGuide.elements\n\n  elementsRef.textElement.addEventListener('click', evt => showCandidates(evt, editor, smartGuide))\n  elementsRef.candidatesElement.addEventListener('click', evt => clickCandidate(evt, editor, smartGuide))\n  elementsRef.ellipsisElement.addEventListener('click', evt => showActions(evt, elementsRef))\n  elementsRef.copyElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none'\n  })\n  elementsRef.convertElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none'\n    editor.convert()\n  })\n  elementsRef.deleteElement.addEventListener('click', () => {\n    elementsRef.menuElement.style.display = 'none'\n    editor.clear()\n  })\n}\n\n/**\n * Call mutation observer to trigger fade out animation.\n * @param {number} [duration=10000] - the duration in milliseconds before calling the fade out animation.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction callFadeOutObserver (duration = 10000, smartGuide) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n  // eslint-disable-next-line no-undef\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach(() => {\n      if (smartGuideRef.smartGuideTimeOutId) {\n        clearTimeout(smartGuideRef.smartGuideTimeOutId)\n      }\n      if (elementsRef.candidatesElement.style.display === 'none' && elementsRef.menuElement.style.display === 'none') {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out')\n          elementsRef.smartGuideElement.classList.remove('smartguide-in')\n        }, duration)\n      } else if (!document.contains(elementsRef.candidatesElement) && !document.contains(elementsRef.menuElement)) {\n        smartGuideRef.smartGuideTimeOutId = setTimeout(() => {\n          elementsRef.smartGuideElement.classList.add('smartguide-out')\n          elementsRef.smartGuideElement.classList.remove('smartguide-in')\n        }, duration)\n      }\n    })\n  })\n  observer.observe(elementsRef.smartGuideElement, { childList: true, subtree: true, attributes: true })\n}\n\n/**\n * Insert the smart guide HTML elements in the DOM.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n */\nfunction insertSmartGuide (smartGuide) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n\n  const insertSmartGuideElement = (left, top) => {\n    elementsRef.smartGuideElement.style.top = `${top}px`\n    elementsRef.smartGuideElement.style.left = `${left}px`\n    elementsRef.smartGuideElement.style.visibility = 'hidden'\n\n    const parent = smartGuideRef.editor.domElement\n    parent.insertBefore(elementsRef.smartGuideElement, smartGuideRef.editor.loader)\n  }\n  const insertTag = () => {\n    elementsRef.smartGuideElement.appendChild(elementsRef.tagElement)\n  }\n  const insertTextContainer = (left, maxWidth) => {\n    elementsRef.textContainer.style.left = `${left}px`\n\n    // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n    elementsRef.textContainer.style.width = `${maxWidth}px`\n    elementsRef.textContainer.style.maxWidth = `${maxWidth}px`\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.textContainer)\n  }\n  const insertEllipsis = (left) => {\n    elementsRef.ellipsisElement.style.left = `${left}px`\n\n    elementsRef.smartGuideElement.appendChild(elementsRef.ellipsisElement)\n  }\n\n  // FIXME Use value from contentChanged when available\n\n  const mmToPixels = 3.779527559\n\n  const marginTop = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.top * mmToPixels\n  const marginLeft = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.left * mmToPixels\n\n  // 12 is the space between line in mm\n  const top = marginTop - (12 * mmToPixels)\n  let left = marginLeft\n\n  insertSmartGuideElement(left, top)\n  insertTag()\n\n  // 35 is the ellipsis element width\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left\n  left = elementsRef.tagElement.offsetWidth\n  insertTextContainer(left, maxWidthTextContainer)\n\n  left += maxWidthTextContainer\n  insertEllipsis(left)\n\n  elementsRef.menuElement.style.display = 'none'\n  elementsRef.menuElement.appendChild(elementsRef.convertElement)\n  elementsRef.menuElement.appendChild(elementsRef.copyElement)\n  elementsRef.menuElement.appendChild(elementsRef.deleteElement)\n  elementsRef.smartGuideElement.appendChild(elementsRef.menuElement)\n\n  elementsRef.candidatesElement.style.display = 'none'\n  elementsRef.smartGuideElement.appendChild(elementsRef.candidatesElement)\n\n  // 48px as set in css\n  elementsRef.smartGuideElement.style.height = '48px'\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`\n  smartGuideRef.perfectScrollbar.update()\n}\n\n/**\n * Create a new smart guide\n * @param {Editor} editor - A reference to the editor.\n * @returns {SmartGuide} New smart guide\n */\nexport function createSmartGuide (editor) {\n  const randomString = '-' + Math.random().toString(10).substring(2, 12)\n  const elements = createHTMLElements(randomString)\n\n  /**\n   * Clipboard from clipboard.js used to get copy across all browsers.\n   * @type {Clipboard}\n   */\n  // eslint-disable-next-line no-unused-vars\n  const clipboard = new Clipboard(elements.copyElement)\n  const perfectScrollbar = new PerfectScrollbar(elements.textContainer, { suppressScrollY: true, scrollXMarginOffset: 1 })\n\n  const smartGuide = {\n    editor,\n    wordToChange: '',\n    lastWord: '',\n    previousLabelExport: ' ',\n    perfectScrollbar,\n    elements,\n    smartGuideTimeOutId: 0,\n    randomString\n  }\n  addListeners(editor, smartGuide)\n\n  if (editor.configuration.recognitionParams.iink.text.smartGuideFadeOut.enable) {\n    callFadeOutObserver(editor.configuration.recognitionParams.iink.text.smartGuideFadeOut.duration, smartGuide)\n  }\n\n  return smartGuide\n}\n\nexport function resize (smartGuide) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n\n  const mmToPixels = 3.779527559\n  let left = smartGuideRef.editor.configuration.recognitionParams.iink.text.margin.left * mmToPixels\n\n  const maxWidthTextContainer = smartGuideRef.editor.domElement.clientWidth - left - elementsRef.tagElement.offsetWidth - 35 - left\n\n  // Assign a max width to the smartguide based on the editor width, the left position and a small margin for the ellipsis (48px)\n  elementsRef.textContainer.style.width = `${maxWidthTextContainer}px`\n  elementsRef.textContainer.style.maxWidth = `${maxWidthTextContainer}px`\n\n  left = elementsRef.tagElement.offsetWidth\n  left += maxWidthTextContainer\n  elementsRef.ellipsisElement.style.left = `${left}px`\n\n  elementsRef.smartGuideElement.style.width = `${elementsRef.tagElement.offsetWidth + elementsRef.textContainer.offsetWidth + elementsRef.ellipsisElement.offsetWidth}px`\n  smartGuideRef.perfectScrollbar.update()\n}\n\n/**\n * Launch the smartguide.\n * @param {SmartGuide} smartGuide - A reference to the smart guide.\n * @param {Object} exports -  The export from the editor.\n */\nexport function launchSmartGuide (smartGuide, exports) {\n  const smartGuideRef = smartGuide\n  const elementsRef = smartGuide.elements\n\n  const isSmartGuideInDocument = document.contains(elementsRef.smartGuideElement)\n\n  if (!isInShadow(elementsRef.smartGuideElement) && !isSmartGuideInDocument) {\n    insertSmartGuide(smartGuide)\n  }\n\n  const addAnimationToModifiedWord = (words) => {\n    if (smartGuideRef.tempWords && smartGuideRef.tempWords.length === words.length) {\n      const labelWordsArray = words.map(word => word.label)\n      const tempLabelWordsArray = smartGuideRef.tempWords.map(word => word.label)\n      const wordChangedId = labelWordsArray.indexOf(labelWordsArray.filter(a => tempLabelWordsArray.indexOf(a) === -1)[0])\n      if (document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`) && wordChangedId > -1) {\n        document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).classList.add('modified-word')\n        elementsRef.textContainer.scrollLeft = document.getElementById(`word-${wordChangedId}${smartGuide.randomString}`).offsetLeft - 10\n      }\n    }\n    smartGuideRef.tempWords = JSON.parse(exports[Constants.Exports.JIIX]).words\n  }\n\n  const createWordSpan = (empty, index, word) => {\n    const span = document.createElement('span')\n    span.id = `word-${index}${smartGuide.randomString}`\n    if (empty) {\n      span.innerHTML = '&nbsp;'\n    } else {\n      span.textContent = word.label\n    }\n    return span\n  }\n\n  // Possible optimisation ? Check if we can find a way to not repopulate the smartguide every time even if we now use Document fragment\n  const populatePrompter = (words) => {\n    elementsRef.textElement.innerHTML = ''\n    // We use a DocumentFragment to reflow the DOM only one time as it is not part of the DOM\n    const myFragment = document.createDocumentFragment()\n    words.forEach((word, index) => {\n      if (word.label === ' ' || word.label.includes('\\n')) {\n        myFragment.appendChild(createWordSpan(true, index))\n      } else if (index !== words.length - 1) {\n        myFragment.appendChild(createWordSpan(false, index, word))\n      } else {\n        elementsRef.textElement.appendChild(myFragment)\n        smartGuideRef.perfectScrollbar.update()\n        if (smartGuideRef.lastWord === '') {\n          smartGuideRef.lastWord = word\n        }\n        const span = createWordSpan(false, index, word)\n        // This is used to scroll to last word if last word is modified\n        if ((smartGuideRef.lastWord.candidates !== word.candidates) && (smartGuideRef.lastWord.label !== word.label)) {\n          span.classList.add('added-word')\n          elementsRef.textElement.appendChild(span)\n          elementsRef.textContainer.scrollLeft = span.offsetLeft\n          smartGuideRef.lastWord = word\n        } else {\n          elementsRef.textElement.appendChild(span)\n          elementsRef.textContainer.scrollLeft = span.offsetLeft\n        }\n      }\n    })\n  }\n\n  if (exports && JSON.parse(exports[Constants.Exports.JIIX]).words.length > 0) {\n    elementsRef.smartGuideElement.classList.add('smartguide-in')\n    elementsRef.smartGuideElement.classList.remove('smartguide-out')\n    elementsRef.candidatesElement.style.display = 'none'\n    elementsRef.menuElement.style.display = 'none'\n    if (smartGuideRef.previousLabelExport && smartGuideRef.previousLabelExport !== JSON.parse(exports[Constants.Exports.JIIX]).label) {\n      const words = JSON.parse(exports[Constants.Exports.JIIX]).words\n      populatePrompter(words)\n      addAnimationToModifiedWord(words)\n    }\n    smartGuideRef.previousLabelExport = JSON.parse(exports[Constants.Exports.JIIX]).label\n    // This is required by clipboard.js to get the text to be copied.\n    elementsRef.copyElement.setAttribute('data-clipboard-text', JSON.parse(exports[Constants.Exports.JIIX]).label)\n  } else {\n    elementsRef.smartGuideElement.classList.add('smartguide-out')\n    elementsRef.smartGuideElement.classList.remove('smartguide-in')\n  }\n\n  return smartGuideRef\n}\n\nexport function reset (smartGuide) {\n  const elementsRef = smartGuide.elements\n  elementsRef.candidatesElement.innerHTML = ''\n  elementsRef.smartGuideElement.classList.add('smartguide-out')\n  elementsRef.smartGuideElement.classList.remove('smartguide-in')\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Undo/redo context\n * @typedef {Object} UndoRedoContext\n * @property {Array<Model>} stack=[] List of processed models.\n * @property {Number} currentPosition=-1 Current model index into the stack.\n * @property {Number} maxSize Max size of the stack.\n * @property {Boolean} canUndo=false\n * @property {Boolean} canRedo=false\n */\n\n/**\n * Create a new undo/redo context\n * @param {Configuration} configuration Current configuration\n * @return {UndoRedoContext} New undo/redo context\n */\nexport function createUndoRedoContext (configuration) {\n  return {\n    stack: [],\n    currentPosition: -1,\n    maxSize: configuration.undoRedoMaxStackSize,\n    canUndo: false,\n    canRedo: false\n  }\n}\n\n/**\n * Update the undo/redo state\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @return {UndoRedoContext} Updated undo/redo context\n */\nexport function updateUndoRedoState (undoRedoContext) {\n  const undoRedoContextRef = undoRedoContext\n  undoRedoContextRef.canUndo = undoRedoContext.currentPosition > 0\n  undoRedoContextRef.canRedo = undoRedoContext.currentPosition < (undoRedoContext.stack.length - 1)\n  return undoRedoContextRef\n}\n","import * as InkModel from '../model/InkModel'\nimport * as UndoRedoContext from '../model/UndoRedoContext'\nimport { modelLogger as logger } from '../configuration/LoggerConfig'\nimport Constants from '../configuration/Constants'\n\n/**\n * Undo/redo manager\n * @typedef {Object} UndoRedoManager\n * @property {function} updateModel Push the current model into the undo/redo context.\n * @property {function} undo Undo.\n * @property {function} redo Redo.\n * @property {function} clear Clear.\n */\n\n/**\n * Get current model in stack\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context\n * @param {Boolean} [clone=true] Whether or not to clone the model\n * @param {...String} types\n */\nexport function getModel (undoRedoContext, clone = true, ...types) {\n  const model = undoRedoContext.stack[undoRedoContext.currentPosition]\n  const val = {\n    res: clone ? InkModel.cloneModel(model) : model,\n    types\n  }\n  return Promise.resolve(val)\n}\n\n/**\n * Mutate the undoRedo stack by adding a new model to it.\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function updateModel (undoRedoContext, model) {\n  // Used to update the model with the recognition result if relevant\n  const modelIndex = undoRedoContext.stack.findIndex(item => (item.modificationTime === model.modificationTime) && (item.rawStrokes.length === model.rawStrokes.length))\n\n  const modelReference = model\n  modelReference.modificationTime = new Date().getTime()\n\n  const types = []\n  if (modelIndex > -1) {\n    undoRedoContext.stack.splice(modelIndex, 1, InkModel.cloneModel(modelReference))\n    logger.debug('model updated', modelReference)\n  } else {\n    const undoRedoContextReference = undoRedoContext\n    undoRedoContextReference.currentPosition += 1\n    undoRedoContextReference.stack = undoRedoContextReference.stack.slice(0, undoRedoContextReference.currentPosition)\n    undoRedoContextReference.stack.push(InkModel.cloneModel(modelReference))\n    if (undoRedoContextReference.stack.length > undoRedoContextReference.maxSize) {\n      undoRedoContextReference.stack.shift()\n      undoRedoContextReference.currentPosition--\n    }\n    logger.debug('model pushed', modelReference)\n    types.push(Constants.EventType.CHANGED)\n  }\n  UndoRedoContext.updateUndoRedoState(undoRedoContext)\n  logger.debug('undo/redo stack updated', undoRedoContext)\n  return getModel(undoRedoContext, false, ...types)\n}\n\n/**\n * Undo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function undo (undoRedoContext, model) {\n  const undoRedoContextReference = undoRedoContext\n  if (undoRedoContextReference.currentPosition > 0) {\n    undoRedoContextReference.currentPosition -= 1\n    UndoRedoContext.updateUndoRedoState(undoRedoContext)\n    logger.debug('undo index', undoRedoContextReference.currentPosition)\n  }\n  return getModel(undoRedoContext, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED)\n}\n\n/**\n * Redo\n * @param {UndoRedoContext} undoRedoContext Current undo/redo context.\n * @param {Model} model Current model.\n */\nexport function redo (undoRedoContext, model) {\n  const undoRedoContextReference = undoRedoContext\n  if (undoRedoContextReference.currentPosition < undoRedoContextReference.stack.length - 1) {\n    undoRedoContextReference.currentPosition += 1\n    UndoRedoContext.updateUndoRedoState(undoRedoContext)\n    logger.debug('redo index', undoRedoContextReference.currentPosition)\n  }\n  return getModel(undoRedoContext, true, Constants.EventType.CHANGED, Constants.EventType.EXPORTED)\n}\n","import { drawModel } from './CanvasRenderer'\nimport * as InkModel from '../../model/InkModel'\n\nfunction createCanvas (borderCoordinates, margin = 10) {\n  // eslint-disable-next-line no-undef\n  const browserDocument = document\n  const canvas = browserDocument.createElement('canvas')\n  canvas.width = Math.abs(borderCoordinates.maxX - borderCoordinates.minX) + (2 * margin)\n  canvas.style.width = `${canvas.width}px`\n  canvas.height = Math.abs(borderCoordinates.maxY - borderCoordinates.minY) + (2 * margin)\n  canvas.style.height = `${canvas.height}px`\n  return canvas\n}\n\n/**\n * Generate a PNG image data url from the model\n * @param {Model} model Current model\n * @param {Stroker} stroker Current stroker\n * @param {Number} [margin=10] Margins to apply around the image\n * @return {String} Image data string result\n */\nexport function getImage (model, stroker, margin = 10) {\n  if (model.rawStrokes.length > 0) {\n    const borderCoordinates = InkModel.getBorderCoordinates(model)\n\n    const capturingCanvas = createCanvas(borderCoordinates, margin)\n    const renderingCanvas = createCanvas(borderCoordinates, margin)\n    const renderStructure = {\n      renderingCanvas,\n      renderingCanvasContext: renderingCanvas.getContext('2d'),\n      capturingCanvas,\n      capturingCanvasContext: capturingCanvas.getContext('2d')\n    }\n    // Change canvas origin\n    renderStructure.renderingCanvasContext.translate(-borderCoordinates.minX + margin, -borderCoordinates.minY + margin)\n    drawModel(renderStructure, model, stroker)\n    return renderStructure.renderingCanvas.toDataURL('image/png')\n  }\n  return null\n}\n","/* eslint-disable no-undef */\nimport { editorLogger as logger } from '../configuration/LoggerConfig'\nimport * as InkModel from '../model/InkModel'\n\n/**\n * Function to copy past to inject ink during tutorial.\n * @param editorParam\n * @param strokes\n * @param delayBetweenStrokes\n * @param lastOneDelay\n */\nexport function inkImporter (editorParam, strokes, delayBetweenStrokes, lastOneDelay) {\n  const editor = editorParam\n  logger.debug('inkImporter start importing =>', strokes)\n  const origGrabber = Object.assign({}, editor.behavior.grabber)\n  origGrabber.detach = editor.behavior.grabber.detach\n  editor.behavior.grabber = {}\n  const actions = []\n  strokes.forEach((stroke) => {\n    if (stroke.convert) {\n      actions.push({ action: 'convert', value: true })\n    } else if (stroke.setDelay) {\n      actions.push({ action: 'setDelay', value: stroke.setDelay })\n    } else {\n      if (stroke.color) {\n        actions.push({ action: 'setColor', value: stroke.color })\n      }\n      stroke.X.forEach((x, idx) => {\n        let action = 'move'\n        if (idx === 0) {\n          action = 'down'\n        } else if (idx === (stroke.X.length - 1)) {\n          action = 'up'\n        }\n        actions.push({ action, point: { x: stroke.X[idx], y: stroke.Y[idx] } })\n      })\n    }\n  })\n  logger.debug('Array of actions =>', actions)\n  const play = (actionsArray, position, delay) => {\n    if (position < actionsArray.length) {\n      const currentAction = actionsArray[position]\n      let nextDelay = delay\n      if (currentAction.action === 'convert') {\n        editor.convert()\n      } else if (currentAction.action === 'setDelay') {\n        nextDelay = currentAction.value\n      } else if (currentAction.action === 'setColor') {\n        editor.penStyle = {\n          color: currentAction.value\n        }\n      } else {\n        currentAction.point.t = new Date().getTime()\n        if (currentAction.action === 'down') {\n          editor.pointerDown(currentAction.point)\n        } else if (currentAction.action === 'up') {\n          editor.pointerUp(currentAction.point)\n        } else if (currentAction.action === 'move') {\n          editor.pointerMove(currentAction.point)\n        }\n      } if (lastOneDelay && position === actionsArray.map(x => x.action).lastIndexOf('down') - 1) {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay)\n        }, lastOneDelay)\n      } else if (position === actionsArray.length - 1) {\n        const event = new Event('drawEnded')\n        document.dispatchEvent(event)\n        editor.behavior.grabber = origGrabber\n      } else {\n        setTimeout(() => {\n          play(actionsArray, position + 1, nextDelay)\n        }, nextDelay)\n      }\n    }\n  }\n  play(actions, 0, delayBetweenStrokes)\n}\n\nexport function importStrokeGroups (editorParam, strokeGroups) {\n  strokeGroups.forEach((group) => {\n    group.strokes.forEach((strokeFromGroup) => {\n      InkModel.addStroke(editorParam.model, strokeFromGroup)\n      InkModel.addStrokeToGroup(editorParam.model, strokeFromGroup, group.penStyle)\n    })\n  })\n  editorParam.renderer.drawModel(editorParam.rendererContext, editorParam.model, editorParam.stroker)\n}\n","/**\n * @typedef {Object} DestructuredPromise\n * @property {Promise} promise\n * @property {function} resolve\n * @property {function} reject\n */\n\n/**\n * destructurePromise\n * @returns {{resolve: *, reject: *, promise: Promise<unknown>}}\n */\nexport function destructurePromise () {\n  let resolveParam\n  let rejectParam\n  const initPromise = new Promise(\n    (resolve, reject) => {\n      resolveParam = resolve\n      rejectParam = reject\n    })\n  return { promise: initPromise, resolve: resolveParam, reject: rejectParam }\n}\n\n/**\n * @param time\n * @return {{timer: *, promise: Promise}}\n */\nexport function delay (time) {\n  let timer = null\n  const promise = new Promise((resolve) => {\n    timer = setTimeout(resolve, time)\n  })\n  return {\n    promise,\n    timer\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport style from './iink.css'\nimport { editorLogger as logger } from './configuration/LoggerConfig'\nimport * as DefaultBehaviors from './configuration/DefaultBehaviors'\nimport * as DefaultConfiguration from './configuration/DefaultConfiguration'\nimport * as DefaultStyles from './configuration/DefaultPenStyle'\nimport * as DefaultTheme from './configuration/DefaultTheme'\nimport * as InkModel from './model/InkModel'\nimport * as UndoRedoContext from './model/UndoRedoContext'\nimport * as UndoRedoManager from './model/UndoRedoManager'\nimport * as ImageRenderer from './renderer/canvas/ImageRenderer'\nimport * as RecognizerContext from './model/RecognizerContext'\nimport * as SmartGuide from './smartguide/SmartGuide'\nimport Constants from './configuration/Constants'\nimport * as eastereggs from './eastereggs/InkImporter'\nimport {\n  handleError,\n  handleSuccess,\n  emitEvents,\n  manageRecognizedModel\n} from './recognizer/RecognizerService'\nimport * as PromiseHelper from './util/PromiseHelper'\n\n/**\n * Check if a clear is required, and does it if it is\n * @param {Editor} editor\n * @param {Model} model Current model\n * @return {Promise<*>}\n */\nfunction manageResetState (editor, model) {\n  // If strokes moved in the undo redo stack then a clear is mandatory before sending strokes.\n  if (editor.recognizer.reset && !editor.isErasing && RecognizerContext.isResetRequired(editor.recognizerContext, model)) {\n    return editor.recognizer.reset(editor.recognizerContext, model)\n  }\n  return null\n}\n\n/**\n * Check if the trigger in parameter is valid.\n * @param {Editor} editor\n * @param {String} type\n * @param {String} [trigger]\n * @return {Boolean}\n */\nfunction isTriggerValid (editor, type, trigger = editor.configuration.triggers[type]) {\n  if (editor.recognizer &&\n    editor.recognizer.getInfo().availableTriggers[type].includes(trigger)) {\n    return true\n  }\n  logger.error(`${trigger} is not a valid trigger for ${type}`)\n  return false\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [trigger]\n * @return {Promise}\n */\nasync function addStrokes (editor, model, trigger = editor.configuration.triggers.addStrokes) {\n  if (editor.recognizer && editor.recognizer.addStrokes) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      // Firing addStrokes only if recognizer is configure to do it\n      if (isTriggerValid(editor, 'addStrokes', trigger)) {\n        const res = await manageResetState(editor, model)\n        if (res) {\n          return editor.recognizer.addStrokes(editor.recognizerContext, res)\n        }\n        return editor.recognizer.addStrokes(editor.recognizerContext, model)\n      }\n    }\n  }\n  return Promise.reject(new Error('Cannot addStrokes'))\n}\n\n/**\n * Launch ink import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {PointerEvents} events\n * @return {Promise<*>}\n */\nasync function launchPointerEvents (editor, model, events) {\n  if (editor.recognizer && editor.recognizer.pointerEvents) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.pointerEvents(editor.recognizerContext, model, events)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch pointerEvents'))\n}\n\n/**\n * Launch the recognition with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} [requestedMimeTypes]\n * @param {String} [trigger]\n */\nexport async function launchExport (editor, model, requestedMimeTypes, trigger = editor.configuration.triggers.exportContent) {\n  if (editor.recognizer && editor.recognizer.export_) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      if (isTriggerValid(editor, 'exportContent', trigger)) {\n        const editorRef = editor\n        window.clearTimeout(editor.exportTimer)\n        const timeout = trigger === Constants.Trigger.QUIET_PERIOD ? editor.configuration.triggerDelay : 0\n        const delayer = PromiseHelper.delay(timeout)\n        editorRef.exportTimer = delayer.timer\n        await delayer.promise\n        const res = await manageResetState(editor, model)\n        if (res) {\n          return editor.recognizer.export_(editor.recognizerContext, res, requestedMimeTypes)\n        }\n        return editor.recognizer.export_(editor.recognizerContext, model, requestedMimeTypes)\n      }\n    }\n  }\n  return Promise.reject(new Error('Cannot launch export'))\n}\n\n/**\n * Launch the import.\n * @param {Editor} editor\n * @param {Model} model\n * @param {Blob} data\n * @return {Promise<*>}\n */\nasync function launchImport (editor, model, data) {\n  if (editor.recognizer && editor.recognizer.import_) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.import_(editor.recognizerContext, model, data)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch import'))\n}\n\n/**\n * Get the supported mimetypes for import.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchGetSupportedImportMimeTypes (editor, model) {\n  if (editor.recognizer && editor.recognizer.getSupportedImportMimeTypes) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.getSupportedImportMimeTypes(editor.recognizerContext, model)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch getSupportedImportMimeTypes'))\n}\n\n/**\n * Launch the convert with all editor relative configuration and state.\n * @param {Editor} editor\n * @param {Model} model\n * @param {String} conversionState\n * @return {Promise<*>}\n */\nasync function launchConvert (editor, model, conversionState) {\n  if (editor.recognizer && editor.recognizer.convert) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.convert(editor.recognizerContext, model, conversionState)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch convert'))\n}\n\n/**\n * Launch the configuration for the editor\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchConfig (editor, model) {\n  if (editor.recognizer && editor.recognizer.sendConfiguration) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.sendConfiguration(editor.recognizerContext, model)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch config'))\n}\n\n/**\n * Launch the resize.\n * @param {Editor} editor\n * @param {Model} model\n */\nasync function launchResize (editor, model) {\n  if (editor.recognizer && editor.recognizer.resize) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      const editorRef = editor\n      window.clearTimeout(editor.resizeTimer)\n      const delayer = PromiseHelper.delay(editor.configuration.resizeTriggerDelay)\n      editorRef.resizeTimer = delayer.timer\n      SmartGuide.resize(editor.smartGuide)\n      await delayer.promise\n      return editor.recognizer.resize(editor.recognizerContext, model, editor.domElement)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch resize'))\n}\n\n/**\n * Launch wait for idle\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchWaitForIdle (editor, model) {\n  if (editor.recognizer && editor.recognizer.waitForIdle) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.waitForIdle(editor.recognizerContext, model)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch wait for idle'))\n}\n\n/**\n * Launch websocket close\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function launchClose (editor, model) {\n  if (editor.recognizer && editor.recognizer.close) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.close(editor.recognizerContext, model)\n    }\n  }\n  return Promise.reject(new Error('Cannot launch close'))\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setPenStyle (editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyle) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.setPenStyle(editor.recognizerContext, model, editor.penStyle)\n    }\n    return Promise.reject(new Error('Cannot set pentStyle'))\n  }\n  return null\n}\n\n/**\n * Set pen style.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setPenStyleClasses (editor, model) {\n  if (editor.recognizer && editor.recognizer.setPenStyleClasses) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.setPenStyleClasses(editor.recognizerContext, model, editor.penStyleClasses)\n    }\n    return Promise.reject(new Error('Cannot set penStyleClasses'))\n  }\n  return null\n}\n\n/**\n * Set theme.\n * @param {Editor} editor\n * @param {Model} model\n * @return {Promise<*>}\n */\nasync function setTheme (editor, model) {\n  if (editor.recognizer && editor.recognizer.setTheme) {\n    const init = await editor.recognizerContext.initPromise\n    if (init) {\n      return editor.recognizer.setTheme(editor.recognizerContext, model, editor.theme)\n    }\n    return Promise.reject(new Error('Cannot set theme'))\n  }\n  return null\n}\n\n/**\n * Editor\n */\nexport class Editor {\n  /**\n   * @param {Element} element DOM element to attach this editor\n   * @param {Configuration} [configuration] Configuration to apply\n   * @param {Theme} [theme] Custom theme to apply\n   * @param {PenStyle} [penStyle] Custom style to apply\n   * @param {Behaviors} [behaviors] Custom behaviors to apply\n   */\n  constructor (element, configuration, penStyle, theme, behaviors, globalClassCss) {\n    globalClassCss = globalClassCss || 'ms-editor'\n\n    const styleElement = document.createElement('style')\n    styleElement.appendChild(document.createTextNode(''))\n    element.appendChild(styleElement)\n\n    const sheet = styleElement.sheet\n    styleElement.textContent = style\n\n    this.sheet = sheet\n    /**\n     * Inner reference to the DOM Element\n     * @type {Element}\n     */\n    this.domElement = element\n    this.domElement.classList.add(globalClassCss)\n\n    // eslint-disable-next-line no-undef\n    this.loader = document.createElement('div')\n    this.loader.classList.add('loader')\n    this.loader = this.domElement.appendChild(this.loader)\n\n    // eslint-disable-next-line no-undef\n    this.error = document.createElement('div')\n    this.error.classList.add('error-msg')\n    this.error = this.domElement.appendChild(this.error)\n\n    /**\n     * Launch export timer\n     * @type {Number}\n     */\n    this.exportTimer = undefined\n\n    /**\n     * Launch resize timer\n     * @type {Number}\n     */\n    this.resizeTimer = undefined\n\n    /**\n     * Notify delay timer\n     * @type {Number}\n     */\n    this.notifyTimer = undefined\n\n    /**\n     * @private\n     * @type {Behaviors}\n     */\n    this.innerBehaviors = DefaultBehaviors.overrideDefaultBehaviors(behaviors)\n    this.configuration = configuration\n\n    /**\n     * Pen color used only for pending stroke\n     * @type {string}\n     */\n    this.localTheme = ''\n\n    this.theme = theme\n    this.penStyle = penStyle\n    this.penStyleClasses = ''\n\n    // To override pointerType when ERASER\n    this.isErasing = false\n\n    this.domElement.editor = this\n  }\n\n  /**\n   * Set the recognition parameters\n   * WARNING : Need to fire a clear if user have already input some strokes.\n   * @param {Configuration} configuration\n   */\n  set configuration (configuration) {\n    this.loader.style.display = 'initial'\n    this.error.style.display = 'none'\n    /**\n     * @private\n     * @type {Configuration}\n     */\n    this.innerConfiguration = DefaultConfiguration.overrideDefaultConfiguration(configuration)\n    this.behavior = this.behaviors.getBehaviorFromConfiguration(this.behaviors, this.innerConfiguration)\n    if (this.smartGuide) {\n      SmartGuide.reset(this.smartGuide)\n    } else {\n      this.smartGuide = SmartGuide.createSmartGuide(this)\n    }\n  }\n\n  /**\n   * Get the current recognition parameters\n   * @return {Configuration}\n   */\n  get configuration () {\n    return this.innerConfiguration\n  }\n\n  /**\n   * Set the pen style\n   * @param {PenStyle} penStyle\n   */\n  set penStyle (penStyle) {\n    /**\n     * @private\n     * @type {PenStyle}\n     */\n    this.innerPenStyle = DefaultStyles.overrideDefaultPenStyle(penStyle)\n    this.localPenStyle = this.innerPenStyle\n    setPenStyle(this, this.model)\n  }\n\n  /**\n   * Get the pen style\n   * @return {PenStyle}\n   */\n  get penStyle () {\n    return this.innerPenStyle\n  }\n\n  /**\n   * Set the pen style\n   * @param {String} penStyleClasses\n   */\n  set penStyleClasses (penStyleClasses) {\n    /**\n     * @private\n     * @type {String}\n     */\n    this.innerPenStyleClasses = penStyleClasses\n    this.localPenStyle = this.theme[`.${this.innerPenStyleClasses}`]\n    setPenStyleClasses(this, this.model)\n  }\n\n  /**\n   * Get the pen style\n   * @return {String}\n   */\n  get penStyleClasses () {\n    return this.innerPenStyleClasses\n  }\n\n  /**\n   * Set the theme\n   * @param {Theme} theme\n   */\n  set theme (theme) {\n    /**\n     * @private\n     * @type {Theme}\n     */\n    this.innerTheme = DefaultTheme.overrideDefaultTheme(theme)\n    setTheme(this, this.model)\n  }\n\n  /**\n   * Get the theme\n   * @return {Theme}\n   */\n  get theme () {\n    return this.innerTheme\n  }\n\n  /**\n   * Get behaviors\n   * @return {Behaviors}\n   */\n  get behaviors () {\n    return this.innerBehaviors\n  }\n\n  /**\n   * @private\n   * @param {Behavior} behavior\n   */\n  set behavior (behavior) {\n    if (behavior) {\n      if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n        this.grabber.detach(this.domElement, this.grabberContext)\n      }\n      /**\n       * @private\n       * @type {Behavior}\n       */\n      this.innerBehavior = behavior\n      this.renderer = this.innerBehavior.renderer\n      this.recognizer = this.innerBehavior.recognizer\n      /**\n       * Current grabber context\n       * @type {GrabberContext}\n       */\n      this.grabberContext = this.grabber.attach(this.domElement, this)\n    }\n  }\n\n  /**\n   * Get current behavior\n   * @return {Behavior}\n   */\n  get behavior () {\n    return this.innerBehavior\n  }\n\n  /**\n   * Set the current recognizer\n   * @private\n   * @param {Recognizer} recognizer\n   */\n  set recognizer (recognizer) {\n    this.undoRedoContext = UndoRedoContext.createUndoRedoContext(this.configuration)\n    this.undoRedoManager = UndoRedoManager\n\n    const initialize = (model, shouldSendTheme) => {\n      /**\n       * @private\n       * @type {Recognizer}\n       */\n      this.innerRecognizer = recognizer\n      if (this.innerRecognizer) {\n        /**\n         * Current recognition context\n         * @type {RecognizerContext}\n         */\n        this.recognizerContext = RecognizerContext.createEmptyRecognizerContext(this)\n        // FIXME: merge undo/redo manager with default recognizer\n        if (this.innerRecognizer.undo && this.innerRecognizer.redo && this.innerRecognizer.clear) {\n          this.undoRedoContext = this.recognizerContext\n          this.undoRedoManager = this.innerRecognizer\n        }\n\n        this.innerRecognizer.init(this.recognizerContext, model)\n          .then((values) => {\n            logger.info('Recognizer initialized !')\n            if (shouldSendTheme) {\n              setTheme(this, this.model)\n              setPenStyle(this, this.model)\n              setPenStyleClasses(this, this.model)\n            }\n            this.loader.style.display = 'none'\n          })\n          .catch(err => handleError(this, err))\n      }\n    }\n\n    if (recognizer) {\n      if (this.innerRecognizer) {\n        this.innerRecognizer.close(this.recognizerContext, this.model)\n          .then((model) => {\n            logger.info('Recognizer closed')\n            handleSuccess(this, model)\n            initialize(InkModel.clearModel(model), true)\n          })\n          .catch(err => handleError(this, err))\n      } else {\n        /**\n         * Current model\n         * @type {Model}\n         */\n        this.model = InkModel.createModel(this.configuration)\n\n        // INFO: Recognizer needs model to be initialized\n        initialize(this.model, false)\n      }\n    }\n  }\n\n  /**\n   * Get current recognizer\n   * @return {Recognizer}\n   */\n  get recognizer () {\n    return this.innerRecognizer\n  }\n\n  /**\n   * Set the current renderer\n   * @private\n   * @param {Renderer} renderer\n   */\n  set renderer (renderer) {\n    if (renderer) {\n      if (this.innerRenderer) {\n        this.innerRenderer.detach(this.domElement, this.rendererContext)\n      }\n\n      /**\n       * @private\n       * @type {Renderer}\n       */\n      this.innerRenderer = renderer\n      if (this.innerRenderer) {\n        /**\n         * Current rendering context\n         * @type {Object}\n         */\n        this.rendererContext = this.innerRenderer.attach(this.domElement, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth)\n      }\n    }\n  }\n\n  /**\n   * Get current renderer\n   * @return {Renderer}\n   */\n  get renderer () {\n    return this.innerRenderer\n  }\n\n  /**\n   * Get current grabber\n   * @return {Grabber}\n   */\n  get grabber () {\n    return this.behavior ? this.behavior.grabber : undefined\n  }\n\n  /**\n   * Get current stroker\n   * @return {Stroker}\n   */\n  get stroker () {\n    return this.behavior ? this.behavior.stroker : undefined\n  }\n\n  /**\n   * Get current events\n   * @return {Array}\n   */\n  get emit () {\n    return this.behavior ? this.behavior.events : undefined\n  }\n\n  /**\n   * Get a PNG image data url from the data model\n   * @return {String}\n   */\n  get png () {\n    return ImageRenderer.getImage(this.model, this.stroker)\n  }\n\n  /**\n   * True if initialized, false otherwise\n   * @return {Boolean}\n   */\n  get initialized () {\n    return this.recognizerContext ? this.recognizerContext.initialized : false\n  }\n\n  enableEraser () {\n    this.isErasing = true\n    this.domElement.classList.add('erasing')\n  }\n\n  disableEraser () {\n    document.body.style.cursor = 'initial'\n    this.isErasing = false\n    this.domElement.classList.remove('erasing')\n  }\n\n  /**\n   * Handle a pointer down\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   * @param {String} [pointerType=mouse] Current pointer type\n   * @param {String} [pointerId] Current pointer id\n   */\n  pointerDown (point, pointerType = 'pen', pointerId) {\n    logger.trace('Pointer down', point)\n    window.clearTimeout(this.notifyTimer)\n    window.clearTimeout(this.exportTimer)\n    this.model = InkModel.initPendingStroke(this.model, point, Object.assign({ pointerType, pointerId }, this.theme.ink, this.localPenStyle))\n    if (!this.isErasing) {\n      this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker)\n    }\n    // Currently no recognition on pointer down\n  }\n\n  /**\n   * Handle a pointer move\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerMove (point) {\n    logger.trace('Pointer move', point)\n    this.model = InkModel.appendToPendingStroke(this.model, point)\n    if (!this.isErasing) {\n      this.renderer.drawCurrentStroke(this.rendererContext, this.model, this.stroker)\n    }\n    // Currently no recognition on pointer move\n  }\n\n  /**\n   * Handle a pointer up\n   * @param {{x: Number, y: Number, t: Number}} point Captured point coordinates\n   */\n  pointerUp (point) {\n    logger.trace('Pointer up', point)\n    this.model = InkModel.endPendingStroke(this.model, point, this.penStyle)\n    if (!this.isErasing) {\n      this.renderer.drawModel(this.rendererContext, this.model, this.stroker)\n    }\n\n    if (this.recognizer.addStrokes) {\n      addStrokes(this, this.model)\n    } else {\n      // Push model in undo redo manager\n      handleSuccess(this, this.model)\n    }\n  }\n\n  removeStroke (stroke) {\n    this.model.strokeGroups.forEach((group) => {\n      const stringStrokes = group.strokes.map(strokeFromGroup => JSON.stringify(strokeFromGroup))\n      const strokeIndex = stringStrokes.indexOf(JSON.stringify(stroke))\n      if (strokeIndex !== -1) {\n        group.strokes.splice(strokeIndex, 1)\n      }\n    })\n    const stringRawStrokes = this.model.rawStrokes.map(strokes => JSON.stringify(strokes))\n    const strokeIndex = stringRawStrokes.indexOf(JSON.stringify(stroke))\n    if (strokeIndex !== -1) {\n      this.model.rawStrokes.splice(strokeIndex, 1)\n    }\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker)\n    handleSuccess(this, this.model)\n    if (!(this.configuration.triggers.exportContent === 'DEMAND')) {\n      launchExport(this, this.model)\n    }\n  }\n\n  /**\n   * @Deprecated\n   * @param rawStrokes\n   * @param strokeGroups\n   */\n  reDraw (rawStrokes, strokeGroups) {\n    rawStrokes.forEach((stroke) => {\n      InkModel.addStroke(this.model, stroke)\n    })\n    strokeGroups.forEach((group) => {\n      group.strokes.forEach((strokeFromGroup) => {\n        InkModel.addStrokeToGroup(this.model, strokeFromGroup, group.penStyle)\n      })\n    })\n    this.renderer.drawModel(this.rendererContext, this.model, this.stroker)\n    handleSuccess(this, this.model)\n  }\n\n  /**\n   * True if idle state\n   * @return {Boolean}\n   */\n  get idle () {\n    return this.recognizerContext.idle\n  }\n\n  /**\n   * Wait for idle state.\n   * @return {Promise<*>}\n   */\n  waitForIdle () {\n    emitEvents(this, undefined, Constants.EventType.IDLE)\n    return launchWaitForIdle(this, this.model)\n  }\n\n  /**\n   * True if can undo, false otherwise.\n   * @return {Boolean}\n   */\n  get canUndo () {\n    return this.undoRedoContext.canUndo\n  }\n\n  /**\n   * Undo the last action.\n   * @return {Promise<*>}\n   */\n  async undo () {\n    logger.debug('Undo current model', this.model)\n    emitEvents(this, undefined, Constants.EventType.UNDO)\n    const { res, types } = await this.undoRedoManager.undo(this.undoRedoContext, this.model)\n      .catch(err => handleError(this, err))\n    manageRecognizedModel(this, res, ...types)\n    return res\n  }\n\n  /**\n   * True if can redo, false otherwise.\n   * @return {Boolean}\n   */\n  get canRedo () {\n    return this.undoRedoContext.canRedo\n  }\n\n  /**\n   * Redo the last action.\n   * @return {Promise<*>}\n   */\n  async redo () {\n    logger.debug('Redo current model', this.model)\n    emitEvents(this, undefined, Constants.EventType.REDO)\n    const { res, types } = await this.undoRedoManager.redo(this.undoRedoContext, this.model)\n      .catch(err => handleError(this, err))\n    manageRecognizedModel(this, res, ...types)\n    return res\n  }\n\n  /**\n   * True if empty, false otherwise\n   * @return {boolean}\n   */\n  get isEmpty () {\n    return this.recognizerContext.isEmpty\n  }\n\n  /**\n   * True if can clear, false otherwise.\n   * @return {Boolean}\n   */\n  get canClear () {\n    return !this.isEmpty\n  }\n\n  /**\n   * Clear the output and the recognition result.\n   * @return {Promise<*>}\n   */\n  async clear () {\n    if (this.canClear) {\n      logger.debug('Clear current model', this.model)\n      emitEvents(this, undefined, Constants.EventType.CLEAR)\n      const { res, events } = await this.recognizer.clear(this.recognizerContext, this.model)\n        .catch(error => handleError(this, error))\n      handleSuccess(this, res, ...events)\n      return res\n    }\n    return Promise.reject(new Error('Cannot launch clear'))\n  }\n\n  /**\n   * True if can convert, false otherwise.\n   * @return {Boolean}\n   */\n  get canConvert () {\n    return !!(this.canUndo && this.canClear && this.recognizer && this.recognizer.convert)\n  }\n\n  /**\n   * Convert the current content\n   * @param {string} conversionState\n   * @return {Promise<*>}\n   */\n  convert (conversionState = 'DIGITAL_EDIT') {\n    if (this.canConvert) {\n      emitEvents(this, undefined, Constants.EventType.CONVERT)\n      return launchConvert(this, this.model, conversionState)\n    }\n    return Promise.reject(new Error('Cannot launch convert'))\n  }\n\n  /**\n   * Set the guides for text\n   * @param {Boolean} [enable]\n   * @return {Promise<*|null>}\n   */\n  setGuides (enable = true) {\n    this.configuration.recognitionParams.iink.text.guides.enable = enable\n    return launchConfig(this, this.model)\n  }\n\n  /**\n   * Return the position of the cursor identifying the current state in the internal iink undo/redo stack.\n   * @returns {Number}\n   */\n  get possibleUndoCount () {\n    return this.recognizerContext.possibleUndoCount\n  }\n\n  /**\n   * The number of operations that it is currently possible to undo.\n   * @returns {Number}\n   */\n  get undoStackIndex () {\n    return this.recognizerContext.undoStackIndex\n  }\n\n  /**\n   * True if can export, false otherwise.\n   * @return {Boolean}\n   */\n  get canExport () {\n    return this.canUndo && this.canClear && this.recognizer && this.recognizer.getInfo().availableTriggers.exportContent.includes(Constants.Trigger.DEMAND)\n  }\n\n  /**\n   * Explicitly ask to perform an export. You have to listen to events to get the content as this function is non blocking and does not have a return type.\n   * @param {Array<String>} requestedMimeTypes Requested mime-types. Be sure to ask all the types required by the listeners of exported event.\n   */\n  export_ (requestedMimeTypes) {\n    if (this.canExport) {\n      emitEvents(this, undefined, Constants.EventType.EXPORT)\n      return launchExport(this, this.model, requestedMimeTypes, Constants.Trigger.DEMAND)\n    }\n    return Promise.reject(new Error('Cannot launch export'))\n  }\n\n  /**\n   * Import content.\n   * @param {Blob|*} data Data to import\n   * @param {String} [mimetype] Mimetype of the data, needed if data is not a Blob\n   */\n  import_ (data, mimetype) {\n    emitEvents(this, undefined, Constants.EventType.IMPORT)\n    return launchImport(this, this.model, !(data instanceof Blob) ? new Blob([data], { type: mimetype }) : data)\n  }\n\n  /**\n   * Get supported import mime types\n   * @return {Promise<*|null>}\n   */\n  getSupportedImportMimeTypes () {\n    return launchGetSupportedImportMimeTypes(this, this.model)\n  }\n\n  /**\n   * pointer events\n   * @param {PointerEvents} events\n   * @return {Promise<*|null>}\n   */\n  pointerEvents (events) {\n    return launchPointerEvents(this, this.model, events)\n  }\n\n  /**\n   * Get current state exports\n   * @return {Object}\n   */\n  get exports () {\n    return this.model ? this.model.exports : undefined\n  }\n\n  get supportedImportMimeTypes () {\n    return this.recognizerContext.supportedImportMimeTypes\n  }\n\n  /**\n   * Function to call when the dom element link to the current ink paper has been resize.\n   */\n  resize () {\n    logger.debug('Resizing editor')\n    this.renderer.resize(this.rendererContext, this.model, this.stroker, this.configuration.renderingParams.minHeight, this.configuration.renderingParams.minWidth)\n    return launchResize(this, this.model)\n  }\n\n  /**\n   * Detach event listeners from the DOM element created at editor creation.\n   */\n  unload () {\n    if (this.grabber) { // Remove event handlers to avoid multiplication (detach grabber)\n      this.grabber.detach(this.domElement, this.grabberContext)\n    }\n    if (this.innerRenderer) {\n      this.innerRenderer.detach(this.domElement, this.rendererContext)\n    }\n  }\n\n  /**\n   * Close websocket connection\n   * @return {Promise<*>}\n   */\n  close () {\n    if (this.configuration.recognitionParams.protocol === Constants.Protocol.WEBSOCKET) {\n      return launchClose(this, this.model)\n    }\n    return null\n  }\n\n  /**\n   * Trigger the change callbacks (and by default send a change event).\n   */\n  forceChange () {\n    emitEvents(this, undefined, Constants.EventType.CHANGED)\n  }\n\n  /* eslint-disable class-methods-use-this */\n  /**\n   * Get access to some easter egg features link ink injection. Use at your own risk (less tested and may be removed without notice).\n   */\n  get eastereggs () {\n    return eastereggs\n  }\n  /* eslint-enable class-methods-use-this */\n}\n","import { editorLogger as logger } from './LoggerConfig'\nimport * as PointerEventGrabber from '../grabber/PointerEventGrabber'\nimport * as CanvasRenderer from '../renderer/canvas/CanvasRenderer'\nimport * as QuadraticCanvasStroker from '../renderer/canvas/stroker/QuadraticCanvasStroker'\nimport * as SVGRenderer from '../renderer/svg/SVGRenderer'\nimport * as QuadraticSVGStroker from '../renderer/svg/stroker/QuadraticSVGStroker'\nimport * as iinkRestRecognizer from '../recognizer/rest/iinkRestRecognizer'\nimport * as iinkWsRecognizer from '../recognizer/websocket/iinkWsRecognizer'\nimport emit from '../event/Event'\n\n/**\n * Current behavior\n * @typedef {Object} Behavior\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Stroker} stroker Stroker to draw stroke\n * @property {Renderer} renderer Renderer to draw on the editor\n * @property {Recognizer} recognizer Recognizer to call the recognition service\n * @property {Array} events Functions to handle model changes\n */\n\n/**\n * Set of behaviors to be used by the {@link Editor}\n * @typedef {Object} Behaviors\n * @property {Grabber} grabber Grabber to capture strokes\n * @property {Array<Stroker>} strokerList List of stroker to draw stroke\n * @property {Array<Renderer>} rendererList List of renderer to draw on the editor\n * @property {Array<Recognizer>} recognizerList Recognizers to call the recognition service\n * @property {function} getBehaviorFromConfiguration Get the current behavior to use regarding the current configuration\n * @property {Array} events Functions to handle model changes\n */\n\n/**\n * Default behaviors\n * @type {Behaviors}\n */\nexport const defaultBehaviors = {\n  grabber: PointerEventGrabber,\n  strokerList: [QuadraticCanvasStroker, QuadraticSVGStroker],\n  rendererList: [CanvasRenderer, SVGRenderer],\n  recognizerList: [iinkRestRecognizer, iinkWsRecognizer],\n  events: emit,\n  getBehaviorFromConfiguration: (behaviors, configuration) => {\n    const behavior = {}\n    behavior.grabber = behaviors.grabber\n    if (configuration) {\n      if (configuration.recognitionParams.protocol === 'REST') {\n        behavior.stroker = QuadraticCanvasStroker\n        behavior.renderer = CanvasRenderer\n        behavior.recognizer = iinkRestRecognizer\n      } else {\n        behavior.stroker = QuadraticSVGStroker\n        behavior.renderer = SVGRenderer\n        behavior.recognizer = iinkWsRecognizer\n      }\n    }\n    behavior.events = behaviors.events\n    return behavior\n  }\n}\n\n/**\n * Generate behaviors\n * @param {Behaviors} behaviors Behaviors to be used\n * @return {Behaviors} Overridden behaviors\n */\nexport function overrideDefaultBehaviors (behaviors) {\n  if (behaviors) {\n    const currentBehaviors = {\n      grabber: behaviors.grabber || defaultBehaviors.grabber,\n      rendererList: behaviors.rendererList || defaultBehaviors.rendererList,\n      strokerList: behaviors.strokerList || defaultBehaviors.strokerList,\n      recognizerList: behaviors.recognizerList || defaultBehaviors.recognizerList,\n      events: behaviors.events || defaultBehaviors.events,\n      getBehaviorFromConfiguration: behaviors.getBehaviorFromConfiguration || defaultBehaviors.getBehaviorFromConfiguration\n    }\n    logger.debug('Override default behaviors', currentBehaviors)\n    return currentBehaviors\n  }\n  return defaultBehaviors\n}\n\nexport default defaultBehaviors\n","import Constants from '../configuration/Constants'\nimport { recognizerLogger as logger } from '../configuration/LoggerConfig'\nimport * as InkModel from '../model/InkModel'\nimport * as SmartGuide from '../smartguide/SmartGuide'\nimport * as RecognizerContext from '../model/RecognizerContext'\nimport { launchExport } from '../Editor'\n\n/**\n * Emit events\n * @param {Editor} editor\n * @param {Object} data\n * @param {...String} types\n * @return {Model}\n */\nexport function emitEvents (editor, data, ...types) {\n  const editorRef = editor\n  types.forEach((type) => {\n    switch (type) {\n      case Constants.EventType.RENDERED:\n        break // Internal use only\n      case Constants.EventType.UNDO:\n      case Constants.EventType.REDO:\n      case Constants.EventType.CLEAR:\n      case Constants.EventType.CONVERT:\n      case Constants.EventType.EXPORT:\n        editor.emit.call(editor.domElement, type)\n        break\n      case Constants.EventType.LOADED:\n      case Constants.EventType.CHANGED:\n        editor.emit.call(editor.domElement, type, {\n          initialized: editor.initialized,\n          canUndo: editor.canUndo,\n          canRedo: editor.canRedo,\n          canClear: editor.canClear,\n          isEmpty: editor.isEmpty,\n          possibleUndoCount: editor.possibleUndoCount,\n          undoStackIndex: editor.undoStackIndex,\n          canConvert: editor.canConvert,\n          canExport: editor.canExport\n        })\n        break\n      case Constants.EventType.EXPORTED:\n        window.clearTimeout(editorRef.notifyTimer)\n        editorRef.notifyTimer = window.setTimeout(() => {\n          editor.emit.call(editor.domElement, type, {\n            exports: editor.exports\n          })\n        }, editorRef.configuration.processDelay)\n        break\n      case Constants.EventType.SUPPORTED_IMPORT_MIMETYPES:\n        editor.emit.call(editor.domElement, type, {\n          mimeTypes: editor.supportedImportMimeTypes\n        })\n        break\n      case Constants.EventType.ERROR:\n        editor.emit.call(editor.domElement, type, data)\n        break\n      case Constants.EventType.IDLE:\n        editor.emit.call(editor.domElement, type, {\n          idle: editor.idle\n        })\n        break\n      default:\n        logger.debug(`No valid trigger configured for ${type}`)\n        break\n    }\n  })\n}\n\n/**\n * Manage recognized model\n * @param {Editor} editor\n * @param {Model} model\n * @param {...String} types\n */\nexport function manageRecognizedModel (editor, model, ...types) {\n  const editorRef = editor\n  const modelRef = model\n  logger.debug(`model changed callback on ${types} event(s)`, model)\n  if (modelRef.creationTime === editor.model.creationTime) {\n    // Merge recognized model if relevant and return current editor model\n    if ((modelRef.rawStrokes.length === editor.model.rawStrokes.length) &&\n      (modelRef.lastPositions.lastSentPosition >= editor.model.lastPositions.lastReceivedPosition)) {\n      editorRef.model = InkModel.mergeModels(editorRef.model, modelRef)\n      if (InkModel.needRedraw(editorRef.model) || types.includes(Constants.EventType.RENDERED)) {\n        editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker)\n      }\n    } else {\n      editorRef.model = modelRef\n      editor.renderer.drawModel(editor.rendererContext, editorRef.model, editor.stroker)\n    }\n    emitEvents(editor, undefined, ...types)\n  }\n\n  if (editor.configuration.recognitionParams.type === 'TEXT' &&\n    editor.configuration.recognitionParams.protocol !== 'REST' &&\n    editor.configuration.recognitionParams.iink.text.mimeTypes.includes(Constants.Exports.JIIX) &&\n    editor.configuration.recognitionParams.iink.text.smartGuide) {\n    // eslint-disable-next-line no-use-before-define\n    editorRef.smartGuide = SmartGuide.launchSmartGuide(editor.smartGuide, modelRef.exports)\n  }\n\n  if ((InkModel.extractPendingStrokes(model).length > 0) &&\n    (!editor.recognizer.addStrokes) && // FIXME: Ugly hack to avoid double export (addStrokes + export)\n    (editor.configuration.triggers.exportContent !== Constants.Trigger.DEMAND)) {\n    launchExport(editor, model)\n  }\n}\n\n/**\n * Method called when server respond with an error\n * Use in catch on Promises\n * @param {Editor} editor\n * @param {Object} err\n * @param {...String} events\n */\nexport function handleError (editor, err, ...events) {\n  const editorRef = editor\n  if (err.type !== 'close') {\n    logger.error('Error while firing the recognition', err.stack || err) // Handle any error from all above steps\n  }\n  if (\n    // IInk error managment before refactor\n    (err.message === 'Invalid application key.') || (err.message === 'Invalid HMAC') ||\n    // CDK error managment\n    (err.error &&\n      err.error.result &&\n      err.error.result.error &&\n      (err.error.result.error === 'InvalidApplicationKeyException' || err.error.result.error === 'InvalidHMACSignatureException')) ||\n    // IInk error managment after refactor\n    (err.code && err.code === 'access.not.granted')) {\n    editorRef.error.innerText = Constants.Error.WRONG_CREDENTIALS\n  } else if (err.code && err.code === 'no.activity') {\n    editorRef.error.innerText = Constants.Error.NO_ACTIVITY\n  } else if (err.message === 'Session is too old. Max Session Duration Reached.' ||\n    (err.code && err.code === 'session.too.old')) {\n    editorRef.error.innerText = Constants.Error.TOO_OLD\n  } else if ((err.code === 1006 || err.code === 1000) && editorRef.error.style.display === 'none') {\n    editorRef.error.innerText = Constants.Error.NOT_REACHABLE\n  }\n  if ((editorRef.error.innerText === Constants.Error.TOO_OLD || err.reason === 'CLOSE_RECOGNIZER') && RecognizerContext.canReconnect(editor.recognizerContext)) {\n    logger.info('Reconnection is available', err.stack || err)\n    editorRef.error.style.display = 'none'\n  } else {\n    editorRef.loader.style.display = 'none'\n    editorRef.error.style.display = 'initial'\n    emitEvents(editor, err, Constants.EventType.ERROR, ...events)\n  }\n}\n\n/**\n * Method called when server respond correctly to request or WS\n * Use in then on Promises\n * @param {Editor} editor\n * @param {Object} model\n * @param {...String} events\n */\nexport function handleSuccess (editor, model, ...events) {\n  const editorRef = editor\n  if (editor.undoRedoManager.updateModel) {\n    editor.undoRedoManager.updateModel(editor.undoRedoContext, model)\n      .then(({ res, types }) => {\n        manageRecognizedModel(editorRef, res, ...[...events, ...types].filter((el, i, a) => i === a.indexOf(el)))\n      })\n  } else {\n    if (editorRef.error.style.display === 'initial') {\n      editorRef.error.style.display = 'none'\n    }\n    manageRecognizedModel(editorRef, model, ...events)\n  }\n}\n","import { recognizerLogger as logger } from '../configuration/LoggerConfig'\nimport * as InkModel from '../model/InkModel'\nimport * as RecognizerContext from '../model/RecognizerContext'\nimport Constants from '../configuration/Constants'\nimport { handleSuccess } from './RecognizerService'\n\n/**\n * Triggers\n * @typedef {Object} Triggers\n * @property {Array<String>} exportContent Supported triggers for exporting content.\n * @property {Array<String>} [addStrokes] Supported triggers for adding strokes.\n */\n\n/**\n * Recognizer info\n * @typedef {Object} RecognizerInfo\n * @property {Array<String>} types Supported recognition types (TEXT, MATH, SHAPE, MUSIC, ANALYZER).\n * @property {String} protocol Supported protocol (REST, WEBSOCKET).\n * @property {String} apiVersion Supported API version.\n * @property {Triggers} availableTriggers Supported triggers for this recognizer.\n */\n\n/**\n * Recognizer callback\n * @typedef {function} RecognizerCallback\n * @param {Object} [err] Error\n * @param {Model} [model] Result\n * @param {...String} [types] Result types\n */\n\n/**\n * Simple callback\n * @typedef {function} Callback\n * @param {Object} [err] Error\n * @param {Object} [res] Result\n */\n\n/**\n * Recognition service entry point\n * @typedef {Object} Recognizer\n * @property {function} getInfo Get information about the supported configuration (protocol, type, apiVersion, ...).\n * @property {function} init Initialize recognition.\n * @property {function} clear Clear server context. Currently nothing to do there.\n * @property {function} close Close and free all resources that will no longer be used by the recognizer.\n * @property {function} [undo] Undo Undo the last done action.\n * @property {function} [redo] Redo Redo the previously undone action.\n * @property {function} [resize] Resize.\n * @property {function} [pointerEvents] Pointer Events.\n * @property {function} [addStrokes] Add strokes.\n * @property {function} [export_] Export content.\n * @property {function} [import_] Import content.\n * @property {function} [convert] Convert.\n * @property {function} [waitForIdle] Wait for idle.\n * @property {function} [setPenStyle] Set pen style.\n * @property {function} [setPenStyleClasses] Set pen style classes.\n * @property {function} [setTheme] Set theme.\n */\n\n/**\n * Initialize recognition\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function init (recognizerContext, model) {\n  const modelRef = InkModel.resetModelPositions(model)\n  logger.debug('Updated model', modelRef)\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions)\n  recognizerContextRef.initPromise = Promise.resolve(modelRef)\n  return recognizerContextRef.initPromise\n    .then((res) => {\n      recognizerContextRef.initialized = true\n      logger.debug('Updated recognizer context', recognizerContextRef)\n      handleSuccess(recognizerContextRef.editor, res, Constants.EventType.LOADED)\n      return res\n    })\n}\n\n/**\n * Reset server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function reset (recognizerContext, model) {\n  const modelRef = InkModel.resetModelPositions(model)\n  logger.debug('Updated model', modelRef)\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions)\n  delete recognizerContextRef.instanceId\n  logger.debug('Updated recognizer context', recognizerContextRef)\n  return Promise.resolve({\n    res: modelRef\n  })\n}\n\n/**\n * Clear server context. Currently nothing to do there.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function clear (recognizerContext, model) {\n  const modelRef = InkModel.clearModel(model)\n  logger.debug('Updated model', modelRef)\n  const recognizerContextRef = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions)\n  delete recognizerContextRef.instanceId\n  logger.debug('Updated recognizer context', recognizerContextRef)\n  return Promise.resolve({\n    err: undefined,\n    res: modelRef,\n    events: [Constants.EventType.CHANGED, Constants.EventType.EXPORTED, Constants.EventType.RENDERED]\n  })\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @return {Promise}\n */\nexport function close (recognizerContext, model) {\n  const recognizerContextRef = recognizerContext\n  recognizerContextRef.initialized = false\n  delete recognizerContextRef.instanceId\n  return Promise.resolve(model)\n}\n","/* eslint-disable no-underscore-dangle */\nimport * as NetworkInterface from './networkInterface'\nimport * as RecognizerContext from '../../model/RecognizerContext'\nimport { recognizerLogger as logger } from '../../configuration/LoggerConfig'\nimport Constants from '../../configuration/Constants'\nimport * as InkModel from '../../model/InkModel'\nimport * as StrokeComponent from '../../model/StrokeComponent'\nimport * as DefaultTheme from '../../configuration/DefaultTheme'\nimport * as DefaultPenStyle from '../../configuration/DefaultPenStyle'\nimport { handleError, handleSuccess } from '../RecognizerService'\n\nexport { init, close, clear, reset } from '../DefaultRecognizer'\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const iinkRestConfiguration = {\n  types: [Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.MATH, Constants.RecognitionType.RAWCONTENT],\n  protocol: Constants.Protocol.REST,\n  availableTriggers: {\n    exportContent: [\n      Constants.Trigger.QUIET_PERIOD,\n      Constants.Trigger.DEMAND\n    ]\n  }\n}\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo () {\n  return iinkRestConfiguration\n}\n\n/**\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n * @param {function} buildMessage\n * @param {String} conversionState\n * @param {String} mimeType\n * @return {Promise.<Model>} Promise that return an updated model as a result\n */\nexport function postMessage (suffixUrl, recognizerContext, model, buildMessage, conversionState = '', mimeType) {\n  const configuration = recognizerContext.editor.configuration\n  return NetworkInterface.post(recognizerContext, `${configuration.recognitionParams.server.scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`, buildMessage(recognizerContext, model, conversionState), 'V4', mimeType)\n    .then((response) => {\n      logger.debug('iinkRestRecognizer success', response)\n      const positions = recognizerContext.lastPositions\n      positions.lastReceivedPosition = positions.lastSentPosition\n      const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, positions)\n      if (response.instanceId) {\n        recognizerContextReference.instanceId = response.instanceId\n      }\n      return response\n    })\n}\n\nfunction buildTextConf (configuration) {\n  return {\n    text: configuration.recognitionParams.iink.text,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  }\n}\n\nfunction buildMathConf (configuration) {\n  return {\n    math: configuration.recognitionParams.iink.math,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  }\n}\n\nfunction buildDiagramConf (configuration) {\n  return {\n    diagram: configuration.recognitionParams.iink.diagram,\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  }\n}\n\nfunction buildRawContentConf (configuration) {\n  return {\n    'raw-content': {\n      recognition: configuration.recognitionParams.iink['raw-content'].recognition\n    },\n    lang: configuration.recognitionParams.iink.lang,\n    export: configuration.recognitionParams.iink.export\n  }\n}\n\nfunction buildData (recognizerContext, model, conversionState) {\n  const configuration = recognizerContext.editor.configuration\n  let dataConf\n\n  if (configuration.recognitionParams.type === 'TEXT') {\n    dataConf = buildTextConf(configuration)\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    dataConf = buildMathConf(configuration)\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    dataConf = buildDiagramConf(configuration)\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    dataConf = buildRawContentConf(configuration)\n  }\n\n  const newStrokes = []\n  model.strokeGroups.forEach((group) => {\n    const newPenStyle = JSON.stringify(group.penStyle) === '{}' ? null : DefaultPenStyle.toCSS(group.penStyle)\n    const newGroup = {\n      penStyle: newPenStyle,\n      strokes: group.strokes.map(stroke => StrokeComponent.toJSON(stroke))\n    }\n    newStrokes.push(newGroup)\n  })\n\n  const contentType = configuration.recognitionParams.type === 'Raw Content' ? 'Raw Content' : configuration.recognitionParams.type.charAt(0)\n    .toUpperCase() + configuration.recognitionParams.type.slice(1)\n    .toLowerCase()\n\n  const data = {\n    configuration: dataConf,\n    xDPI: 96,\n    yDPI: 96,\n    contentType,\n    theme: DefaultTheme.toCSS(recognizerContext.editor.theme),\n    strokeGroups: newStrokes\n  }\n\n  if (recognizerContext.editor.domElement) {\n    data.height = recognizerContext.editor.domElement.clientHeight\n    data.width = recognizerContext.editor.domElement.clientWidth\n  }\n\n  if (conversionState) {\n    data.conversionState = 'DIGITAL_EDIT'\n  }\n\n  InkModel.updateModelSentPosition(model)\n  return data\n}\n\nfunction extractExports (configuration, mimeType, res) {\n  const exports = {}\n  exports[mimeType] = res\n  return exports\n}\n\nfunction resultCallback (recognizerContext, model, configuration, res, mimeType) {\n  logger.debug('iinkRestRecognizer result callback', model)\n  const modelReference = InkModel.updateModelReceivedPosition(model)\n  modelReference.rawResults.exports = res\n  if (modelReference.exports) {\n    Object.assign(modelReference.exports, extractExports(configuration, mimeType, res))\n  } else {\n    modelReference.exports = extractExports(configuration, mimeType, res)\n  }\n  logger.debug('iinkRestRecognizer model updated', modelReference)\n\n  if (recognizerContext.editor.undoRedoManager) {\n    handleSuccess(recognizerContext.editor, modelReference, Constants.EventType.EXPORTED, Constants.EventType.IDLE)\n  }\n}\n\nfunction callPostMessage (recognizerContext, model, mimeType) {\n  const configuration = recognizerContext.editor.configuration\n  return postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, configuration.restConversionState, mimeType)\n    .then((res) => {\n      resultCallback(recognizerContext, model, configuration, res, mimeType)\n      return model\n    })\n    .catch((err) => {\n      handleError(recognizerContext.editor, err)\n      return err\n    })\n}\n\n/**\n * Export content\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {Array} requestedMimeTypes\n */\nexport function export_ (recognizerContext, model, requestedMimeTypes) {\n  const configuration = recognizerContext.editor.configuration\n  if (requestedMimeTypes) {\n    return Promise.all(requestedMimeTypes.map(mimeType => callPostMessage(recognizerContext, model, mimeType)))\n  } else if (configuration.recognitionParams.type === 'TEXT') {\n    return Promise.all(configuration.recognitionParams.iink.text.mimeTypes.map(mimeType => callPostMessage(recognizerContext, model, mimeType)))\n  } else if (configuration.recognitionParams.type === 'DIAGRAM') {\n    return Promise.all(configuration.recognitionParams.iink.diagram.mimeTypes.map(mimeType => callPostMessage(recognizerContext, model, mimeType)))\n  } else if (configuration.recognitionParams.type === 'MATH') {\n    return Promise.all(configuration.recognitionParams.iink.math.mimeTypes.map(mimeType => callPostMessage(recognizerContext, model, mimeType)))\n  } else if (configuration.recognitionParams.type === 'Raw Content') {\n    return Promise.all(configuration.recognitionParams.iink['raw-content'].mimeTypes.map(mimeType => callPostMessage(recognizerContext, model, mimeType)))\n  }\n  return Promise.reject(new Error('Export failed'))\n}\n\n/**\n * Ask for conversion using DIGITAL_EDIT\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n */\nexport function convert (recognizerContext, model) {\n  const configuration = recognizerContext.editor.configuration\n  postMessage('/api/v4.0/iink/batch', recognizerContext, model, buildData, 'DIGITAL_EDIT')\n    .then(res => resultCallback(model, configuration, res))\n    .catch(err => handleError(recognizerContext.editor, err))\n}\n\n/**\n * Resize\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function resize (recognizerContext, model) {\n  if (model.strokeGroups.length) {\n    export_(recognizerContext, model)\n  }\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/*\n * UUID-js: A js library to generate and parse UUIDs, TimeUUIDs and generate\n * TimeUUID based on dates for range selections.\n * @see http://www.ietf.org/rfc/rfc4122.txt\n **/\n\nfunction UUIDjs() {\n};\n\nUUIDjs.maxFromBits = function(bits) {\n  return Math.pow(2, bits);\n};\n\nUUIDjs.limitUI04 = UUIDjs.maxFromBits(4);\nUUIDjs.limitUI06 = UUIDjs.maxFromBits(6);\nUUIDjs.limitUI08 = UUIDjs.maxFromBits(8);\nUUIDjs.limitUI12 = UUIDjs.maxFromBits(12);\nUUIDjs.limitUI14 = UUIDjs.maxFromBits(14);\nUUIDjs.limitUI16 = UUIDjs.maxFromBits(16);\nUUIDjs.limitUI32 = UUIDjs.maxFromBits(32);\nUUIDjs.limitUI40 = UUIDjs.maxFromBits(40);\nUUIDjs.limitUI48 = UUIDjs.maxFromBits(48);\n\n// Returns a random integer between min and max\n// Using Math.round() will give you a non-uniform distribution!\n// @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nUUIDjs.randomUI04 = function() {\n  return getRandomInt(0, UUIDjs.limitUI04-1);\n};\nUUIDjs.randomUI06 = function() {\n  return getRandomInt(0, UUIDjs.limitUI06-1);\n};\nUUIDjs.randomUI08 = function() {\n  return getRandomInt(0, UUIDjs.limitUI08-1);\n};\nUUIDjs.randomUI12 = function() {\n  return getRandomInt(0, UUIDjs.limitUI12-1);\n};\nUUIDjs.randomUI14 = function() {\n  return getRandomInt(0, UUIDjs.limitUI14-1);\n};\nUUIDjs.randomUI16 = function() {\n  return getRandomInt(0, UUIDjs.limitUI16-1);\n};\nUUIDjs.randomUI32 = function() {\n  return getRandomInt(0, UUIDjs.limitUI32-1);\n};\nUUIDjs.randomUI40 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 40 - 30)) * (1 << 30);\n};\nUUIDjs.randomUI48 = function() {\n  return (0 | Math.random() * (1 << 30)) + (0 | Math.random() * (1 << 48 - 30)) * (1 << 30);\n};\n\nUUIDjs.paddedString = function(string, length, z) {\n  string = String(string);\n  z = (!z) ? '0' : z;\n  var i = length - string.length;\n  for (; i > 0; i >>>= 1, z += z) {\n    if (i & 1) {\n      string = z + string;\n    }\n  }\n  return string;\n};\n\nUUIDjs.prototype.fromParts = function(timeLow, timeMid, timeHiAndVersion, clockSeqHiAndReserved, clockSeqLow, node) {\n  this.version = (timeHiAndVersion >> 12) & 0xF;\n  this.hex = UUIDjs.paddedString(timeLow.toString(16), 8)\n             + '-'\n             + UUIDjs.paddedString(timeMid.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(timeHiAndVersion.toString(16), 4)\n             + '-'\n             + UUIDjs.paddedString(clockSeqHiAndReserved.toString(16), 2)\n             + UUIDjs.paddedString(clockSeqLow.toString(16), 2)\n             + '-'\n             + UUIDjs.paddedString(node.toString(16), 12);\n  return this;\n};\n\nUUIDjs.prototype.toString = function() {\n  return this.hex;\n};\nUUIDjs.prototype.toURN = function() {\n  return 'urn:uuid:' + this.hex;\n};\n\nUUIDjs.prototype.toBytes = function() {\n  var parts = this.hex.split('-');\n  var ints = [];\n  var intPos = 0;\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i].length; j+=2) {\n      ints[intPos++] = parseInt(parts[i].substr(j, 2), 16);\n    }\n  }\n  return ints;\n};\n\nUUIDjs.prototype.equals = function(uuid) {\n  if (!(uuid instanceof UUID)) {\n    return false;\n  }\n  if (this.hex !== uuid.hex) {\n    return false;\n  }\n  return true;\n};\n\nUUIDjs.getTimeFieldValues = function(time) {\n  var ts = time - Date.UTC(1582, 9, 15);\n  var hm = ((ts / 0x100000000) * 10000) & 0xFFFFFFF;\n  return { low: ((ts & 0xFFFFFFF) * 10000) % 0x100000000,\n            mid: hm & 0xFFFF, hi: hm >>> 16, timestamp: ts };\n};\n\nUUIDjs._create4 = function() {\n  return new UUIDjs().fromParts(\n    UUIDjs.randomUI32(),\n    UUIDjs.randomUI16(),\n    0x4000 | UUIDjs.randomUI12(),\n    0x80   | UUIDjs.randomUI06(),\n    UUIDjs.randomUI08(),\n    UUIDjs.randomUI48()\n  );\n};\n\nUUIDjs._create1 = function() {\n  var now = new Date().getTime();\n  var sequence = UUIDjs.randomUI14();\n  var node = (UUIDjs.randomUI08() | 1) * 0x10000000000 + UUIDjs.randomUI40();\n  var tick = UUIDjs.randomUI04();\n  var timestamp = 0;\n  var timestampRatio = 1/4;\n\n  if (now != timestamp) {\n    if (now < timestamp) {\n      sequence++;\n    }\n    timestamp = now;\n    tick = UUIDjs.randomUI04();\n  } else if (Math.random() < timestampRatio && tick < 9984) {\n    tick += 1 + UUIDjs.randomUI04();\n  } else {\n    sequence++;\n  }\n\n  var tf = UUIDjs.getTimeFieldValues(timestamp);\n  var tl = tf.low + tick;\n  var thav = (tf.hi & 0xFFF) | 0x1000;\n\n  sequence &= 0x3FFF;\n  var cshar = (sequence >>> 8) | 0x80;\n  var csl = sequence & 0xFF;\n\n  return new UUIDjs().fromParts(tl, tf.mid, thav, cshar, csl, node);\n};\n\nUUIDjs.create = function(version) {\n  version = version || 4;\n  return this['_create' + version]();\n};\n\nUUIDjs.fromTime = function(time, last) {\n  last = (!last) ? false : last;\n  var tf = UUIDjs.getTimeFieldValues(time);\n  var tl = tf.low;\n  var thav = (tf.hi & 0xFFF) | 0x1000;  // set version '0001'\n  if (last === false) {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0, 0, 0);\n  } else {\n    return new UUIDjs().fromParts(tl, tf.mid, thav, 0x80 | UUIDjs.limitUI06, UUIDjs.limitUI08 - 1, UUIDjs.limitUI48 - 1);\n  }\n};\n\nUUIDjs.firstFromTime = function(time) {\n  return UUIDjs.fromTime(time, false);\n};\nUUIDjs.lastFromTime = function(time) {\n  return UUIDjs.fromTime(time, true);\n};\n\nUUIDjs.fromURN = function(strId) {\n  var r, p = /^(?:urn:uuid:|\\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\\})?$/i;\n  if ((r = p.exec(strId))) {\n    return new UUIDjs().fromParts(parseInt(r[1], 16), parseInt(r[2], 16),\n                            parseInt(r[3], 16), parseInt(r[4], 16),\n                            parseInt(r[5], 16), parseInt(r[6], 16));\n  }\n  return null;\n};\n\nUUIDjs.fromBytes = function(ints) {\n  if (ints.length < 5) {\n    return null;\n  }\n  var str = '';\n  var pos = 0;\n  var parts = [4, 2, 2, 2, 6];\n  for (var i = 0; i < parts.length; i++) {\n    for (var j = 0; j < parts[i]; j++) {\n      var octet = ints[pos++].toString(16);\n      if (octet.length == 1) {\n        octet = '0' + octet;\n      }\n      str += octet;\n    }\n    if (parts[i] !== 6) {\n      str += '-';\n    }\n  }\n  return UUIDjs.fromURN(str);\n};\n\nUUIDjs.fromBinary = function(binary) {\n  var ints = [];\n  for (var i = 0; i < binary.length; i++) {\n    ints[i] = binary.charCodeAt(i);\n    if (ints[i] > 255 || ints[i] < 0) {\n      throw new Error('Unexpected byte in binary data.');\n    }\n  }\n  return UUIDjs.fromBytes(ints);\n};\n\n// Aliases to support legacy code. Do not use these when writing new code as\n// they may be removed in future versions!\nUUIDjs.new = function() {\n  return this.create(4);\n};\nUUIDjs.newTS = function() {\n  return this.create(1);\n};\n\nmodule.exports = UUIDjs;\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig'\nimport * as RecognizerContext from '../../model/RecognizerContext'\n\nfunction infinitePing (websocket) {\n  const websocketRef = websocket\n  websocketRef.pingLostCount++\n  if (websocketRef.pingLostCount > websocketRef.maxPingLost) {\n    websocket.close(1000, 'PING_LOST')\n  } else if (websocketRef.readyState <= 1) {\n    setTimeout(() => {\n      if (websocketRef.readyState <= 1) {\n        websocketRef.send(JSON.stringify({ type: 'ping' }))\n        infinitePing(websocketRef)\n      }\n    }, websocketRef.pingDelay)\n  }\n}\n\n/**\n * Attach all socket attributes helping managing server connexion\n * @param {WebSocket} websocket Current WebSocket\n * @param {RecognizerContext} recognizerContext\n */\nfunction addWebsocketAttributes (websocket, recognizerContext) {\n  const websocketConfiguration = recognizerContext.editor.configuration.recognitionParams.server.websocket\n  const socket = websocket\n  socket.start = new Date()\n  socket.autoReconnect = websocketConfiguration.autoReconnect\n  socket.maxRetryCount = websocketConfiguration.maxRetryCount\n  socket.pingEnabled = websocketConfiguration.pingEnabled\n  socket.pingDelay = websocketConfiguration.pingDelay\n  socket.maxPingLost = websocketConfiguration.maxPingLostCount\n  socket.pingLostCount = 0\n  socket.recognizerContext = recognizerContext\n}\n\n/**\n * @param {RecognizerContext} recognizerContext Recognizer context\n * @return {WebSocket} Opened WebSocket\n */\nexport function openWebSocket (recognizerContext) {\n  let socket\n  try {\n    // eslint-disable-next-line no-undef\n    socket = new WebSocket(recognizerContext.url)\n  } catch (error) {\n    logger.error('Unable to open websocket, Check the host and your connectivity')\n  }\n  addWebsocketAttributes(socket, recognizerContext)\n  if (socket.pingEnabled) {\n    infinitePing(socket)\n  }\n\n  socket.onopen = (e) => {\n    logger.trace('onOpen')\n    recognizerContext.websocketCallback(e)\n  }\n\n  socket.onclose = (e) => {\n    logger.trace('onClose', new Date() - socket.start)\n    recognizerContext.websocketCallback(e)\n  }\n\n  socket.onerror = (e) => {\n    logger.trace('onError')\n    recognizerContext.websocketCallback(e)\n  }\n\n  socket.onmessage = (e) => {\n    logger.trace('onMessage')\n    socket.pingLostCount = 0\n    const parsedMessage = JSON.parse(e.data)\n    if (parsedMessage.type !== 'pong') {\n      const callBackParam = {\n        type: e.type,\n        data: JSON.parse(e.data)\n      }\n      recognizerContext.websocketCallback(callBackParam)\n    }\n  }\n\n  return socket\n}\n\n/**\n * Send data message\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Object} message Data message\n */\nexport function send (recognizerContext, message) {\n  const recognizerContextRef = recognizerContext\n  recognizerContextRef.idle = false\n\n  const websocket = recognizerContextRef.websocket\n  if (websocket.readyState === 1) {\n    websocket.send(JSON.stringify(message))\n    logger.debug(`${message.type} message sent`, message)\n  } else {\n    throw RecognizerContext.LOST_CONNEXION_MESSAGE\n  }\n}\n\n/**\n * Close the websocket\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Number} code Exit code\n * @param {String} reason Exit reason\n */\nexport function close (recognizerContext, code, reason) {\n  const websocket = recognizerContext.websocket\n  if (websocket && websocket.readyState < 2) {\n    websocket.close(code, reason)\n  }\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig'\nimport * as CryptoHelper from '../CryptoHelper'\nimport * as NetworkWSInterface from './networkWSInterface'\n\nimport {\n  buildNewContentPackageInput,\n  buildRestoreIInkSessionInput,\n  buildNewContentPart,\n  buildOpenContentPart,\n  buildConfiguration\n} from './iinkWsRecognizer'\n\n/**\n * A websocket dialog have this sequence :\n * ---------- Client ------------------------------------- Server ----------------------------------\n * init (send the new content package) ================>\n *                                       <=========== hmacChallenge\n * answerToHmacChallenge (send the hmac) =========>\n * newPart (send the parameters ) ===============>\n *                                       <=========== update\n * addStrokes (send the strokes ) ============>\n *                                       <=========== update\n */\n\nfunction buildHmacMessage (configuration, message) {\n  return {\n    type: 'hmac',\n    hmac: CryptoHelper.computeHmac(message.data.hmacChallenge, configuration.recognitionParams.server.applicationKey, configuration.recognitionParams.server.hmacKey)\n  }\n}\n\n/**\n * This function bind the right behaviour when a message is receive by the websocket.\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @return {function} Callback to handle WebSocket results\n */\nexport function buildWebSocketCallback (recognizerContext) {\n  return (message) => {\n    const recognizerContextRef = recognizerContext\n    // Handle websocket messages\n    logger.trace(`${message.type} websocket callback`, message)\n    const recognitionContext = recognizerContext.recognitionContexts[recognizerContext.recognitionContexts.length - 1]\n    logger.debug('Current recognition context', recognitionContext)\n\n    switch (message.type) {\n      case 'open':\n        if (recognizerContext.sessionId) {\n          NetworkWSInterface.send(recognizerContext, buildRestoreIInkSessionInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement, recognizerContext.sessionId))\n        } else {\n          NetworkWSInterface.send(recognizerContext, buildNewContentPackageInput(recognizerContext.editor.configuration, recognizerContext.editor.domElement))\n        }\n        break\n      case 'message':\n        logger.debug(`Receiving ${message.data.type} message`, message)\n        switch (message.data.type) {\n          case 'ack':\n            if (message.data.hmacChallenge) {\n              NetworkWSInterface.send(recognizerContext, buildHmacMessage(recognizerContext.editor.configuration, message))\n            }\n            if (message.data.iinkSessionId) {\n              recognizerContextRef.sessionId = message.data.iinkSessionId\n            }\n            break\n          case 'newPart':\n            break\n          case 'contentPackageDescription':\n            recognizerContextRef.currentReconnectionCount = 0\n            recognizerContextRef.contentPartCount = message.data.contentPartCount\n            NetworkWSInterface.send(recognizerContext, buildConfiguration(recognizerContext.editor.configuration))\n            if (recognizerContextRef.currentPartId) { // FIXME: Ugly hack to resolve init promise after opening part\n              NetworkWSInterface.send(recognizerContext, buildOpenContentPart(recognizerContext.editor.configuration, recognizerContext.currentPartId))\n            } else {\n              NetworkWSInterface.send(recognizerContext, buildNewContentPart(recognizerContext.editor.configuration))\n            }\n            break\n          case 'partChanged':\n            if (message.data.partId) {\n              recognizerContextRef.currentPartId = message.data.partId\n            }\n            recognizerContextRef.initialized = true\n            if (recognitionContext.partChange) {\n              recognitionContext.partChange.resolve([undefined, message.data])\n            } else {\n              recognitionContext.error(message)\n            }\n            break\n          case 'contentChanged':\n            if (message.data.canUndo !== undefined) {\n              recognizerContextRef.canUndo = message.data.canUndo\n            }\n            if (message.data.canRedo !== undefined) {\n              recognizerContextRef.canRedo = message.data.canRedo\n            }\n            if (message.data.empty !== undefined) {\n              recognizerContextRef.isEmpty = message.data.empty\n            }\n            if (message.data.possibleUndoCount !== undefined) {\n              recognizerContextRef.possibleUndoCount = message.data.possibleUndoCount\n            }\n            if (message.data.undoStackIndex !== undefined) {\n              recognizerContextRef.undoStackIndex = message.data.undoStackIndex\n            }\n            recognitionContext.contentChange.resolve([undefined, message.data])\n            break\n          case 'exported':\n            recognitionContext.response(undefined, message.data)\n            break\n          case 'svgPatch':\n            recognitionContext.patch(undefined, message.data)\n            break\n          case 'supportedImportMimeTypes':\n            recognizerContextRef.supportedImportMimeTypes = message.data.mimeTypes\n            recognitionContext.response(undefined, message.data)\n            break\n          case 'fileChunkAck':\n            recognitionContext.response(undefined, message.data)\n            break\n          case 'idle':\n            recognizerContextRef.idle = true\n            recognitionContext.patch(undefined, message.data)\n            break\n          case 'error':\n            logger.debug('Error detected stopping all recognition', message)\n            if (recognitionContext) {\n              let func = () => {}\n              if (recognitionContext.patch) {\n                func = recognitionContext.patch\n              } else if (recognitionContext.response) {\n                func = recognitionContext.response\n              }\n              func(message.data)\n            } else {\n              recognitionContext.initPromise.reject(Object.assign({}, message.data, { recoverable: false }))\n            }\n            break\n          default :\n            logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message)\n        }\n        break\n      case 'error':\n        logger.debug('Error detected stopping all recognition', message)\n        if (recognitionContext) {\n          let func = () => {}\n          if (recognitionContext.patch) {\n            func = recognitionContext.patch\n          } else if (recognitionContext.response) {\n            func = recognitionContext.response\n          }\n          func(Object.assign({}, message, { recoverable: false }))\n        } else {\n          recognitionContext.initPromise.reject(Object.assign({}, message, { recoverable: false }))\n        }\n        break\n      case 'close':\n        logger.debug('Close detected stopping all recognition', message)\n        recognizerContextRef.initialized = false\n        if (message.reason === 'CLOSE_RECOGNIZER') {\n          recognitionContext.initPromise.resolve(message)\n        } else {\n          if (recognitionContext) {\n            recognitionContext.error(message)\n          } else {\n            recognitionContext.initPromise.reject(message)\n          }\n        }\n        break\n      default :\n        logger.warn('This is something unexpected in current recognizer. Not the type of message we should have here.', message)\n    }\n  }\n}\n","import { recognizerLogger as logger } from '../../configuration/LoggerConfig'\nimport * as NetworkWSInterface from './networkWSInterface'\nimport * as PromiseHelper from '../../util/PromiseHelper'\nimport * as InkModel from '../../model/InkModel'\nimport * as RecognizerContext from '../../model/RecognizerContext'\nimport {\n  responseCallback,\n  setTheme,\n  setPenStyle,\n  setPenStyleClasses\n} from './iinkWsRecognizer'\n\nfunction buildUrl (configuration, suffixUrl) {\n  const scheme = (configuration.recognitionParams.server.scheme === 'https') ? 'wss' : 'ws'\n  return `${scheme}://${configuration.recognitionParams.server.host}${suffixUrl}`\n}\n\n/**\n * Build websocket function\n * @typedef {function} BuildWebSocketFunction\n * @param {DestructuredPromise} destructuredPromise\n * @param {RecognizerContext} recognizerContext\n * @return {Callback}\n */\n\n/**\n * Init the websocket recognizer.\n * Open the connexion and proceed to the hmac challenge.\n * @param {String} suffixUrl\n * @param {RecognizerContext} recognizerContext\n * @param {BuildWebSocketFunction} buildWebSocketCallback\n * @param {function} reconnect\n * @return {Promise} Fulfilled when the init phase is over.\n */\nexport function init (suffixUrl, recognizerContext, buildWebSocketCallback, reconnect) {\n  const recognitionContext = recognizerContext.recognitionContexts[0]\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, recognitionContext.model.lastPositions)\n  recognizerContextReference.url = buildUrl(recognizerContext.editor.configuration, suffixUrl)\n  recognizerContextReference.reconnect = reconnect\n\n  recognizerContextReference.initPromise = recognitionContext.initPromise.promise\n\n  logger.debug('Opening the websocket for context ', recognizerContext)\n  recognizerContextReference.websocketCallback = buildWebSocketCallback(recognizerContextReference)\n  recognizerContextReference.websocket = NetworkWSInterface.openWebSocket(recognizerContextReference)\n  return recognizerContextReference.initPromise\n}\n\nexport async function retry (func, recognizerContext, model, buildFunc, ...params) {\n  if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n    logger.info('Attempting a retry', recognizerContext.currentReconnectionCount)\n    await recognizerContext.reconnect(recognizerContext, model)\n      .catch((err) => {\n        logger.error('Failed retry', err)\n        retry(func, recognizerContext, model, buildFunc, ...params)\n      })\n    setTheme(recognizerContext, model, recognizerContext.editor.theme)\n    setPenStyle(recognizerContext, model, recognizerContext.editor.penStyle)\n    setPenStyleClasses(recognizerContext, model, recognizerContext.editor.penStyleClasses)\n\n    return func(recognizerContext, model, buildFunc, ...params)\n  } else {\n    responseCallback(model, 'Unable to reconnect')\n  }\n}\n\n/**\n * @param {RecognizerContext} recognizerContext\n * @param {function} buildMessage\n * @param {...Object} params\n * @return {Promise}\n */\nexport function sendMessage (recognizerContext, buildMessage, ...params) {\n  return recognizerContext.initPromise\n    .then(() => {\n      logger.trace('Init was done. Sending message')\n      const message = buildMessage(...params)\n      if (message) {\n        NetworkWSInterface.send(recognizerContext, message)\n        const positions = recognizerContext.recognitionContexts[0].model.lastPositions\n        if (positions) {\n          RecognizerContext.updateRecognitionPositions(recognizerContext, positions)\n        }\n      } else {\n        logger.warn('empty message')\n      }\n    })\n}\n\n/**\n * Do what is needed to clean the server context.\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n * @param {RecognizerCallback} callback\n */\nexport function clear (recognizerContext, model, callback) {\n  const modelRef = InkModel.clearModel(model)\n  const recognizerContextReference = RecognizerContext.updateRecognitionPositions(recognizerContext, modelRef.lastPositions)\n  if (recognizerContextReference && recognizerContextReference.websocket) {\n    // We have to send again all strokes after a clear.\n    delete recognizerContextReference.instanceId\n    try {\n      NetworkWSInterface.send(recognizerContextReference, { type: 'reset' })\n    } catch (sendFailedException) {\n      // To force failure without breaking the flow\n      // FIXME not working at all\n      recognizerContextReference.websocketCallback(PromiseHelper.destructurePromise(), recognizerContextReference, model)\n    }\n  }\n  // We do not keep track of the success of clear.\n  callback(undefined, modelRef)\n}\n\n/**\n * Close and free all resources that will no longer be used by the recognizer.\n * @param {RecognizerContext} recognizerContext\n * @param {Model} model\n */\nexport function close (recognizerContext, model) {\n  const initPromise = PromiseHelper.destructurePromise()\n  const recognizerContextRef = recognizerContext\n  const recognitionContext = {\n    model,\n    initPromise,\n    error: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n  }\n\n  return recognizerContext.initPromise\n    .then(() => {\n      recognizerContextRef.recognitionContexts[0] = recognitionContext\n      return recognizerContextRef\n    })\n    .then((context) => {\n      NetworkWSInterface.close(context, 1000, RecognizerContext.CLOSE_RECOGNIZER_MESSAGE)\n      return recognitionContext.model\n    })\n}\n","import uuid from 'uuid-js'\nimport { recognizerLogger as logger } from '../../configuration/LoggerConfig'\nimport Constants from '../../configuration/Constants'\nimport * as DefaultTheme from '../../configuration/DefaultTheme'\nimport * as DefaultPenStyle from '../../configuration/DefaultPenStyle'\nimport * as InkModel from '../../model/InkModel'\nimport * as RecognizerContext from '../../model/RecognizerContext'\nimport * as DefaultRecognizer from '../DefaultRecognizer'\nimport * as WsBuilder from './WsBuilder'\nimport * as WsRecognizerUtil from './WsRecognizerUtil'\nimport * as PromiseHelper from '../../util/PromiseHelper'\nimport { handleError, handleSuccess } from '../RecognizerService'\n\nexport { close } from './WsRecognizerUtil'\n\nfunction readBlob (blob) {\n  const fileReader = new FileReader()\n  return new Promise((resolve, reject) => {\n    fileReader.onload = event => resolve(event.target.result)\n    fileReader.onerror = () => reject(new Error(this))\n    fileReader.readAsText(blob)\n  })\n}\n\nfunction getDPI (element) {\n  // const startDpi = 56;\n  // for (let dpi = startDpi; dpi < 2000; dpi++) {\n  //   if (window.matchMedia(`(max-resolution: ${dpi}dpi)`).matches === true) {\n  //     return dpi;\n  //   }\n  // }\n  // return startDpi;\n  return 96\n}\n\n/**\n * Recognizer configuration\n * @type {RecognizerInfo}\n */\nexport const IinkWsConfiguration = {\n  types: [Constants.RecognitionType.MATH, Constants.RecognitionType.TEXT, Constants.RecognitionType.DIAGRAM, Constants.RecognitionType.NEBO],\n  protocol: Constants.Protocol.WEBSOCKET,\n  availableTriggers: {\n    exportContent: [Constants.Trigger.POINTER_UP, Constants.Trigger.DEMAND],\n    addStrokes: [Constants.Trigger.POINTER_UP]\n  }\n}\n\n/**\n * Get the configuration supported by this recognizer\n * @return {RecognizerInfo}\n */\nexport function getInfo () {\n  return IinkWsConfiguration\n}\n\nexport function buildNewContentPackageInput (configuration, element) {\n  return {\n    type: 'newContentPackage',\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  }\n}\n\nexport function buildRestoreIInkSessionInput (configuration, element, sessionId) {\n  return {\n    type: 'restoreIInkSession',\n    iinkSessionId: sessionId,\n    applicationKey: configuration.recognitionParams.server.applicationKey,\n    xDpi: getDPI(element),\n    yDpi: getDPI(element),\n    viewSizeHeight: element.clientHeight < configuration.renderingParams.minHeight ? configuration.renderingParams.minHeight : element.clientHeight,\n    viewSizeWidth: element.clientWidth < configuration.renderingParams.minWidth ? configuration.renderingParams.minWidth : element.clientWidth\n  }\n}\n\nexport function buildNewContentPart (configuration) {\n  return {\n    type: 'newContentPart',\n    contentType: configuration.recognitionParams.type,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND)\n      ? configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  }\n}\n\nexport function buildOpenContentPart (configuration, partId) {\n  return {\n    type: 'openContentPart',\n    id: partId,\n    mimeTypes: (configuration.triggers.exportContent !== Constants.Trigger.DEMAND)\n      ? configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes : undefined\n  }\n}\n\nexport function buildConfiguration (configuration) {\n  return Object.assign({ type: 'configuration' }, configuration.recognitionParams.iink)\n}\n\nfunction buildAddStrokes (recognizerContext, model) {\n  const strokes = InkModel.extractPendingStrokes(model, recognizerContext.lastPositions.lastSentPosition + 1)\n  if (strokes.length > 0) {\n    InkModel.updateModelSentPosition(model)\n    return {\n      type: 'addStrokes',\n      strokes: strokes.map(stroke => Object.assign({}, {\n        id: stroke.id,\n        pointerType: stroke.pointerType,\n        pointerId: stroke.pointerId,\n        x: stroke.x,\n        y: stroke.y,\n        t: stroke.t,\n        p: stroke.p\n      }))\n    }\n  }\n  return undefined\n}\n\nfunction buildUndo () {\n  return {\n    type: 'undo'\n  }\n}\n\nfunction buildRedo () {\n  return {\n    type: 'redo'\n  }\n}\n\nfunction buildClear () {\n  return {\n    type: 'clear'\n  }\n}\n\nfunction buildConvert (state) {\n  return {\n    type: 'convert',\n    conversionState: state\n  }\n}\n\nfunction buildZoom (value) {\n  return {\n    type: 'zoom',\n    zoom: value\n  }\n}\n\nfunction buildResize (element, minHeight = 0, minWidth = 0) {\n  return {\n    type: 'changeViewSize',\n    height: element.clientHeight < minHeight ? minHeight : element.clientHeight,\n    width: element.clientWidth < minWidth ? minWidth : element.clientWidth\n  }\n}\n\nfunction buildExport (configuration, partId, requestedMimeType) {\n  let usedMimeType\n  if (requestedMimeType && Object.keys(requestedMimeType).length !== 0) {\n    usedMimeType = requestedMimeType\n  } else {\n    usedMimeType = configuration.recognitionParams.iink[`${configuration.recognitionParams.type.toLowerCase()}`].mimeTypes\n  }\n\n  return {\n    type: 'export',\n    partId,\n    mimeTypes: usedMimeType\n  }\n}\n\nfunction buildImportFile (id, mimetype) {\n  return {\n    type: 'importFile',\n    importFileId: id,\n    mimeType: mimetype\n  }\n}\n\nfunction buildImportChunk (id, data, lastChunk) {\n  return {\n    type: 'fileChunk',\n    importFileId: id,\n    data,\n    lastChunk\n  }\n}\n\nfunction buildPointerEvents (events) {\n  return Object.assign({ type: 'pointerEvents' }, events)\n}\n\nfunction buildWaitForIdle () {\n  return {\n    type: 'waitForIdle'\n  }\n}\n\nfunction buildGetSupportedImportMimeTypes () {\n  return {\n    type: 'getSupportedImportMimeTypes'\n  }\n}\n\nexport function buildSetPenStyle (penStyle) {\n  return {\n    type: 'setPenStyle',\n    style: penStyle ? DefaultPenStyle.toCSS(penStyle) : ''\n  }\n}\n\nexport function buildSetPenStyleClasses (penStyleClasses) {\n  return {\n    type: 'setPenStyleClasses',\n    styleClasses: penStyleClasses\n  }\n}\n\nexport function buildSetTheme (theme) {\n  return {\n    type: 'setTheme',\n    theme: DefaultTheme.toCSS(theme)\n  }\n}\n\nexport const responseCallback = (model, err, res, recognizerContext) => {\n  const modelReference = InkModel.updateModelReceivedPosition(model)\n  if (res) {\n    let event = ''\n    if (res.updates !== undefined) {\n      if (modelReference.recognizedSymbols) {\n        modelReference.recognizedSymbols.push(res)\n      } else {\n        modelReference.recognizedSymbols = [res]\n      }\n      event = Constants.EventType.RENDERED\n    }\n    if (res.exports !== undefined) {\n      modelReference.rawResults.exports = res\n      modelReference.exports = res.exports\n      event = Constants.EventType.EXPORTED\n    }\n\n    if ((res.canUndo !== undefined) || (res.canRedo !== undefined)) {\n      event = Constants.EventType.CHANGED\n    }\n\n    if (res.type === 'supportedImportMimeTypes') {\n      event = Constants.EventType.SUPPORTED_IMPORT_MIMETYPES\n    }\n\n    if (res.type === 'partChanged') {\n      event = Constants.EventType.LOADED\n    }\n\n    if (res.type === 'idle') {\n      event = Constants.EventType.IDLE\n    }\n\n    if (res.type === 'close') {\n      event = Constants.EventType.CHANGED\n    }\n    return handleSuccess(recognizerContext.editor, model, event)\n  }\n  return handleError(recognizerContext.editor, err)\n}\n\n/**\n * Initialize recognition\n * The init process is in multiple part :\n * - partChange\n * - contentChange\n * - initPromise: resolved only if partChange & contentChange resolved except for MATH recognition\n *\n * @param {RecognizerContext} recognizerContext Current recognizer context\n * @param {Model} model Current model\n */\nexport async function init (recognizerContext, model) {\n  const contentChange = PromiseHelper.destructurePromise()\n  const partChange = PromiseHelper.destructurePromise()\n  const initPromise = PromiseHelper.destructurePromise()\n\n  let recognizerContextRef\n  let contentChanged = null\n\n  if (recognizerContext.editor.innerConfiguration.recognitionParams.type === 'MATH' ||\n    recognizerContext.editor.innerConfiguration.recognitionParams.type === 'DIAGRAM') {\n    recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n      model: InkModel.updateModelSentPosition(model, model.lastPositions.lastReceivedPosition),\n      partChange,\n      initPromise,\n      patch: (err, res) => responseCallback(model, err, res, recognizerContextRef),\n      error: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n    })\n  } else {\n    recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n      model: InkModel.updateModelSentPosition(model, model.lastPositions.lastReceivedPosition),\n      contentChange,\n      partChange,\n      response: (err, res) => responseCallback(model, err, res, recognizerContextRef),\n      initPromise,\n      patch: (err, res) => responseCallback(model, err, res, recognizerContextRef),\n      error: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n    })\n    contentChanged = recognizerContextRef.recognitionContexts[0].contentChange.promise\n  }\n\n  WsRecognizerUtil.init('/api/v4.0/iink/document', recognizerContextRef, WsBuilder.buildWebSocketCallback, init)\n    .catch(async (err) => {\n      if (RecognizerContext.shouldAttemptImmediateReconnect(recognizerContext) && recognizerContext.reconnect) {\n        logger.info('Attempting a reconnect', recognizerContext.currentReconnectionCount)\n        await recognizerContext.reconnect(recognizerContext, model)\n      } else {\n        logger.error('Unable to reconnect', err)\n        responseCallback(model, err, undefined, recognizerContext)\n      }\n    })\n\n  const [errPartChanged, resPartChanged] = await recognizerContextRef.recognitionContexts[0].partChange.promise\n  if (resPartChanged) {\n    responseCallback(model, errPartChanged, resPartChanged, recognizerContext)\n    if (contentChanged !== null) {\n      const [errContentChanged, resContentChanged] = await contentChanged\n      if (resContentChanged) {\n        responseCallback(model, errContentChanged, resContentChanged, recognizerContext)\n      }\n    }\n    recognizerContextRef.recognitionContexts[0].initPromise.resolve(true)\n  }\n\n  return recognizerContextRef.recognitionContexts[0].initPromise\n}\n\n/**\n *\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Function} buildFunction build the websocket message\n * @param {...Object} params spread parameters, will be passed to buildFunction\n * @private\n */\n// eslint-disable-next-line no-underscore-dangle\nasync function _prepareMessage (recognizerContext, model, buildFunction, ...params) {\n  logger.info(`-- Prepare message for ${buildFunction.name} --`)\n  const contentChange = PromiseHelper.destructurePromise()\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    response: (err, res) => {\n      const onDemand = recognizerContext.editor.configuration.triggers.exportContent === Constants.Trigger.DEMAND\n      if (!onDemand || (onDemand && buildFunction.name === 'buildExport')) {\n        responseCallback(model, err, res, recognizerContextRef)\n      }\n    },\n    contentChange,\n    patch: (err, res) => responseCallback(model, err, res, recognizerContextRef),\n    error: (err, res) => responseCallback(model, err, res, recognizerContextRef)\n  })\n  WsRecognizerUtil.sendMessage(recognizerContextRef, buildFunction, ...params)\n    .catch((err) => {\n      logger.error(err)\n      WsRecognizerUtil.retry(_prepareMessage, recognizerContext, model, buildFunction, ...params)\n    })\n\n  const contentChanged = await recognizerContextRef.recognitionContexts[0].contentChange.promise\n\n  if (contentChanged) {\n    responseCallback(model, contentChanged[0], contentChanged[1], recognizerContextRef)\n    return {\n      res: model,\n      types: []\n    }\n  }\n\n  return null\n}\n\n/**\n * Create a new content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function newContentPart (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildNewContentPart, recognizerContext.editor.configuration)\n}\n\n/**\n * Open the recognizer context content part\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function openContentPart (recognizerContext, model) {\n  const params = [recognizerContext.editor.configuration, recognizerContext.currentPartId]\n  return _prepareMessage(recognizerContext, model, buildOpenContentPart, params)\n}\n\n/**\n * Send the recognizer configuration\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function sendConfiguration (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildConfiguration, recognizerContext.editor.configuration)\n}\n\n/**\n * Pointer Events\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PointerEvents} events to be imported\n */\nexport function pointerEvents (recognizerContext, model, events) {\n  return _prepareMessage(recognizerContext, model, buildPointerEvents, events)\n}\n\n/**\n * Add strokes to the model\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function addStrokes (recognizerContext, model) {\n  const params = [recognizerContext, model]\n  return _prepareMessage(recognizerContext, model, buildAddStrokes, ...params)\n}\n\n/**\n * Undo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function undo (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildUndo)\n}\n\n/**\n * Redo last action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function redo (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildRedo)\n}\n\n/**\n * Clear action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport async function clear (recognizerContext, model) {\n  const contentChange = PromiseHelper.destructurePromise()\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, {\n    model,\n    response: (err, res) => {\n      if (recognizerContext.editor.configuration.triggers.exportContent !== Constants.Trigger.DEMAND) {\n        responseCallback(model, err, res, recognizerContextRef)\n      }\n    },\n    contentChange,\n    // eslint-disable-next-line handle-callback-err\n    patch: async (error, result) => {\n      const { err, res } = await DefaultRecognizer.clear(recognizerContext, model)\n      responseCallback(res, err, result, recognizerContextRef)\n    }\n  })\n  WsRecognizerUtil.sendMessage(recognizerContextRef, buildClear)\n    .catch(exception => WsRecognizerUtil.retry(clear, recognizerContext, model))\n\n  const contentChanged = await recognizerContextRef.recognitionContexts[0].contentChange.promise\n\n  if (contentChanged) {\n    responseCallback(model, contentChanged[0], contentChanged[1], recognizerContextRef)\n    return {\n      err: undefined,\n      res: recognizerContextRef.recognitionContexts[0].model,\n      events: []\n    }\n  }\n\n  return null\n}\n\n/**\n * Convert action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {String} conversionState Conversion State, by default DigitalEdit\n */\nexport function convert (recognizerContext, model, conversionState) {\n  return _prepareMessage(recognizerContext, model, buildConvert, conversionState)\n}\n\n/**\n * Export action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Array} requestedMimeTypes\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function export_ (recognizerContext, model, requestedMimeTypes) {\n  const params = [recognizerContext.editor.configuration, recognizerContext.currentPartId, requestedMimeTypes]\n  return _prepareMessage(recognizerContext, model, buildExport, ...params)\n}\n\n/**\n * Import action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Blob} data Import data\n */\n// eslint-disable-next-line no-underscore-dangle\nexport function import_ (recognizerContext, model, data) {\n  const recognitionContext = {\n    model,\n    response: (err, res) => responseCallback(model, err, res, recognizerContext),\n    importFileId: uuid.create(4).toString()\n  }\n  const recognizerContextRef = RecognizerContext.setRecognitionContext(recognizerContext, recognitionContext)\n\n  const chunkSize = recognizerContext.editor.configuration.recognitionParams.server.websocket.fileChunkSize\n\n  const messages = []\n  for (let i = 0; i < data.size; i += chunkSize) {\n    if (i === 0) {\n      messages.push(_prepareMessage(recognizerContextRef, model, buildImportFile, recognitionContext.importFileId, data.type))\n    }\n    const blobPart = data.slice(i, chunkSize, data.type)\n    readBlob(blobPart).then((res) => {\n      const params = [recognitionContext.importFileId, res, i + chunkSize > data.size]\n      messages.push(_prepareMessage(recognizerContextRef, model, buildImportChunk, ...params))\n    })\n  }\n\n  return Promise.all(messages)\n}\n\n/**\n * Ask for the supported mimetypes\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function getSupportedImportMimeTypes (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildGetSupportedImportMimeTypes)\n}\n\n/**\n * WaitForIdle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n */\nexport function waitForIdle (recognizerContext, model) {\n  return _prepareMessage(recognizerContext, model, buildWaitForIdle)\n}\n\n/**\n * Resize\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Element} element Current element\n */\nexport function resize (recognizerContext, model, element) {\n  const params = [element, recognizerContext.editor.configuration.renderingParams.minHeight, recognizerContext.editor.configuration.renderingParams.minWidth]\n  return _prepareMessage(recognizerContext, model, buildResize, ...params)\n}\n\n/**\n * Zoom action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Number} value=10 Zoom value\n */\nexport function zoom (recognizerContext, model, value = 10) {\n  return _prepareMessage(recognizerContext, model, buildZoom, value)\n}\n\n/**\n * SetPenStyle action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {PenStyle} penStyle Current penStyle\n */\nexport function setPenStyle (recognizerContext, model, penStyle) {\n  return _prepareMessage(recognizerContext, model, buildSetPenStyle, penStyle)\n}\n\n/**\n * setPenStyleClasses action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {String} penStyleClasses Current penStyleClasses\n */\nexport function setPenStyleClasses (recognizerContext, model, penStyleClasses) {\n  return _prepareMessage(recognizerContext, model, buildSetPenStyleClasses, penStyleClasses)\n}\n\n/**\n * SetTheme action\n * @param {RecognizerContext} recognizerContext Current recognition context\n * @param {Model} model Current model\n * @param {Theme} theme Current theme\n */\nexport function setTheme (recognizerContext, model, theme) {\n  return _prepareMessage(recognizerContext, model, buildSetTheme, theme)\n}\n","import { eventLogger as logger } from '../configuration/LoggerConfig'\n\n/**\n * Emits an event when the editor state change\n * @param {String} type\n * @param {Object} data\n * @emits {Event}\n */\nexport default function emit (type, data) {\n  logger.info(`emitting ${type} event`, data)\n  // We are making usage of a browser provided class\n  // eslint-disable-next-line no-undef\n  this.dispatchEvent(new CustomEvent(type, Object.assign({ bubbles: true, composed: true }, data ? { detail: data } : undefined)))\n}\n","import { editorLogger as logger } from './configuration/LoggerConfig'\nimport { Editor } from './Editor'\n\n/**\n * Attach an Editor to a DOMElement\n * @param {Element} element DOM element to attach an editor\n * @param {Configuration} [configuration] Configuration to apply\n * @param {PenStyle} [penStyle] Pen style to apply\n * @param {Theme} [theme] Theme to apply\n * @param {Behaviors} [behaviors] Custom behaviors to apply\n * @param {String} [globalClassCSS] Replace global class css 'ms-editor' to customize style\n * @return {Editor} New editor\n */\nexport function register (element, configuration, penStyle, theme, behaviors, globalClassCSS) {\n  logger.debug('Registering a new editor')\n  return new Editor(element, configuration, penStyle, theme, behaviors, globalClassCSS)\n}\n\n/**\n * Return the list of available recognition languages\n * @param {Configuration} [configuration] Configuration to get the languages\n * @return {JSON} A list of available languages\n */\nexport async function getAvailableLanguageList (configuration) {\n  try {\n    if (configuration && configuration.recognitionParams &&\n      configuration.recognitionParams.server && configuration.recognitionParams.server.host) {\n      const serverConfig = configuration.recognitionParams.server\n      const response = await fetch(`${serverConfig.scheme}://${serverConfig.host}/api/v4.0/iink/availableLanguageList`)\n      if (response && response.ok) {\n        return response.json()\n      }\n    } else {\n      console.error('Cannot get languages ! Please check your configuration!')\n    }\n  } catch (error) {\n    console.error(error)\n  }\n}\n","import Constants from './configuration/Constants'\nimport LoggerConfig from './configuration/LoggerConfig'\nimport DefaultConfiguration from './configuration/DefaultConfiguration'\nimport DefaultPenStyle from './configuration/DefaultPenStyle'\nimport DefaultTheme from './configuration/DefaultTheme'\nimport DefaultBehaviors from './configuration/DefaultBehaviors'\nimport * as InkModel from './model/InkModel'\nimport { Editor } from './Editor'\nimport { register, getAvailableLanguageList } from './EditorFacade'\nimport * as RecognizerContext from './model/RecognizerContext'\n\nconst iink = {\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext\n}\n\nexport {\n  iink as default,\n  Constants,\n  // Default instantiations\n  DefaultConfiguration,\n  DefaultBehaviors,\n  DefaultPenStyle,\n  DefaultTheme,\n  // Helper functions\n  register,\n  getAvailableLanguageList,\n  // Internals\n  LoggerConfig,\n  Editor,\n  InkModel,\n  RecognizerContext\n}\n"],"names":["Constants","EventType","IDLE","CHANGED","IMPORTED","EXPORTED","CONVERTED","RENDERED","LOADED","UNDO","REDO","CLEAR","IMPORT","SUPPORTED_IMPORT_MIMETYPES","EXPORT","CONVERT","ERROR","RecognitionType","TEXT","MATH","DIAGRAM","RAWCONTENT","Protocol","WEBSOCKET","REST","ModelState","INITIALIZING","INITIALIZED","EXPORTING","PENDING","MODIFIED","Trigger","QUIET_PERIOD","POINTER_UP","DEMAND","Logger","EDITOR","MODEL","GRABBER","RENDERER","RECOGNIZER","EVENT","UTIL","SMARTGUIDE","LogLevel","TRACE","DEBUG","INFO","WARN","Languages","zh_CN","zh_HK","zh_TW","ko_KR","ja_JP","Error","NOT_REACHABLE","WRONG_CREDENTIALS","TOO_OLD","NO_ACTIVITY","Exports","JIIX","root","definition","module","exports","log","this","noop","undefinedType","isIE","window","navigator","test","userAgent","logMethods","bindMethod","obj","methodName","method","bind","Function","prototype","call","e","apply","arguments","traceForIE","console","trace","realMethod","undefined","replaceLoggingMethods","level","loggerName","i","length","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","name","defaultLevel","factory","currentLevel","self","storageKey","getPersistedLevel","storedLevel","localStorage","ignore","cookie","document","location","indexOf","encodeURIComponent","exec","slice","levels","SILENT","getLevel","setLevel","persist","toUpperCase","persistLevelIfPossible","levelNum","levelName","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","TypeError","logger","_log","noConflict","getLoggers","loglevel","editorLogger","modelLogger","grabberLogger","rendererLogger","recognizerLogger","eventLogger","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","funcTag","objectTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","global","Object","freeSelf","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","func","thisArg","args","uid","arrayProto","Array","funcProto","objectProto","coreJsData","funcToString","toString","hasOwnProperty","maskSrcKey","keys","IE_PROTO","nativeObjectToString","objectCtorString","reIsNative","RegExp","replace","Buffer","Symbol","Uint8Array","allocUnsafe","getPrototype","overArg","transform","arg","getPrototypeOf","objectCreate","create","propertyIsEnumerable","splice","symToStringTag","toStringTag","defineProperty","getNative","nativeIsBuffer","isBuffer","nativeMax","Math","max","nativeNow","Date","now","Map","nativeCreate","baseCreate","object","proto","isObject","result","Hash","entries","index","clear","entry","set","ListCache","MapCache","Stack","data","__data__","size","arrayLikeKeys","value","inherited","isArr","isArray","isArg","isArguments","isBuff","isType","skipIndexes","baseTimes","n","iteratee","String","key","isIndex","push","assignMergeValue","eq","baseAssignValue","assignValue","objValue","assocIndexOf","array","configurable","enumerable","writable","hashClear","hashDelete","has","get","hashGet","hashHas","hashSet","listCacheClear","listCacheDelete","pop","listCacheGet","listCacheHas","listCacheSet","mapCacheClear","hash","map","string","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","LARGE_ARRAY_SIZE","baseFor","createBaseFor","fromRight","keysFunc","iterable","props","baseGetTag","getRawTag","isOwn","tag","unmasked","objectToString","baseIsArguments","isObjectLike","baseIsNative","isMasked","isFunction","toSource","baseKeysIn","nativeKeysIn","isProto","isPrototype","baseMerge","source","srcIndex","customizer","stack","srcValue","baseMergeDeep","mergeFunc","safeGet","stacked","newValue","isCommon","isTyped","isArrayLikeObject","isArrayLike","cloneBuffer","buffer","isDeep","constructor","copy","cloneTypedArray","typedArray","cloneArrayBuffer","arrayBuffer","byteLength","byteOffset","copyArray","isPlainObject","Ctor","toPlainObject","copyObject","isNew","keysIn","initCloneObject","baseRest","start","setToString","overRest","otherArgs","identity","isKeyable","type","getValue","shortOut","count","lastCalled","stamp","remaining","other","isLength","stubFalse","baseUnary","baseIsTypedArray","merge","createAssigner","assigner","sources","guard","isIterateeCall","defaultConfiguration","recognitionParams","protocol","server","scheme","host","applicationKey","hmacKey","useWindowLocation","websocket","pingEnabled","pingDelay","maxPingLostCount","autoReconnect","maxRetryCount","fileChunkSize","iink","alwaysConnected","lang","jiix","strokes","text","chars","words","renderer","math","mimeTypes","solver","enable","margin","bottom","left","right","top","eraser","guides","smartGuide","smartGuideFadeOut","duration","diagram","recognition","shape","listenerOptions","capture","passive","undoRedoMaxStackSize","xyFloatPrecision","timestampFloatPrecision","triggerDelay","processDelay","resizeTriggerDelay","triggers","exportContent","addStrokes","restConversionState","renderingParams","stroker","minHeight","minWidth","t","o","r","l","m","c","d","__esModule","default","p","s","iterator","toJSON","error","u","split","forEach","trim","substring","_trimSemiColon","toCSS","defaultPenStyle","parser","JsonCSS","penStyle","css","defaultTheme","ink","color","theme","floatPrecisionArray","roundFloat","oneFloat","requestedFloatPrecision","floatPrecision","round","extractPoint","event","domElement","configuration","offsetTop","offsetLeft","eventRef","changedTouches","rect","getBoundingClientRect","x","clientX","clientLeft","y","clientY","clientTop","prevent","preventDefault","attach","element","editor","mMaxDiffX","unfocus","getSelection","removeAllRanges","hideMenu","evt","moreMenuInDocument","querySelector","target","classList","contains","style","display","hideCandidates","candidatesInDocument","tagName","pointerDownHandler","pointerDownOnEditor","id","activePointerId","pointerId","button","buttons","stopPropagation","pointerType","isErasing","pointerDown","smartGuidePointerDown","downSmartGuidePoint","pointerMoveHandler","pointerMove","point","diffX","abs","diffY","pointerUpHandler","smartGuideIds","scrollbarClasses","pointerEnteredSmartGuide","relatedTarget","includes","className","pointerExitedSmartGuide","pointerMovedWords","pointerUp","context","options","listeners","listener","item","addEventListener","documentElement","detach","removeEventListener","_arrayLikeToArray","arr","len","arr2","_arrayWithoutHoles","arrayLikeToArray","_iterableToArray","iter","from","_unsupportedIterableToArray","minLen","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","drawStroke","stroke","ShapeSymbols","table","recognizedShape","ellipse","line","phi","angle","returnedAngle","PI","drawArrowHead","headPoint","alpha","beta","contextReference","save","fillStyle","strokeStyle","moveTo","beginPath","lineTo","cos","sin","fill","restore","drawShapeEllipse","shapeEllipse","points","drawEllipseArc","centerPoint","maxRadius","minRadius","orientation","startAngle","sweepAngle","z1","z3","z2","z4","floor","boundariesPoints","atan2","cosAlpha","sinAlpha","center","beginDecoration","beginTangentAngle","endDecoration","endTangentAngle","drawLine","p1","p2","drawShapeSymbol","symbol","lineWidth","width","elementType","candidates","selectedCandidateIndex","lines","drawShapeLine","shapeLine","firstPoint","lastPoint","primitives","primitive","TextSymbols","inputCharacter","textLine","drawTextLine","drawText","label","font","textHeight","textAlign","justificationType","textBaseline","fillText","topLeftPoint","height","underlineList","underline","drawUnderline","delta","firstCharacter","lastCharacter","computeDistance","xArray","yArray","lastIndexPoint","distance","sqrt","pow","isNaN","computeLength","lArray","createStrokeComponent","properties","assign","addPoint","strokeReference","filterPointByAcquisitionDelta","ret","computePressure","ratio","pressure","parseFloat","end","slicedStroke","getPointByIndex","mergeBounds","boundsA","boundsB","minX","min","maxX","minY","maxY","getLineBounds","getEllipseBounds","getTextLineBounds","getClefBounds","clef","boundingBox","getStrokeBounds","getSymbolsBounds","symbols","bounds","Number","MAX_VALUE","MIN_VALUE","boundsRef","filter","reduce","createModel","currentStroke","rawStrokes","strokeGroups","lastPositions","lastSentPosition","lastReceivedPosition","lastRenderedPosition","defaultSymbols","recognizedSymbols","rawResults","convert","creationTime","getTime","modificationTime","clearModel","model","modelReference","needRedraw","addStroke","addStrokeToGroup","strokePenStyle","lastGroup","newStrokeGroup","strokeCopy","extractPendingStrokes","position","initPendingStroke","dpi","pxWidth","StrokeComponent","appendToPendingStroke","endPendingStroke","getBorderCoordinates","modelBounds","updateModelSentPosition","updateModelReceivedPosition","resetModelPositions","updateModelRenderedPosition","extractPendingRecognizedSymbols","cloneModel","clonedModel","JSON","parse","stringify","mergeModels","models","a","b","modelRef","extractStrokesFromInkRange","firstStroke","lastStroke","slicedStrokes","resetModelRendererPosition","detectPixelRatio","getPixelRatio","canvas","getContext","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","createElement","createCanvas","add","appendChild","resizeContent","renderingCanvas","capturingCanvas","parentNode","clientWidth","clientHeight","pixelRatio","scale","drawSymbol","drawTextSymbol","warn","drawModel","renderingCanvasContext","clearRect","InkModel","capturingCanvasContext","getInfo","removeChild","resize","drawCurrentStroke","computeLinksPoints","radius","computeMiddlePoint","point1","point2","computeAxeAngle","begin","renderArc","arc","renderLine","linkPoints1","linkPoints2","renderQuadratic","ctrl","linkPoints3","quadraticCurveTo","nbquadratics","renderFinal","linkPoints","newAngle","closePath","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","space","local","creatorInherit","ownerDocument","uri","namespaceURI","createElementNS","creatorFixed","fullname","namespace","none","selector","empty","update","EnterNode","parent","datum","_next","_parent","child","insertBefore","next","querySelectorAll","bindIndex","group","enter","exit","node","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","NaN","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","ClassList","_node","_names","getAttribute","classedAdd","names","list","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","join","filterEvents","mouseenter","mouseleave","filterContextListener","contextListener","related","compareDocumentPosition","event1","parseTypenames","typenames","onRemove","typename","on","__on","j","onAdd","wrap","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","Selection","groups","parents","_groups","_parents","insertAdjacentSVG","html","container","toLowerCase","lastChild","select","subgroups","subnode","subgroup","selectAll","selectorAll","match","matches","matcher","each","constant","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","order","selection","groups0","groups1","m0","m1","merges","group0","group1","sort","compare","compareNode","sortgroups","sortgroup","callback","nodes","attr","getAttributeNS","property","classed","creator","insert","before","deep","dispatch","elementRef","fontSize","d3","pendingRecognizedSymbols","patch","updateView","patchUpdate","updates","svgElementSelector","layer","insertAdjacentHTML","outerHTML","parentId","refId","pendingStrokes","symbolContext","parts","svgPath","asyncGeneratorStep","gen","resolve","reject","_throw","info","done","Promise","then","_asyncToGenerator","fn","err","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","state","GenStateSuspendedStart","invoke","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","require$$0","_typeof","CryptoJS","F","subtype","C","C_lib","lib","Base","extend","overrides","mixIn","init","$super","instance","propertyName","WordArray","sigBytes","encoder","Hex","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","random","nBytes","rcache","m_w","m_z","mask","_r","C_enc","enc","hexChars","bite","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","utf8Str","unescape","BufferedBlockAlgorithm","_data","_nDataBytes","_append","_process","doFlush","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","offset","_doProcessBlock","processedWords","Hasher","cfg","_doReset","messageUpdate","finalize","_doFinalize","_createHelper","hasher","message","_createHmacHelper","C_algo","HMAC","algo","X32WordArray","C_x64","x64","Word","high","low","toX32","x64Words","x64WordsLength","x32Words","x64Word","wordsLength","X64Word","X64WordArray","X64Word_create","K","W","SHA512","_hash","M","H","H0","H1","H2","H3","H4","H5","H6","H7","H0h","H0l","H1h","H1l","H2h","H2l","H3h","H3l","H4h","H4l","H5h","H5l","H6h","H6l","H7h","H7l","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","Wi","Wih","Wil","gamma0x","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1x","gamma1xh","gamma1xl","gamma1h","gamma1l","Wi7","Wi7h","Wi7l","Wi16","Wi16h","Wi16l","t1l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kih","Kil","t1h","t2l","nBitsTotal","nBitsLeft","HmacSHA512","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","computeHmac","input","jsonInput","post","recognizerContext","url","apiVersion","mimeType","recognizerContextRef","idle","headers","Headers","CryptoHelper","reqInit","credentials","body","request","Request","fetch","response","contentType","blob","json","msg","recoverable","createEmptyRecognizerContext","recognitionContexts","initPromise","websocketCallback","reconnect","currentReconnectionCount","sessionId","contentPartCount","currentPartId","instanceId","canUndo","canRedo","isEmpty","supportedImportMimeTypes","undoStackIndex","possibleUndoCount","initialized","isResetRequired","updateRecognitionPositions","positions","setRecognitionContext","recognitionContext","canReconnect","shouldAttemptImmediateReconnect","LOST_CONNEXION_MESSAGE","CLOSE_RECOGNIZER_MESSAGE","val","div","elMatches","Element","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","query","queryChildren","children","cls","thumb","rail","consuming","focus","clicking","active","scrolling","scrollingClassTimeout","addScrollingClass","clearTimeout","removeScrollingClass","setTimeout","isAlive","settings","scrollingThreshold","EventElement","handlers","prototypeAccessors","eventName","handler","unbind","this$1","unbindAll","every","defineProperties","EventManager","eventElements","initCustomEvent","processScrollDiff","axis","diff","useScrollingClass","forceFireReachEvent","fields","processScrollDiff$1","ref","contentHeight","containerHeight","scrollTop","up","down","reach","setScrollingClassInstantly","toInt","eventElement","ee","once","onceHandler","env","isWebKit","supportsTouch","maxTouchPoints","DocumentTouch","supportsIePointer","msMaxTouchPoints","isChrome","updateGeometry","roundedScrollTop","containerWidth","contentWidth","scrollWidth","scrollHeight","scrollbarXRail","scrollbarYRail","suppressScrollX","scrollXMarginOffset","scrollbarXActive","railXWidth","railXMarginWidth","railXRatio","scrollbarXWidth","getThumbSize","scrollbarXLeft","negativeScrollAdjustment","scrollLeft","suppressScrollY","scrollYMarginOffset","scrollbarYActive","railYHeight","railYMarginHeight","railYRatio","scrollbarYHeight","scrollbarYTop","updateCss","xRailOffset","isRtl","isScrollbarXUsingBottom","scrollbarXBottom","scrollbarXTop","yRailOffset","isScrollbarYUsingRight","scrollbarYRight","scrollbarYOuterWidth","scrollbarYLeft","scrollbarX","railBorderXWidth","scrollbarY","railBorderYWidth","thumbSize","minScrollbarLength","maxScrollbarLength","bindMouseScrollHandler","pageY","startingScrollTop","startingMousePageY","scrollBy","mouseMoveHandler","touches","startsWith","mouseUpHandler","bindMoves","touchMode","clickRail","direction","pageYOffset","pageX","pageXOffset","dragThumb","keyboard","isDefaultPrevented","defaultPrevented","activeElement","contentDocument","shadowRoot","isEditable","deltaX","deltaY","which","metaKey","altKey","shiftKey","shouldPreventDefault","wheelPropagation","wheel","mousewheelHandler","getDeltaFromEvent","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","shouldBeConsumedByChild","cursor","overflowY","maxScrollTop","overflowX","maxScrollLeft","shouldPrevent","useBothWheelAxes","wheelSpeed","isTop","isBottom","offsetHeight","isLeft","isRight","offsetWidth","ctrlKey","onwheel","onmousewheel","touch","startOffset","startTime","speed","easingLoop","touchStart","touchMove","touchEnd","PointerEvent","MSPointerEvent","applyTouchMove","differenceX","differenceY","getTouch","targetTouches","shouldHandle","MSPOINTER_TYPE_MOUSE","clearInterval","currentOffset","currentTime","timeGap","magnitudeX","magnitudeY","scrollY","swipeEasing","setInterval","isInitialized","PerfectScrollbar","userSettings","nodeName","originalScrollLeft","blur","isNegativeScroll","railXStyle","borderLeftWidth","borderRightWidth","marginLeft","marginRight","railYStyle","outerWidth","styles","paddingLeft","paddingRight","borderTopWidth","borderBottomWidth","marginTop","marginBottom","handlerName","lastScrollTop","lastScrollLeft","onScroll","destroy","removePsClasses","selectedText","isReadOnly","hasAttribute","setSelectionRange","range","createRange","selectNodeContents","addRange","_select","_select2","_interopRequireDefault","_classCallCheck","Constructor","_createClass","descriptor","protoProps","staticProps","ClipboardAction","resolveOptions","initSelection","action","emitter","trigger","selectFake","selectTarget","_this","isRTL","removeFake","fakeHandlerCallback","fakeHandler","fakeElem","border","padding","yPosition","copyText","succeeded","execCommand","handleResult","emit","clearSelection","_action","_target","E","ctx","off","_","evtArr","evts","liveEvents","HTMLElement","matchesSelector","oMatchesSelector","closest","_delegate","useCapture","listenerFn","delegateTarget","elements","listen","is","listenNode","nodeList","listenNodeList","listenSelector","_clipboardAction","_tinyEmitter","_goodListener","_clipboardAction2","_tinyEmitter2","_goodListener2","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","Clipboard","_Emitter","listenClick","defaultAction","defaultTarget","defaultText","_this2","onClick","currentTarget","clipboardAction","getAttributeValue","isSupported","actions","support","queryCommandSupported","suffix","attribute","require$$1","require$$2","isInShadow","addListeners","elementsRef","textElement","showCandidates","smartGuideRef","randomString","wordToChange","candidatesElement","word","clickCandidate","candidate","innerText","jiixToImport","import_","ellipsisElement","showActions","positionActions","menuElement","isMenuInDocument","insertActions","convertElement","copyElement","deleteElement","createSmartGuide","createHTMLElements","smartGuideElement","textContainer","tagElement","lastWord","previousLabelExport","perfectScrollbar","smartGuideTimeOutId","callFadeOutObserver","MutationObserver","mutations","observe","childList","subtree","attributes","maxWidthTextContainer","maxWidth","launchSmartGuide","isSmartGuideInDocument","insertSmartGuide","mmToPixels","insertSmartGuideElement","visibility","loader","insertTag","insertTextContainer","insertEllipsis","createWordSpan","span","populatePrompter","myFragment","createDocumentFragment","addAnimationToModifiedWord","tempWords","labelWordsArray","tempLabelWordsArray","wordChangedId","getElementById","_defineProperties","updateUndoRedoState","undoRedoContext","undoRedoContextRef","currentPosition","getModel","res","updateModel","modelIndex","findIndex","undoRedoContextReference","maxSize","shift","UndoRedoContext","undo","redo","borderCoordinates","browserDocument","inkImporter","editorParam","delayBetweenStrokes","lastOneDelay","origGrabber","behavior","grabber","setDelay","X","idx","Y","play","actionsArray","delay","currentAction","nextDelay","lastIndexOf","Event","importStrokeGroups","strokeFromGroup","rendererContext","destructurePromise","resolveParam","rejectParam","promise","time","timer","manageResetState","recognizer","RecognizerContext","isTriggerValid","availableTriggers","events","pointerEvents","launchExport","requestedMimeTypes","export_","editorRef","exportTimer","timeout","delayer","PromiseHelper","getSupportedImportMimeTypes","launchConvert","conversionState","launchConfig","sendConfiguration","resizeTimer","SmartGuide","waitForIdle","close","setPenStyle","setPenStyleClasses","penStyleClasses","setTheme","Editor","behaviors","globalClassCss","styleElement","createTextNode","sheet","notifyTimer","innerBehaviors","overrideDefaultBehaviors","currentBehaviors","defaultBehaviors","rendererList","strokerList","recognizerList","getBehaviorFromConfiguration","DefaultBehaviors","localTheme","innerConfiguration","overrideDefaultConfiguration","currentConfiguration","confRef","DefaultConfiguration","innerPenStyle","overrideDefaultPenStyle","currentStyle","DefaultStyles","localPenStyle","innerPenStyleClasses","innerTheme","overrideDefaultTheme","currentTheme","DefaultTheme","innerBehavior","grabberContext","innerRecognizer","createUndoRedoContext","undoRedoManager","UndoRedoManager","initialize","shouldSendTheme","handleError","handleSuccess","innerRenderer","getImage","renderStructure","translate","toDataURL","ImageRenderer","strokeIndex","emitEvents","launchWaitForIdle","_this3","manageRecognizedModel","_this4","canClear","_this5","canConvert","canExport","mimetype","launchImport","Blob","launchGetSupportedImportMimeTypes","launchPointerEvents","launchResize","launchClose","eastereggs","code","reason","iinkRestConfiguration","postMessage","suffixUrl","buildMessage","NetworkInterface","recognizerContextReference","buildData","dataConf","buildTextConf","buildMathConf","buildDiagramConf","buildRawContentConf","newStrokes","newGroup","DefaultPenStyle","xDPI","yDPI","extractExports","resultCallback","callPostMessage","all","_arrayWithHoles","_iterableToArrayLimit","_i","_s","_e","_arr","_n","_d","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","nonIterableRest","UUIDjs","getRandomInt","maxFromBits","bits","limitUI04","limitUI06","limitUI08","limitUI12","limitUI14","limitUI16","limitUI32","limitUI40","limitUI48","randomUI04","randomUI06","randomUI08","randomUI12","randomUI14","randomUI16","randomUI32","randomUI40","randomUI48","paddedString","z","fromParts","timeLow","timeMid","timeHiAndVersion","clockSeqHiAndReserved","clockSeqLow","version","hex","toURN","toBytes","ints","intPos","equals","uuid","UUID","getTimeFieldValues","ts","UTC","hm","mid","hi","timestamp","_create4","_create1","sequence","tick","tf","tl","thav","cshar","csl","fromTime","last","firstFromTime","lastFromTime","fromURN","strId","fromBytes","str","pos","octet","fromBinary","binary","new","newTS","infinitePing","websocketRef","pingLostCount","maxPingLost","readyState","send","openWebSocket","socket","WebSocket","addWebsocketAttributes","websocketConfiguration","onopen","onclose","onerror","onmessage","callBackParam","buildWebSocketCallback","NetworkWSInterface","buildRestoreIInkSessionInput","buildNewContentPackageInput","hmacChallenge","buildHmacMessage","hmac","iinkSessionId","buildConfiguration","buildOpenContentPart","buildNewContentPart","partId","partChange","contentChange","buildUrl","retry","buildFunc","responseCallback","sendMessage","sendFailedException","IinkWsConfiguration","NEBO","xDpi","yDpi","viewSizeHeight","viewSizeWidth","buildAddStrokes","buildUndo","buildRedo","buildClear","buildConvert","buildZoom","zoom","buildResize","buildExport","requestedMimeType","buildImportFile","importFileId","buildImportChunk","lastChunk","buildPointerEvents","buildWaitForIdle","buildGetSupportedImportMimeTypes","buildSetPenStyle","buildSetPenStyleClasses","styleClasses","buildSetTheme","contentChanged","WsRecognizerUtil","WsBuilder","errPartChanged","resPartChanged","errContentChanged","resContentChanged","_prepareMessage","buildFunction","onDemand","DefaultRecognizer","newContentPart","openContentPart","chunkSize","messages","readBlob","fileReader","FileReader","onload","readAsText","PointerEventGrabber","QuadraticCanvasStroker","QuadraticSVGStroker","CanvasRenderer","SVGRenderer","iinkRestRecognizer","iinkWsRecognizer","composed","register","globalClassCSS","getAvailableLanguageList","serverConfig","ok","LoggerConfig"],"mappings":"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"}